import{y as R,L as O,M as Y,r as X,J as Z,N as v,af as ee,o as G,Y as se,a as te,z as V,K as oe,b as n,c as r,O as l,e as _,d as e,f as d,i as x,B as M,t as p,g as b,W as ne,H as m,I as A,h as f,v as $,ag as B,ah as I,n as S,$ as le,U as ae,V as re,a2 as ie,Q as de,ai as ce,aj as ue}from"./main-B8r1lKmx.js";import{E as pe}from"./el-empty-Keg8_2xc.js";import{E as _e}from"./el-image-viewer-d2TtpsQs.js";import{u as fe}from"./global-g8PxrI0_.js";import{u as ge}from"./conversation-zxf9ascK.js";import{u as me}from"./enterprise-Dlct5MeJ.js";import{u as xe}from"./links-trITkSLu.js";import"./debounce-P1XZIO3e.js";const he={class:"px-3 h-[70px] flex items-center gap-2"},ve=["src"],Ee={class:"flex-1 py-3 overflow-y-auto"},be={class:"px-5 pb-2"},ye={key:0,class:"px-5"},ke={class:"h-9 flex items-center gap-2"},Ce={class:"text-sm text-[#939499]"},we={class:"flex flex-col gap-1"},Ae=["onClick"],$e=["innerHTML"],Se={class:"h-9 flex items-center gap-2"},ze={class:"text-sm text-[#939499]"},Le={class:"flex flex-col gap-1"},De=["onClick"],Ue=["innerHTML"],Te={class:"h-9 flex items-center gap-2"},Ve={class:"text-sm text-[#939499]"},He={class:"flex flex-col gap-1"},Fe=["href"],Me=["innerHTML"],Be={class:"px-2"},Ie={class:"size-7 flex-center"},Ne={class:"flex-1 text-base"},Re={class:"px-3"},Oe=["onClick"],Ge={class:"flex-1 text-sm truncate"},Je=["onClick"],je={class:"flex flex-col gap-3 px-2 mt-2"},qe={class:"size-7 flex-center"},We={class:"flex-1 text-base text-[#000000]"},Ke={class:"flex flex-col gap-3 px-2 py-1.5"},Pe={class:"size-7 flex-center"},Qe={class:"flex-1 text-base"},Ye={class:"size-7 flex-center"},Xe={class:"flex-1 text-base text-[#000000]"},N=4,Ze=R({__name:"sider",setup(J){const h=O(),y=Y(),c=fe(),z=xe(),i=ge(),k=me(),C=X(),o=Z({keyword:"",sidebarCollapsed:!1,agentCollapsed:!1,showUsualAgents:!0}),j=v(()=>o.agentCollapsed?i.usual_agents:i.usual_agents.slice(0,N)),q=v(()=>i.currentAgent),W=v(()=>i.currentConversation),L=v(()=>o.keyword?i.usual_agents.filter(s=>s.name.toLowerCase().includes(o.keyword.toLowerCase())).map(s=>({...s,formt_name:s.name.replace(new RegExp(o.keyword,"g"),`<span class="text-theme">${o.keyword}</span>`)})):[]),D=v(()=>o.keyword?y.agentList.filter(s=>s.name.toLowerCase().includes(o.keyword.toLowerCase())).map(s=>({...s,formt_name:s.name.replace(new RegExp(o.keyword,"g"),`<span class="text-theme">${o.keyword}</span>`)})):[]),U=v(()=>o.keyword?Object.values(z.appMap).flat().filter(s=>s.name.toLowerCase().includes(o.keyword.toLowerCase())).map(s=>({...s,name:s.name.replace(new RegExp(o.keyword,"g"),`<span class="text-theme">${o.keyword}</span>`)})):[]);ee(C,()=>{!c.siderVisible&&c.siderCollapsed&&(c.siderCollapsed=!1)});const K=()=>{o.agentCollapsed=!o.agentCollapsed},P=()=>{window.$isElectron?window.$chat53ai.$win({type:"new-tab",data:JSON.stringify({title:"AI知识库",closable:!0,ability:!1,urls:["http://ziroom.hub.53ai.com/space"]})}):window.open("http://ziroom.hub.53ai.com/space","_blank")};return G(async()=>{const s=h.query.agent_id||"",a=h.query.conversation_id||"";y.loadCategorys(),await y.loadAgentList().then(g=>{if(h.name!=="Chat")return;const u=g.find(E=>E.agent_id===+s);if(u)i.pushUsualAgent(u);else{const E=i.usual_agents[0]||g[0];E&&i.pushUsualAgent(E)}i.updateAgents(g),a||i.setCurrentState(+s,0)}),se(()=>{z.loadLinks()})}),te(()=>{i.clearCurrentState()}),(s,a)=>{const g=V("router-link"),u=V("svg-icon"),E=re,w=_e,Q=pe,H=ie,T=oe("tooltip");return n(),r(m,null,[!l(c).siderVisible&&!l(c).siderCollapsed?(n(),r("div",{key:0,class:"w-4 h-full absolute left-0 top-0 z-[2] hover:bg-gray-100/50 transition-colors",onMouseenter:a[0]||(a[0]=t=>l(c).hoverSider(!0))},null,32)):_("",!0),e("div",{ref_key:"siderRef",ref:C,class:S(["w-[280px] border-r flex flex-col bg-[#FAFAFA] transition-all duration-300 ease-linear",[{"absolute z-10 left-0 top-20 bottom-5 -translate-x-full shadow-xl rounded-r":!l(c).siderVisible,"translate-x-0":!l(c).siderVisible&&l(c).siderCollapsed}]]),onMouseleave:a[4]||(a[4]=t=>l(c).hoverSider(!1))},[e("div",he,[d(g,{to:{name:"Home"}},{default:x(()=>[e("img",{class:"size-8 rounded",src:l(k).logo,alt:""},null,8,ve)]),_:1}),d(g,{to:{name:"Home"},class:"flex-1 text-base text-primary truncate"},{default:x(()=>[M(p(l(k).display_name),1)]),_:1}),b((n(),r("div",{class:"flex-none size-7 rounded-md flex-center cursor-pointer hover:bg-[#ECEDEE]",onClick:a[1]||(a[1]=(...t)=>l(c).toggleSider&&l(c).toggleSider(...t))},[d(u,{name:"layout-left",size:"20",color:"#9A9A9A"})])),[[T,{content:l(c).siderVisible?s.$t("chat.collapse_side_bar"):s.$t("chat.expand_side_bar")}]])]),a[9]||(a[9]=e("div",{class:"border-b mx-2"},null,-1)),e("div",Ee,[e("div",be,[d(E,{modelValue:o.keyword,"onUpdate:modelValue":a[2]||(a[2]=t=>o.keyword=t),class:"",placeholder:s.$t("action.search"),"prefix-icon":l(ne),style:{"--el-input-inner-height":"36px","--el-input-border-color":"none"},clearable:""},null,8,["modelValue","placeholder","prefix-icon"])]),o.keyword?(n(),r("div",ye,[L.value.length?(n(),r(m,{key:0},[e("div",ke,[e("div",Ce,p(s.$t("module.chat")),1),a[5]||(a[5]=e("div",{class:"flex-1 h-px bg-[#E6E8EB]"},null,-1))]),e("div",we,[(n(!0),r(m,null,A(L.value,t=>(n(),r("div",{key:t.agent_id,class:"h-9 px-6 flex items-center gap-2 rounded cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]",onClick:F=>l(i).setCurrentState(t.agent_id,0)},[d(w,{class:"flex-none size-6 rounded-full",src:t.logo},null,8,["src"]),e("div",{class:"flex-1 text-sm truncate",innerHTML:t.formt_name},null,8,$e)],8,Ae))),128))])],64)):_("",!0),D.value.length?(n(),r(m,{key:1},[e("div",Se,[e("div",ze,p(s.$t("module.find")),1),a[6]||(a[6]=e("div",{class:"flex-1 h-px bg-[#E6E8EB]"},null,-1))]),e("div",Le,[(n(!0),r(m,null,A(D.value,t=>(n(),r("div",{key:t.agent_id,class:"h-9 px-6 flex items-center gap-2 rounded cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]",onClick:()=>{l(i).pushUsualAgent(t),l(i).setCurrentState(t.agent_id,0)}},[d(w,{class:"flex-none size-6 rounded-full",src:t.logo},null,8,["src"]),e("div",{class:"flex-1 text-sm truncate",innerHTML:t.formt_name},null,8,Ue)],8,De))),128))])],64)):_("",!0),U.value.length?(n(),r(m,{key:2},[e("div",Te,[e("div",Ve,p(s.$t("module.toolbox")),1),a[7]||(a[7]=e("div",{class:"flex-1 h-px bg-[#E6E8EB]"},null,-1))]),e("div",He,[(n(!0),r(m,null,A(U.value,t=>(n(),r("a",{key:t.agent_id,href:t.url,target:"_blank",class:"h-9 px-6 flex items-center gap-2 rounded cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]"},[d(w,{class:"flex-none size-6 rounded-full",src:t.logo},null,8,["src"]),e("div",{class:"flex-1 text-sm truncate",innerHTML:t.name},null,8,Me)],8,Fe))),128))])],64)):_("",!0),!L.value.length&&!D.value.length&&!U.value.length?(n(),f(Q,{key:3,"image-size":"60",description:s.$t("common.no_data")},null,8,["description"])):_("",!0)])):_("",!0),b(e("div",null,[e("div",Be,[e("div",{class:"h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer hover-bg-primary-light-9 text-primary",onClick:a[3]||(a[3]=t=>o.showUsualAgents=!o.showUsualAgents)},[e("div",Ie,[d(u,{size:"18",name:"chat"})]),e("p",Ne,p(s.$t("module.chat")),1),d(H,null,{default:x(()=>[o.showUsualAgents?(n(),f(l(B),{key:0})):(n(),f(l(I),{key:1}))]),_:1})])]),b(e("div",Re,[d(ae,{name:"list",tag:"div",class:"flex flex-col gap-1 mt-2"},{default:x(()=>[(n(!0),r(m,null,A(j.value,t=>(n(),r("div",{key:t.agent_id,class:S(["h-9 pl-6 pr-2 rounded-md flex items-center gap-2 cursor-pointer hover:bg-[#ECEDEE] group text-[#4F5052]",[q.value.agent_id===t.agent_id&&!W.value.conversation_id?"bg-[#ECEDEE] ":""]]),onClick:F=>l(i).setCurrentState(t.agent_id,0)},[d(w,{class:"flex-none size-6 rounded",src:t.logo},null,8,["src"]),b((n(),r("div",Ge,[M(p(t.name),1)])),[[T,!0]]),b((n(),r("div",{class:"size-7 flex-center",onClick:le(F=>l(i).toggleUsualAgentFixed(t),["stop"])},[t.is_fixed?(n(),f(u,{key:0,name:"top",color:"#2563EB"})):(n(),f(u,{key:1,name:"top",color:"#4F5052",class:"invisible group-hover:visible"}))],8,Je)),[[T,{content:t.is_fixed?s.$t("action.unfixed"):s.$t("action.fixed")}],[$,!o.sidebarCollapsed]])],10,Oe))),128))]),_:1}),l(i).usual_agents.length>N?(n(),r("div",{key:0,class:"flex items-center gap-1 mt-3.5 cursor-pointer text-[#9A9A9A]",onClick:K},[b(e("span",{class:"text-sm"},p(o.agentCollapsed?s.$t("action.collapse"):s.$t("action.expand")),513),[[$,!o.sidebarCollapsed]]),d(H,null,{default:x(()=>[o.agentCollapsed?(n(),f(l(B),{key:0})):(n(),f(l(I),{key:1}))]),_:1})])):_("",!0)],512),[[$,o.showUsualAgents]]),e("div",je,[d(g,{to:{name:"Discover"},class:S(["h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]",[l(h).name==="Discover"?"bg-[#ECEDEE]":""]])},{default:x(()=>[e("div",qe,[d(u,{size:"18",name:"compass"})]),e("p",We,p(s.$t("module.find")),1)]),_:1},8,["class"])]),a[8]||(a[8]=e("div",{class:"mx-2 border-t mt-1.5"},null,-1)),e("div",Ke,[d(g,{to:{name:"Toolbox"},class:S(["h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer text-primary hover:bg-[#ECEDEE]",[l(h).name==="Toolbox"?"bg-[#ECEDEE]":""]])},{default:x(()=>[e("div",Pe,[d(u,{size:"18",name:"send_plane"})]),e("p",Qe,p(s.$t("module.toolbox")),1)]),_:1},8,["class"]),s.$isElectron?(n(),r("div",{key:0,onClick:P,href:"http://ziroom.hub.53ai.com/space",target:"_blank",class:"h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]"},[e("div",Ye,[d(u,{size:"18",name:"tips"})]),e("p",Xe,p(s.$t("module.library")),1)])):_("",!0)])],512),[[$,!o.keyword]])])],34)],64)}}}),es=de(Ze,[["__scopeId","data-v-527e9881"]]),ss={class:"h-screen flex"},ts={class:"flex-1 overflow-y-auto"},us=R({__name:"index",setup(J){const h=O(),y=ce(),c=v(()=>!["Index","HomeIndex","HomeLayout","HomeAgent","HomeToolbox","Profile"].includes(h.name));return G(()=>{}),(z,i)=>{const k=V("RouterView");return n(),r("div",ss,[l(y).is_login&&c.value?(n(),f(es,{key:0})):_("",!0),e("main",ts,[d(k,null,{default:x(({Component:C,route:o})=>[(n(),f(ue(C),{key:o.path}))]),_:1})])])}}});export{us as default};
