import{cb as Bs,cc as _t,cd as zs,ce as Ot,cf as xt,cg as It,ch as Et,ci as Ne,cj as Ds,ck as je,cl as Tt,at as Fs,cm as Us,cn as Rt,co as Nt,cp as ue,cq as Ks,cr as Gs,cs as qs,an as tt,ay as Qs,ak as ge,B as Y,bk as st,al as he,P as I,c as W,i as P,b,d,e as V,aq as N,n as x,R as w,j as T,f as E,aI as Mt,$ as G,a3 as ee,D as F,T as js,ar as it,s as Zs,r as A,b0 as ce,a_ as ze,bW as ne,ac as me,ct as Js,az as te,b2 as ot,h as q,v as $e,t as $,am as Xt,a5 as at,M as oe,b1 as ei,Y as J,o as be,ao as ti,cu as si,cv as ii,bo as Yt,bp as Bt,cw as oi,l as re,cx as ai,b7 as Pe,cy as kt,bq as zt,p as ni,ax as Xe,w as li,c5 as _e,cz as ri,cA as ci,b8 as ie,aQ as ui,bh as Ie,a9 as Ye,be as Dt,cB as hi,av as Oe,cC as di,ah as pi,aw as ve,cD as fi,bR as mi,bi as vi,E as Q,N as Ee,K as de,L as Ze,F as D,Z as fe,cE as gi,aj as le,cF as bi,bD as wi,b9 as Ft,cG as yi,bc as Ut,bg as Be,cH as Je,bl as Ci,ap as Si,c0 as _i,cI as Wt,a$ as Oi,a0 as Fe,a2 as Te,q as xi,W as nt,cJ as $i,cK as Ii,cL as Ei,cM as Ti,br as Kt,cN as Mi,cO as ki,aO as Wi,ca as Li,U as Gt,ai as qt,Q as Hi}from"./main-aAIm056l.js";import{u as Ai}from"./enterprise-D8ZxfHL9.js";import{E as Vi,a as Pi,b as Ri}from"./el-scrollbar-CRdGezmP.js";import{i as Ni,u as Xi,E as Yi}from"./upload-x30JhNMy.js";import{e as Bi}from"./strings-oHfTK6PU.js";import{d as zi}from"./debounce-UTQm1j_w.js";import{C as Di}from"./index-siBvlCV6.js";function Fi(e,t,i,o){e.length;for(var a=i+1;a--;)if(t(e[a],a,e))return a;return-1}var Ui="__lodash_hash_undefined__";function Ki(e){return this.__data__.set(e,Ui),this}function Gi(e){return this.__data__.has(e)}function De(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Bs;++t<i;)this.add(e[t])}De.prototype.add=De.prototype.push=Ki;De.prototype.has=Gi;function qi(e,t){for(var i=-1,o=e==null?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}function Qi(e,t){return e.has(t)}var ji=1,Zi=2;function Qt(e,t,i,o,a,n){var s=i&ji,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=n.get(e),h=n.get(t);if(l&&h)return l==t&&h==e;var f=-1,p=!0,v=i&Zi?new De:void 0;for(n.set(e,t),n.set(t,e);++f<u;){var y=e[f],m=t[f];if(o)var _=s?o(m,y,f,t,e,n):o(y,m,f,e,t,n);if(_!==void 0){if(_)continue;p=!1;break}if(v){if(!qi(t,function(C,O){if(!Qi(v,O)&&(y===C||a(y,C,i,o,n)))return v.push(O)})){p=!1;break}}else if(!(y===m||a(y,m,i,o,n))){p=!1;break}}return n.delete(e),n.delete(t),p}function Ji(e){var t=-1,i=Array(e.size);return e.forEach(function(o,a){i[++t]=[a,o]}),i}function eo(e){var t=-1,i=Array(e.size);return e.forEach(function(o){i[++t]=o}),i}var to=1,so=2,io="[object Boolean]",oo="[object Date]",ao="[object Error]",no="[object Map]",lo="[object Number]",ro="[object RegExp]",co="[object Set]",uo="[object String]",ho="[object Symbol]",po="[object ArrayBuffer]",fo="[object DataView]",Lt=_t?_t.prototype:void 0,Qe=Lt?Lt.valueOf:void 0;function mo(e,t,i,o,a,n,s){switch(i){case fo:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case po:return!(e.byteLength!=t.byteLength||!n(new Ot(e),new Ot(t)));case io:case oo:case lo:return zs(+e,+t);case ao:return e.name==t.name&&e.message==t.message;case ro:case uo:return e==t+"";case no:var u=Ji;case co:var c=o&to;if(u||(u=eo),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;o|=so,s.set(e,t);var h=Qt(u(e),u(t),o,a,n,s);return s.delete(e),h;case ho:if(Qe)return Qe.call(e)==Qe.call(t)}return!1}var vo=1,go=Object.prototype,bo=go.hasOwnProperty;function wo(e,t,i,o,a,n){var s=i&vo,u=xt(e),c=u.length,l=xt(t),h=l.length;if(c!=h&&!s)return!1;for(var f=c;f--;){var p=u[f];if(!(s?p in t:bo.call(t,p)))return!1}var v=n.get(e),y=n.get(t);if(v&&y)return v==t&&y==e;var m=!0;n.set(e,t),n.set(t,e);for(var _=s;++f<c;){p=u[f];var C=e[p],O=t[p];if(o)var j=s?o(O,C,p,t,e,n):o(C,O,p,e,t,n);if(!(j===void 0?C===O||a(C,O,i,o,n):j)){m=!1;break}_||(_=p=="constructor")}if(m&&!_){var Z=e.constructor,S=t.constructor;Z!=S&&"constructor"in e&&"constructor"in t&&!(typeof Z=="function"&&Z instanceof Z&&typeof S=="function"&&S instanceof S)&&(m=!1)}return n.delete(e),n.delete(t),m}var yo=1,Ht="[object Arguments]",At="[object Array]",Re="[object Object]",Co=Object.prototype,Vt=Co.hasOwnProperty;function So(e,t,i,o,a,n){var s=je(e),u=je(t),c=s?At:It(e),l=u?At:It(t);c=c==Ht?Re:c,l=l==Ht?Re:l;var h=c==Re,f=l==Re,p=c==l;if(p&&Et(e)){if(!Et(t))return!1;s=!0,h=!1}if(p&&!h)return n||(n=new Ne),s||Ds(e)?Qt(e,t,i,o,a,n):mo(e,t,c,i,o,a,n);if(!(i&yo)){var v=h&&Vt.call(e,"__wrapped__"),y=f&&Vt.call(t,"__wrapped__");if(v||y){var m=v?e.value():e,_=y?t.value():t;return n||(n=new Ne),a(m,_,i,o,n)}}return p?(n||(n=new Ne),wo(e,t,i,o,a,n)):!1}function Ue(e,t,i,o,a){return e===t?!0:e==null||t==null||!Tt(e)&&!Tt(t)?e!==e&&t!==t:So(e,t,i,o,Ue,a)}var _o=1,Oo=2;function xo(e,t,i,o){var a=i.length,n=a;if(e==null)return!n;for(e=Object(e);a--;){var s=i[a];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<n;){s=i[a];var u=s[0],c=e[u],l=s[1];if(s[2]){if(c===void 0&&!(u in e))return!1}else{var h=new Ne,f;if(!(f===void 0?Ue(l,c,_o|Oo,o,h):f))return!1}}return!0}function jt(e){return e===e&&!Fs(e)}function $o(e){for(var t=Us(e),i=t.length;i--;){var o=t[i],a=e[o];t[i]=[o,a,jt(a)]}return t}function Zt(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}function Io(e){var t=$o(e);return t.length==1&&t[0][2]?Zt(t[0][0],t[0][1]):function(i){return i===e||xo(i,e,t)}}var Eo=1,To=2;function Mo(e,t){return Rt(e)&&jt(t)?Zt(Nt(e),t):function(i){var o=ue(i,e);return o===void 0&&o===t?Ks(i,e):Ue(t,o,Eo|To)}}function ko(e){return function(t){return t==null?void 0:t[e]}}function Wo(e){return function(t){return Gs(t,e)}}function Lo(e){return Rt(e)?ko(Nt(e)):Wo(e)}function Ho(e){return typeof e=="function"?e:e==null?qs:typeof e=="object"?je(e)?Mo(e[0],e[1]):Io(e):Lo(e)}function Ao(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var a=o-1;return Fi(e,Ho(t),a)}function xe(e,t){return Ue(e,t)}const et=tt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Qs},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Vo={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},Po=Y({name:"ElTag"}),Ro=Y({...Po,props:et,emits:Vo,setup(e,{emit:t}){const i=e,o=st(),a=he("tag"),n=I(()=>{const{type:l,hit:h,effect:f,closable:p,round:v}=i;return[a.b(),a.is("closable",p),a.m(l||"primary"),a.m(o.value),a.m(f),a.is("hit",h),a.is("round",v)]}),s=l=>{t("close",l)},u=l=>{t("click",l)},c=l=>{var h,f,p;(p=(f=(h=l==null?void 0:l.component)==null?void 0:h.subTree)==null?void 0:f.component)!=null&&p.bum&&(l.component.subTree.component.bum=null)};return(l,h)=>l.disableTransitions?(b(),W("span",{key:0,class:x(w(n)),style:F({backgroundColor:l.color}),onClick:u},[d("span",{class:x(w(a).e("content"))},[N(l.$slots,"default")],2),l.closable?(b(),P(w(ee),{key:0,class:x(w(a).e("close")),onClick:G(s,["stop"])},{default:T(()=>[E(w(Mt))]),_:1},8,["class","onClick"])):V("v-if",!0)],6)):(b(),P(js,{key:1,name:`${w(a).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:c},{default:T(()=>[d("span",{class:x(w(n)),style:F({backgroundColor:l.color}),onClick:u},[d("span",{class:x(w(a).e("content"))},[N(l.$slots,"default")],2),l.closable?(b(),P(w(ee),{key:0,class:x(w(a).e("close")),onClick:G(s,["stop"])},{default:T(()=>[E(w(Mt))]),_:1},8,["class","onClick"])):V("v-if",!0)],6)]),_:3},8,["name"]))}});var No=ge(Ro,[["__file","tag.vue"]]);const Xo=it(No);function Yo(){const e=Zs(),t=A(0),i=11,o=I(()=>({minWidth:`${Math.max(t.value,i)}px`}));return ce(e,()=>{var n,s;t.value=(s=(n=e.value)==null?void 0:n.getBoundingClientRect().width)!=null?s:0}),{calculatorRef:e,calculatorWidth:t,inputStyle:o}}const Jt=Symbol("ElSelectGroup"),Ke=Symbol("ElSelect");function Bo(e,t){const i=ze(Ke),o=ze(Jt,{disabled:!1}),a=I(()=>h(ne(i.props.modelValue),e.value)),n=I(()=>{var v;if(i.props.multiple){const y=ne((v=i.props.modelValue)!=null?v:[]);return!a.value&&y.length>=i.props.multipleLimit&&i.props.multipleLimit>0}else return!1}),s=I(()=>e.label||(me(e.value)?"":e.value)),u=I(()=>e.value||e.label||""),c=I(()=>e.disabled||t.groupDisabled||n.value),l=ot(),h=(v=[],y)=>{if(me(e.value)){const m=i.props.valueKey;return v&&v.some(_=>Js(ue(_,m))===ue(y,m))}else return v&&v.includes(y)},f=()=>{!e.disabled&&!o.disabled&&(i.states.hoveringIndex=i.optionsArray.indexOf(l.proxy))},p=v=>{const y=new RegExp(Bi(v),"i");t.visible=y.test(s.value)||e.created};return te(()=>s.value,()=>{!e.created&&!i.props.remote&&i.setSelected()}),te(()=>e.value,(v,y)=>{const{remote:m,valueKey:_}=i.props;if((m?v!==y:!xe(v,y))&&(i.onOptionDestroy(y,l.proxy),i.onOptionCreate(l.proxy)),!e.created&&!m){if(_&&me(v)&&me(y)&&v[_]===y[_])return;i.setSelected()}}),te(()=>o.disabled,()=>{t.groupDisabled=o.disabled},{immediate:!0}),{select:i,currentLabel:s,currentValue:u,itemSelected:a,isDisabled:c,hoverItem:f,updateOption:p}}const zo=Y({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=he("select"),i=Xt(),o=I(()=>[t.be("dropdown","item"),t.is("disabled",w(u)),t.is("selected",w(s)),t.is("hovering",w(p))]),a=oe({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:n,itemSelected:s,isDisabled:u,select:c,hoverItem:l,updateOption:h}=Bo(e,a),{visible:f,hover:p}=at(a),v=ot().proxy;c.onOptionCreate(v),ei(()=>{const m=v.value,{selected:_}=c.states,C=_.some(O=>O.value===v.value);J(()=>{c.states.cachedOptions.get(m)===v&&!C&&c.states.cachedOptions.delete(m)}),c.onOptionDestroy(m,v)});function y(){u.value||c.handleOptionSelect(v)}return{ns:t,id:i,containerKls:o,currentLabel:n,itemSelected:s,isDisabled:u,select:c,hoverItem:l,updateOption:h,visible:f,hover:p,selectOptionClick:y,states:a}}});function Do(e,t,i,o,a,n){return q((b(),W("li",{id:e.id,class:x(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:G(e.selectOptionClick,["stop"])},[N(e.$slots,"default",{},()=>[d("span",null,$(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[$e,e.visible]])}var lt=ge(zo,[["render",Do],["__file","option.vue"]]);const Fo=Y({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=ze(Ke),t=he("select"),i=I(()=>e.props.popperClass),o=I(()=>e.props.multiple),a=I(()=>e.props.fitInputWidth),n=A("");function s(){var u;n.value=`${(u=e.selectRef)==null?void 0:u.offsetWidth}px`}return be(()=>{s(),ce(e.selectRef,s)}),{ns:t,minWidth:n,popperClass:i,isMultiple:o,isFitInputWidth:a}}});function Uo(e,t,i,o,a,n){return b(),W("div",{class:x([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:F({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(b(),W("div",{key:0,class:x(e.ns.be("dropdown","header"))},[N(e.$slots,"header")],2)):V("v-if",!0),N(e.$slots,"default"),e.$slots.footer?(b(),W("div",{key:1,class:x(e.ns.be("dropdown","footer"))},[N(e.$slots,"footer")],2)):V("v-if",!0)],6)}var Ko=ge(Fo,[["render",Uo],["__file","select-dropdown.vue"]]);const Go=(e,t)=>{const{t:i}=ti(),o=Xt(),a=he("select"),n=he("input"),s=oe({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),u=A(null),c=A(null),l=A(null),h=A(null),f=A(null),p=A(null),v=A(null),y=A(null),m=A(null),_=A(null),C=A(null),{isComposing:O,handleCompositionStart:j,handleCompositionUpdate:Z,handleCompositionEnd:S}=si({afterComposition:r=>vt(r)}),{wrapperRef:X,isFocused:L,handleBlur:H}=ii(f,{beforeFocus(){return we.value},afterFocus(){e.automaticDropdown&&!M.value&&(M.value=!0,s.menuVisibleOnFocus=!0)},beforeBlur(r){var g,k;return((g=l.value)==null?void 0:g.isFocusInsideContent(r))||((k=h.value)==null?void 0:k.isFocusInsideContent(r))},afterBlur(){M.value=!1,s.menuVisibleOnFocus=!1}}),M=A(!1),B=A(),{form:se,formItem:z}=Yt(),{inputId:Me}=Bt(e,{formItemContext:z}),{valueOnClear:is,isEmptyValue:os}=oi(e),we=I(()=>e.disabled||(se==null?void 0:se.disabled)),Ge=I(()=>re(e.modelValue)?e.modelValue.length>0:!os(e.modelValue)),as=I(()=>{var r;return(r=se==null?void 0:se.statusIcon)!=null?r:!1}),ns=I(()=>e.clearable&&!we.value&&s.inputHovering&&Ge.value),rt=I(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),ls=I(()=>a.is("reverse",rt.value&&M.value)),ct=I(()=>(z==null?void 0:z.validateState)||""),rs=I(()=>ai[ct.value]),cs=I(()=>e.remote?300:0),us=I(()=>e.remote&&!s.inputValue&&s.options.size===0),hs=I(()=>e.loading?e.loadingText||i("el.select.loading"):e.filterable&&s.inputValue&&s.options.size>0&&ye.value===0?e.noMatchText||i("el.select.noMatch"):s.options.size===0?e.noDataText||i("el.select.noData"):null),ye=I(()=>U.value.filter(r=>r.visible).length),U=I(()=>{const r=Array.from(s.options.values()),g=[];return s.optionValues.forEach(k=>{const R=r.findIndex(K=>K.value===k);R>-1&&g.push(r[R])}),g.length>=r.length?g:r}),ds=I(()=>Array.from(s.cachedOptions.values())),ps=I(()=>{const r=U.value.filter(g=>!g.created).some(g=>g.currentLabel===s.inputValue);return e.filterable&&e.allowCreate&&s.inputValue!==""&&!r}),ut=()=>{e.filterable&&_e(e.filterMethod)||e.filterable&&e.remote&&_e(e.remoteMethod)||U.value.forEach(r=>{var g;(g=r.updateOption)==null||g.call(r,s.inputValue)})},ht=st(),fs=I(()=>["small"].includes(ht.value)?"small":"default"),ms=I({get(){return M.value&&!us.value},set(r){M.value=r}}),vs=I(()=>{if(e.multiple&&!Pe(e.modelValue))return ne(e.modelValue).length===0&&!s.inputValue;const r=re(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||Pe(r)?!s.inputValue:!0}),gs=I(()=>{var r;const g=(r=e.placeholder)!=null?r:i("el.select.placeholder");return e.multiple||!Ge.value?g:s.selectedLabel}),bs=I(()=>kt?null:"mouseenter");te(()=>e.modelValue,(r,g)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(s.inputValue="",ke("")),We(),!xe(r,g)&&e.validateEvent&&(z==null||z.validate("change").catch(k=>zt()))},{flush:"post",deep:!0}),te(()=>M.value,r=>{r?ke(s.inputValue):(s.inputValue="",s.previousQuery=null,s.isBeforeHide=!0),t("visible-change",r)}),te(()=>s.options.entries(),()=>{ni&&(We(),e.defaultFirstOption&&(e.filterable||e.remote)&&ye.value&&dt())},{flush:"post"}),te(()=>s.hoveringIndex,r=>{Xe(r)&&r>-1?B.value=U.value[r]||{}:B.value={},U.value.forEach(g=>{g.hover=B.value===g})}),li(()=>{s.isBeforeHide||ut()});const ke=r=>{s.previousQuery===r||O.value||(s.previousQuery=r,e.filterable&&_e(e.filterMethod)?e.filterMethod(r):e.filterable&&e.remote&&_e(e.remoteMethod)&&e.remoteMethod(r),e.defaultFirstOption&&(e.filterable||e.remote)&&ye.value?J(dt):J(ws))},dt=()=>{const r=U.value.filter(K=>K.visible&&!K.disabled&&!K.states.groupDisabled),g=r.find(K=>K.created),k=r[0],R=U.value.map(K=>K.value);s.hoveringIndex=yt(R,g||k)},We=()=>{if(e.multiple)s.selectedLabel="";else{const g=re(e.modelValue)?e.modelValue[0]:e.modelValue,k=pt(g);s.selectedLabel=k.currentLabel,s.selected=[k];return}const r=[];Pe(e.modelValue)||ne(e.modelValue).forEach(g=>{r.push(pt(g))}),s.selected=r},pt=r=>{let g;const k=ri(r);for(let pe=s.cachedOptions.size-1;pe>=0;pe--){const ae=ds.value[pe];if(k?ue(ae.value,e.valueKey)===ue(r,e.valueKey):ae.value===r){g={value:r,currentLabel:ae.currentLabel,get isDisabled(){return ae.isDisabled}};break}}if(g)return g;const R=k?r.label:r??"";return{value:r,currentLabel:R}},ws=()=>{s.hoveringIndex=U.value.findIndex(r=>s.selected.some(g=>Ae(g)===Ae(r)))},ys=()=>{s.selectionWidth=c.value.getBoundingClientRect().width},Cs=()=>{s.collapseItemWidth=_.value.getBoundingClientRect().width},qe=()=>{var r,g;(g=(r=l.value)==null?void 0:r.updatePopper)==null||g.call(r)},ft=()=>{var r,g;(g=(r=h.value)==null?void 0:r.updatePopper)==null||g.call(r)},mt=()=>{s.inputValue.length>0&&!M.value&&(M.value=!0),ke(s.inputValue)},vt=r=>{if(s.inputValue=r.target.value,e.remote)gt();else return mt()},gt=zi(()=>{mt()},cs.value),Ce=r=>{xe(e.modelValue,r)||t(Ie,r)},Ss=r=>Ao(r,g=>{const k=s.cachedOptions.get(g);return k&&!k.disabled&&!k.states.groupDisabled}),_s=r=>{if(e.multiple&&r.code!==ui.delete&&r.target.value.length<=0){const g=ne(e.modelValue).slice(),k=Ss(g);if(k<0)return;const R=g[k];g.splice(k,1),t(ie,g),Ce(g),t("remove-tag",R)}},Os=(r,g)=>{const k=s.selected.indexOf(g);if(k>-1&&!we.value){const R=ne(e.modelValue).slice();R.splice(k,1),t(ie,R),Ce(R),t("remove-tag",g.value)}r.stopPropagation(),He()},bt=r=>{r.stopPropagation();const g=e.multiple?[]:is.value;if(e.multiple)for(const k of s.selected)k.isDisabled&&g.push(k.value);t(ie,g),Ce(g),s.hoveringIndex=-1,M.value=!1,t("clear"),He()},wt=r=>{var g;if(e.multiple){const k=ne((g=e.modelValue)!=null?g:[]).slice(),R=yt(k,r);R>-1?k.splice(R,1):(e.multipleLimit<=0||k.length<e.multipleLimit)&&k.push(r.value),t(ie,k),Ce(k),r.created&&ke(""),e.filterable&&!e.reserveKeyword&&(s.inputValue="")}else t(ie,r.value),Ce(r.value),M.value=!1;He(),!M.value&&J(()=>{Le(r)})},yt=(r=[],g)=>Pe(g)?-1:me(g.value)?r.findIndex(k=>xe(ue(k,e.valueKey),Ae(g))):r.indexOf(g.value),Le=r=>{var g,k,R,K,pe;const ae=re(r)?r[0]:r;let Ve=null;if(ae!=null&&ae.value){const Se=U.value.filter(Ys=>Ys.value===ae.value);Se.length>0&&(Ve=Se[0].$el)}if(l.value&&Ve){const Se=(K=(R=(k=(g=l.value)==null?void 0:g.popperRef)==null?void 0:k.contentRef)==null?void 0:R.querySelector)==null?void 0:K.call(R,`.${a.be("dropdown","wrap")}`);Se&&ci(Se,Ve)}(pe=C.value)==null||pe.handleScroll()},xs=r=>{s.options.set(r.value,r),s.cachedOptions.set(r.value,r)},$s=(r,g)=>{s.options.get(r)===g&&s.options.delete(r)},Is=I(()=>{var r,g;return(g=(r=l.value)==null?void 0:r.popperRef)==null?void 0:g.contentRef}),Es=()=>{s.isBeforeHide=!1,J(()=>{var r;(r=C.value)==null||r.update(),Le(s.selected)})},He=()=>{var r;(r=f.value)==null||r.focus()},Ts=()=>{var r;if(M.value){M.value=!1,J(()=>{var g;return(g=f.value)==null?void 0:g.blur()});return}(r=f.value)==null||r.blur()},Ms=r=>{bt(r)},ks=r=>{if(M.value=!1,L.value){const g=new FocusEvent("focus",r);J(()=>H(g))}},Ws=()=>{s.inputValue.length>0?s.inputValue="":M.value=!1},Ct=()=>{we.value||(kt&&(s.inputHovering=!0),s.menuVisibleOnFocus?s.menuVisibleOnFocus=!1:M.value=!M.value)},Ls=()=>{if(!M.value)Ct();else{const r=U.value[s.hoveringIndex];r&&!r.isDisabled&&wt(r)}},Ae=r=>me(r.value)?ue(r.value,e.valueKey):r.value,Hs=I(()=>U.value.filter(r=>r.visible).every(r=>r.isDisabled)),As=I(()=>e.multiple?e.collapseTags?s.selected.slice(0,e.maxCollapseTags):s.selected:[]),Vs=I(()=>e.multiple?e.collapseTags?s.selected.slice(e.maxCollapseTags):[]:[]),St=r=>{if(!M.value){M.value=!0;return}if(!(s.options.size===0||ye.value===0||O.value)&&!Hs.value){r==="next"?(s.hoveringIndex++,s.hoveringIndex===s.options.size&&(s.hoveringIndex=0)):r==="prev"&&(s.hoveringIndex--,s.hoveringIndex<0&&(s.hoveringIndex=s.options.size-1));const g=U.value[s.hoveringIndex];(g.isDisabled||!g.visible)&&St(r),J(()=>Le(B.value))}},Ps=()=>{if(!c.value)return 0;const r=window.getComputedStyle(c.value);return Number.parseFloat(r.gap||"6px")},Rs=I(()=>{const r=Ps();return{maxWidth:`${_.value&&e.maxCollapseTags===1?s.selectionWidth-s.collapseItemWidth-r:s.selectionWidth}px`}}),Ns=I(()=>({maxWidth:`${s.selectionWidth}px`})),Xs=r=>{t("popup-scroll",r)};return ce(c,ys),ce(y,qe),ce(X,qe),ce(m,ft),ce(_,Cs),be(()=>{We()}),{inputId:Me,contentId:o,nsSelect:a,nsInput:n,states:s,isFocused:L,expanded:M,optionsArray:U,hoverOption:B,selectSize:ht,filteredOptionsCount:ye,updateTooltip:qe,updateTagTooltip:ft,debouncedOnInputChange:gt,onInput:vt,deletePrevTag:_s,deleteTag:Os,deleteSelected:bt,handleOptionSelect:wt,scrollToOption:Le,hasModelValue:Ge,shouldShowPlaceholder:vs,currentPlaceholder:gs,mouseEnterEventName:bs,needStatusIcon:as,showClose:ns,iconComponent:rt,iconReverse:ls,validateState:ct,validateIcon:rs,showNewOption:ps,updateOptions:ut,collapseTagSize:fs,setSelected:We,selectDisabled:we,emptyText:hs,handleCompositionStart:j,handleCompositionUpdate:Z,handleCompositionEnd:S,onOptionCreate:xs,onOptionDestroy:$s,handleMenuEnter:Es,focus:He,blur:Ts,handleClearClick:Ms,handleClickOutside:ks,handleEsc:Ws,toggleMenu:Ct,selectOption:Ls,getValueKey:Ae,navigateOptions:St,dropdownMenuVisible:ms,showTagList:As,collapseTagList:Vs,popupScroll:Xs,tagStyle:Rs,collapseTagStyle:Ns,popperRef:Is,inputRef:f,tooltipRef:l,tagTooltipRef:h,prefixRef:p,suffixRef:v,selectRef:u,wrapperRef:X,selectionRef:c,scrollbarRef:C,menuRef:y,tagMenuRef:m,collapseItemRef:_}};var qo=Y({name:"ElOptions",setup(e,{slots:t}){const i=ze(Ke);let o=[];return()=>{var a,n;const s=(a=t.default)==null?void 0:a.call(t),u=[];function c(l){re(l)&&l.forEach(h=>{var f,p,v,y;const m=(f=(h==null?void 0:h.type)||{})==null?void 0:f.name;m==="ElOptionGroup"?c(!Ye(h.children)&&!re(h.children)&&_e((p=h.children)==null?void 0:p.default)?(v=h.children)==null?void 0:v.default():h.children):m==="ElOption"?u.push((y=h.props)==null?void 0:y.value):re(h.children)&&c(h.children)})}return s.length&&c((n=s[0])==null?void 0:n.children),xe(u,o)||(o=u,i&&(i.states.optionValues=u)),s}}});const Qo=tt({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:vi,effect:{type:Oe(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Oe(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:mi.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:ve,default:fi},fitInputWidth:Boolean,suffixIcon:{type:ve,default:pi},tagType:{...et.type,default:"info"},tagEffect:{...et.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Oe(String),values:di,default:"bottom-start"},fallbackPlacements:{type:Oe(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...hi,...Dt(["ariaLabel"])}),Pt="ElSelect",jo=Y({name:Pt,componentName:Pt,components:{ElSelectMenu:Ko,ElOption:lt,ElOptions:qo,ElTag:Xo,ElScrollbar:Vi,ElTooltip:wi,ElIcon:ee},directives:{ClickOutside:Di},props:Qo,emits:[ie,Ie,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(e,{emit:t}){const i=I(()=>{const{modelValue:c,multiple:l}=e,h=l?[]:void 0;return re(c)?l?c:h:l?h:c}),o=oe({...at(e),modelValue:i}),a=Go(o,t),{calculatorRef:n,inputStyle:s}=Yo();Ft(Ke,oe({props:o,states:a.states,optionsArray:a.optionsArray,handleOptionSelect:a.handleOptionSelect,onOptionCreate:a.onOptionCreate,onOptionDestroy:a.onOptionDestroy,selectRef:a.selectRef,setSelected:a.setSelected}));const u=I(()=>e.multiple?a.states.selected.map(c=>c.currentLabel):a.states.selectedLabel);return{...a,modelValue:i,selectedLabel:u,calculatorRef:n,inputStyle:s}}});function Zo(e,t,i,o,a,n){const s=Q("el-tag"),u=Q("el-tooltip"),c=Q("el-icon"),l=Q("el-option"),h=Q("el-options"),f=Q("el-scrollbar"),p=Q("el-select-menu"),v=Ee("click-outside");return q((b(),W("div",{ref:"selectRef",class:x([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[bi(e.mouseEnterEventName)]:y=>e.states.inputHovering=!0,onMouseleave:y=>e.states.inputHovering=!1},[E(u,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:y=>e.states.isBeforeHide=!1},{default:T(()=>{var y;return[d("div",{ref:"wrapperRef",class:x([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:G(e.toggleMenu,["prevent"])},[e.$slots.prefix?(b(),W("div",{key:0,ref:"prefixRef",class:x(e.nsSelect.e("prefix"))},[N(e.$slots,"prefix")],2)):V("v-if",!0),d("div",{ref:"selectionRef",class:x([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?N(e.$slots,"tag",{key:0},()=>[(b(!0),W(de,null,Ze(e.showTagList,m=>(b(),W("div",{key:e.getValueKey(m),class:x(e.nsSelect.e("selected-item"))},[E(s,{closable:!e.selectDisabled&&!m.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:F(e.tagStyle),onClose:_=>e.deleteTag(_,m)},{default:T(()=>[d("span",{class:x(e.nsSelect.e("tags-text"))},[N(e.$slots,"label",{label:m.currentLabel,value:m.value},()=>[D($(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(b(),P(u,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:T(()=>[d("div",{ref:"collapseItemRef",class:x(e.nsSelect.e("selected-item"))},[E(s,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:F(e.collapseTagStyle)},{default:T(()=>[d("span",{class:x(e.nsSelect.e("tags-text"))}," + "+$(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:T(()=>[d("div",{ref:"tagMenuRef",class:x(e.nsSelect.e("selection"))},[(b(!0),W(de,null,Ze(e.collapseTagList,m=>(b(),W("div",{key:e.getValueKey(m),class:x(e.nsSelect.e("selected-item"))},[E(s,{class:"in-tooltip",closable:!e.selectDisabled&&!m.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:_=>e.deleteTag(_,m)},{default:T(()=>[d("span",{class:x(e.nsSelect.e("tags-text"))},[N(e.$slots,"label",{label:m.currentLabel,value:m.value},()=>[D($(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):V("v-if",!0)]):V("v-if",!0),d("div",{class:x([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[q(d("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":m=>e.states.inputValue=m,type:"text",name:e.name,class:x([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:F(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((y=e.hoverOption)==null?void 0:y.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[fe(G(m=>e.navigateOptions("next"),["stop","prevent"]),["down"]),fe(G(m=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),fe(G(e.handleEsc,["stop","prevent"]),["esc"]),fe(G(e.selectOption,["stop","prevent"]),["enter"]),fe(G(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:G(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[gi,e.states.inputValue]]),e.filterable?(b(),W("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:x(e.nsSelect.e("input-calculator")),textContent:$(e.states.inputValue)},null,10,["textContent"])):V("v-if",!0)],2),e.shouldShowPlaceholder?(b(),W("div",{key:1,class:x([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?N(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[d("span",null,$(e.currentPlaceholder),1)]):(b(),W("span",{key:1},$(e.currentPlaceholder),1))],2)):V("v-if",!0)],2),d("div",{ref:"suffixRef",class:x(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(b(),P(c,{key:0,class:x([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:T(()=>[(b(),P(le(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),e.showClose&&e.clearIcon?(b(),P(c,{key:1,class:x([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:T(()=>[(b(),P(le(e.clearIcon)))]),_:1},8,["class","onClick"])):V("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(b(),P(c,{key:2,class:x([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:T(()=>[(b(),P(le(e.validateIcon)))]),_:1},8,["class"])):V("v-if",!0)],2)],10,["onClick"])]}),content:T(()=>[E(p,{ref:"menuRef"},{default:T(()=>[e.$slots.header?(b(),W("div",{key:0,class:x(e.nsSelect.be("dropdown","header")),onClick:G(()=>{},["stop"])},[N(e.$slots,"header")],10,["onClick"])):V("v-if",!0),q(E(f,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:x([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical",onScroll:e.popupScroll},{default:T(()=>[e.showNewOption?(b(),P(l,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):V("v-if",!0),E(h,null,{default:T(()=>[N(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[$e,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(b(),W("div",{key:1,class:x(e.nsSelect.be("dropdown","loading"))},[N(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(b(),W("div",{key:2,class:x(e.nsSelect.be("dropdown","empty"))},[N(e.$slots,"empty",{},()=>[d("span",null,$(e.emptyText),1)])],2)):V("v-if",!0),e.$slots.footer?(b(),W("div",{key:3,class:x(e.nsSelect.be("dropdown","footer")),onClick:G(()=>{},["stop"])},[N(e.$slots,"footer")],10,["onClick"])):V("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[v,e.handleClickOutside,e.popperRef]])}var Jo=ge(jo,[["render",Zo],["__file","select.vue"]]);const ea=Y({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=he("select"),i=A(null),o=ot(),a=A([]);Ft(Jt,oe({...at(e)}));const n=I(()=>a.value.some(l=>l.visible===!0)),s=l=>{var h,f;return((h=l.type)==null?void 0:h.name)==="ElOption"&&!!((f=l.component)!=null&&f.proxy)},u=l=>{const h=ne(l),f=[];return h.forEach(p=>{var v,y;s(p)?f.push(p.component.proxy):(v=p.children)!=null&&v.length?f.push(...u(p.children)):(y=p.component)!=null&&y.subTree&&f.push(...u(p.component.subTree))}),f},c=()=>{a.value=u(o.subTree)};return be(()=>{c()}),yi(i,c,{attributes:!0,subtree:!0,childList:!0}),{groupRef:i,visible:n,ns:t}}});function ta(e,t,i,o,a,n){return q((b(),W("ul",{ref:"groupRef",class:x(e.ns.be("group","wrap"))},[d("li",{class:x(e.ns.be("group","title"))},$(e.label),3),d("li",null,[d("ul",{class:x(e.ns.b("group"))},[N(e.$slots,"default")],2)])],2)),[[$e,e.visible]])}var es=ge(ea,[["render",ta],["__file","option-group.vue"]]);const sa=it(Jo,{Option:lt,OptionGroup:es}),ia=Ut(lt);Ut(es);const oa=tt({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Ni},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:ve},activeActionIcon:{type:ve},activeIcon:{type:ve},inactiveIcon:{type:ve},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Oe(Function)},id:String,tabindex:{type:[String,Number]},...Dt(["ariaLabel"])}),aa={[ie]:e=>Be(e)||Ye(e)||Xe(e),[Ie]:e=>Be(e)||Ye(e)||Xe(e),[Je]:e=>Be(e)||Ye(e)||Xe(e)},ts="ElSwitch",na=Y({name:ts}),la=Y({...na,props:oa,emits:aa,setup(e,{expose:t,emit:i}){const o=e,{formItem:a}=Yt(),n=st(),s=he("switch"),{inputId:u}=Bt(o,{formItemContext:a}),c=Ci(I(()=>o.loading)),l=A(o.modelValue!==!1),h=A(),f=A(),p=I(()=>[s.b(),s.m(n.value),s.is("disabled",c.value),s.is("checked",C.value)]),v=I(()=>[s.e("label"),s.em("label","left"),s.is("active",!C.value)]),y=I(()=>[s.e("label"),s.em("label","right"),s.is("active",C.value)]),m=I(()=>({width:Si(o.width)}));te(()=>o.modelValue,()=>{l.value=!0});const _=I(()=>l.value?o.modelValue:!1),C=I(()=>_.value===o.activeValue);[o.activeValue,o.inactiveValue].includes(_.value)||(i(ie,o.inactiveValue),i(Ie,o.inactiveValue),i(Je,o.inactiveValue)),te(C,S=>{var X;h.value.checked=S,o.validateEvent&&((X=a==null?void 0:a.validate)==null||X.call(a,"change").catch(L=>zt()))});const O=()=>{const S=C.value?o.inactiveValue:o.activeValue;i(ie,S),i(Ie,S),i(Je,S),J(()=>{h.value.checked=C.value})},j=()=>{if(c.value)return;const{beforeChange:S}=o;if(!S){O();return}const X=S();[Wt(X),Be(X)].includes(!0)||Oi(ts,"beforeChange must return type `Promise<boolean>` or `boolean`"),Wt(X)?X.then(H=>{H&&O()}).catch(H=>{}):X&&O()},Z=()=>{var S,X;(X=(S=h.value)==null?void 0:S.focus)==null||X.call(S)};return be(()=>{h.value.checked=C.value}),t({focus:Z,checked:C}),(S,X)=>(b(),W("div",{class:x(w(p)),onClick:G(j,["prevent"])},[d("input",{id:w(u),ref_key:"input",ref:h,class:x(w(s).e("input")),type:"checkbox",role:"switch","aria-checked":w(C),"aria-disabled":w(c),"aria-label":S.ariaLabel,name:S.name,"true-value":S.activeValue,"false-value":S.inactiveValue,disabled:w(c),tabindex:S.tabindex,onChange:O,onKeydown:fe(j,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!S.inlinePrompt&&(S.inactiveIcon||S.inactiveText)?(b(),W("span",{key:0,class:x(w(v))},[S.inactiveIcon?(b(),P(w(ee),{key:0},{default:T(()=>[(b(),P(le(S.inactiveIcon)))]),_:1})):V("v-if",!0),!S.inactiveIcon&&S.inactiveText?(b(),W("span",{key:1,"aria-hidden":w(C)},$(S.inactiveText),9,["aria-hidden"])):V("v-if",!0)],2)):V("v-if",!0),d("span",{ref_key:"core",ref:f,class:x(w(s).e("core")),style:F(w(m))},[S.inlinePrompt?(b(),W("div",{key:0,class:x(w(s).e("inner"))},[S.activeIcon||S.inactiveIcon?(b(),P(w(ee),{key:0,class:x(w(s).is("icon"))},{default:T(()=>[(b(),P(le(w(C)?S.activeIcon:S.inactiveIcon)))]),_:1},8,["class"])):S.activeText||S.inactiveText?(b(),W("span",{key:1,class:x(w(s).is("text")),"aria-hidden":!w(C)},$(w(C)?S.activeText:S.inactiveText),11,["aria-hidden"])):V("v-if",!0)],2)):V("v-if",!0),d("div",{class:x(w(s).e("action"))},[S.loading?(b(),P(w(ee),{key:0,class:x(w(s).is("loading"))},{default:T(()=>[E(w(_i))]),_:1},8,["class"])):w(C)?N(S.$slots,"active-action",{key:1},()=>[S.activeActionIcon?(b(),P(w(ee),{key:0},{default:T(()=>[(b(),P(le(S.activeActionIcon)))]),_:1})):V("v-if",!0)]):w(C)?V("v-if",!0):N(S.$slots,"inactive-action",{key:2},()=>[S.inactiveActionIcon?(b(),P(w(ee),{key:0},{default:T(()=>[(b(),P(le(S.inactiveActionIcon)))]),_:1})):V("v-if",!0)])],2)],6),!S.inlinePrompt&&(S.activeIcon||S.activeText)?(b(),W("span",{key:1,class:x(w(y))},[S.activeIcon?(b(),P(w(ee),{key:0},{default:T(()=>[(b(),P(le(S.activeIcon)))]),_:1})):V("v-if",!0),!S.activeIcon&&S.activeText?(b(),W("span",{key:1,"aria-hidden":!w(C)},$(S.activeText),9,["aria-hidden"])):V("v-if",!0)],2)):V("v-if",!0)],10,["onClick"]))}});var ra=ge(la,[["__file","switch.vue"]]);const ca=it(ra),ua={class:"border h-[310px] rounded-md flex-center flex-col gap-3"},ha={class:"text-sm text-[#9A9A9A]"},da=Y({__name:"about",setup(e){const t=A(""),i=()=>{window.$chat53ai.$updater({type:"check"}).then(o=>{o||Te.success(window.$t("updater.noUpdate"))})};return be(()=>{window.$chat53ai.$updater({type:"version"}).then(o=>{t.value=o})}),(o,a)=>{const n=Fe;return b(),W("div",ua,[a[0]||(a[0]=d("img",{class:"w-[68px]",src:"https://chat.53ai.com/images/logo-square.png",alt:""},null,-1)),a[1]||(a[1]=d("h2",{class:"text-base text-[#1D1E1F]"},"53AI 魔法菜单",-1)),d("p",ha,$(o.$t("updater.currentVersion",{version:t.value})),1),E(n,{type:"primary",onClick:i},{default:T(()=>[D($(o.$t("updater.checkUpdate")),1)]),_:1})])}}}),pa=xi("browser-setting",{state:()=>({toolbar_enabled:!0,toolbar_menus:[{name:"生成Q&A",value:"answer"},{name:"网页问答",value:"parser"},{name:"内容总结",value:"sum"},{name:"网页翻译",value:"translate"}],glider_enabled:!1,glider_type:"immidate",glider_menus:[{name:"解析",value:"parser"},{name:"问答",value:"answer"},{name:"总结",value:"sum"},{name:"翻译",value:"translate"}],boot_up_enabled:!1,default_browser_enabled:!1,default_search_url:"https://chat.baidu.com/search?word=_word_",default_tab_url:""}),getters:{},actions:{}}),fa={class:"h-10 flex items-center justify-between px-4 border rounded-md"},ma={class:"h-10 flex items-center justify-between px-4 border rounded-md mt-2"},va=Y({__name:"common",setup(e){const t=pa();return(i,o)=>{const a=ca,n=ia,s=sa,u=nt;return b(),W(de,null,[o[6]||(o[6]=d("div",{class:"flex items-center justify-between pb-3"},[d("div",{class:"text-[#1D1E1F] text-sm font-semibold"},"通用设置")],-1)),d("div",fa,[o[4]||(o[4]=d("div",{class:"text-sm text-[#1D1E1F]"},"开机自动启动",-1)),E(a,{modelValue:w(t).boot_up_enabled,"onUpdate:modelValue":o[0]||(o[0]=c=>w(t).boot_up_enabled=c)},null,8,["modelValue"])]),d("div",ma,[o[5]||(o[5]=d("div",{class:"text-sm text-[#1D1E1F]"},"设置为默认浏览器",-1)),E(a,{modelValue:w(t).default_browser_enabled,"onUpdate:modelValue":o[1]||(o[1]=c=>w(t).default_browser_enabled=c)},null,8,["modelValue"])]),o[7]||(o[7]=d("div",{class:"flex items-center justify-between py-3 mt-2"},[d("div",{class:"text-[#1D1E1F] text-sm font-semibold"},"默认搜索引擎")],-1)),E(s,{modelValue:w(t).default_search_url,"onUpdate:modelValue":o[2]||(o[2]=c=>w(t).default_search_url=c),size:"large"},{default:T(()=>[E(n,{label:"百度",value:"https://www.baidu.com/s?wd=_word_"}),E(n,{label:"百度AI",value:"https://chat.baidu.com/search?word=_word_"})]),_:1},8,["modelValue"]),o[8]||(o[8]=d("div",{class:"flex items-center justify-between py-3 mt-2"},[d("div",{class:"text-[#1D1E1F] text-sm font-semibold"},"新标签页设置")],-1)),E(u,{size:"large",modelValue:w(t).default_tab_url,"onUpdate:modelValue":o[3]||(o[3]=c=>w(t).default_tab_url=c),placeholder:"请填写新标签页url"},null,8,["modelValue"])],64)}}}),ga=Y({__name:"password",setup(e){const t=A(null),i=oe({newPassword:"",confirmPassword:""}),o=oe({newPassword:[$i()],confirmPassword:[{required:!0,message:window.$t("form.input_placeholder")+window.$t("form.new_password_confirm"),trigger:"blur"},{validator:(n,s,u)=>{s!==i.newPassword?u(new Error(window.$t("form.password_not_match"))):u()},trigger:"blur"}]}),a=()=>t.value.validate().then(async n=>{n&&(console.log("valid"),await Ti.updatePassword({new_password:i.newPassword,confirm_password:i.confirmPassword}).then(()=>{Te.success(window.$t("status.success"))}))});return(n,s)=>{const u=Ri,c=Pi,l=Ii,h=nt,f=Fe,p=Ei,v=Ee("trim"),y=Ee("debounce");return b(),W(de,null,[E(p,{ref_key:"formRef",ref:t,"label-position":"top",model:i,rules:o},{default:T(()=>[V("",!0),E(l,{label:n.$t("form.new_password"),prop:"newPassword"},{default:T(()=>[q(E(h,{modelValue:i.newPassword,"onUpdate:modelValue":s[0]||(s[0]=m=>i.newPassword=m),type:"password",size:"large","show-password":"",clearable:""},null,8,["modelValue"]),[[v]])]),_:1},8,["label"]),E(l,{label:n.$t("form.new_password_confirm"),prop:"confirmPassword"},{default:T(()=>[q(E(h,{modelValue:i.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=m=>i.confirmPassword=m),type:"password",size:"large","show-password":"",clearable:""},null,8,["modelValue"]),[[v]])]),_:1},8,["label"])]),_:1},8,["model","rules"]),q((b(),P(f,{type:"primary",class:"mt-5",size:"large",onClick:a},{default:T(()=>[D($(n.$t("action.save")),1)]),_:1})),[[y]])],64)}}}),ss={};ss.getData=e=>new Promise((t,i)=>{let o={};ba(e).then(a=>{o.arrayBuffer=a;try{o.orientation=Sa(a)}catch{o.orientation=-1}t(o)}).catch(a=>{i(a)})});function ba(e){let t=null;return new Promise((i,o)=>{if(e.src)if(/^data\:/i.test(e.src))t=ya(e.src),i(t);else if(/^blob\:/i.test(e.src)){var a=new FileReader;a.onload=function(s){t=s.target.result,i(t)},wa(e.src,function(s){a.readAsArrayBuffer(s)})}else{var n=new XMLHttpRequest;n.onload=function(){if(this.status==200||this.status===0)t=n.response,i(t);else throw"Could not load image";n=null},n.open("GET",e.src,!0),n.responseType="arraybuffer",n.send(null)}else o("img error")})}function wa(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(o){(this.status==200||this.status===0)&&t(this.response)},i.send()}function ya(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var i=atob(e),o=i.length%2==0?i.length:i.length+1,a=new ArrayBuffer(o),n=new Uint16Array(a),s=0;s<o;s++)n[s]=i.charCodeAt(s);return a}function Ca(e,t,i){var o="",a;for(a=t,i+=t;a<i;a++)o+=String.fromCharCode(e.getUint8(a));return o}function Sa(e){var t=new DataView(e),i=t.byteLength,o,a,n,s,u,c,l,h,f,p;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(f=2;f<i;){if(t.getUint8(f)===255&&t.getUint8(f+1)===225){l=f;break}f++}if(l&&(a=l+4,n=l+10,Ca(t,a,4)==="Exif"&&(c=t.getUint16(n),u=c===18761,(u||c===19789)&&t.getUint16(n+2,u)===42&&(s=t.getUint32(n+4,u),s>=8&&(h=n+s)))),h){for(i=t.getUint16(h,u),p=0;p<i;p++)if(f=h+p*12+2,t.getUint16(f,u)===274){f+=8,o=t.getUint16(f,u);break}}return o}const _a=(e,t)=>{const i=e.__vccOpts||e;for(const[o,a]of t)i[o]=a;return i},Oa=Y({data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0,imgIsQqualCrop:!1}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:()=>[1,1]},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:()=>10,validator:function(e){return Array.isArray(e)?Number(e[0])>=0&&Number(e[1])>=0:Number(e)>=0}},fillColor:{type:String,default:""}},computed:{cropInfo(){let e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){let t=1;this.high&&!this.full&&(t=window.devicePixelRatio),this.enlarge!==1&!this.full&&(t=Math.abs(Number(this.enlarge))),e.width=e.width*t,e.height=e.height*t,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE(){return!!window.ActiveXObject||"ActiveXObject"in window},passive(){return this.isIE?null:{passive:!1}},isRotateRightOrLeft(){return[1,-1,3,-3].includes(this.rotate)}},watch:{img(){this.checkedImg()},imgs(e){e!==""&&this.reload()},cropW(){this.showPreview()},cropH(){this.showPreview()},cropOffsertX(){this.showPreview()},cropOffsertY(){this.showPreview()},scale(e,t){this.showPreview()},x(){this.showPreview()},y(){this.showPreview()},autoCrop(e){e&&this.goAutoCrop()},autoCropWidth(){this.autoCrop&&this.goAutoCrop()},autoCropHeight(){this.autoCrop&&this.goAutoCrop()},mode(){this.checkedImg()},rotate(){this.showPreview(),this.autoCrop?this.goAutoCrop(this.cropW,this.cropH):(this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion(e){var t=navigator.userAgent.split(" "),i="";let o=0;const a=new RegExp(e,"i");for(var n=0;n<t.length;n++)a.test(t[n])&&(i=t[n]);return i?o=i.split("/")[1].split("."):o=["0","0","0"],o},checkOrientationImage(e,t,i,o){if(this.getVersion("chrome")[0]>=81)t=-1;else if(this.getVersion("safari")[0]>=605){const s=this.getVersion("version");s[0]>13&&s[1]>1&&(t=-1)}else{const s=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(s){let u=s[1];u=u.split("_"),(u[0]>13||u[0]>=13&&u[1]>=4)&&(t=-1)}}let a=document.createElement("canvas"),n=a.getContext("2d");switch(n.save(),t){case 2:a.width=i,a.height=o,n.translate(i,0),n.scale(-1,1);break;case 3:a.width=i,a.height=o,n.translate(i/2,o/2),n.rotate(180*Math.PI/180),n.translate(-i/2,-o/2);break;case 4:a.width=i,a.height=o,n.translate(0,o),n.scale(1,-1);break;case 5:a.height=i,a.width=o,n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:a.width=o,a.height=i,n.translate(o/2,i/2),n.rotate(90*Math.PI/180),n.translate(-i/2,-o/2);break;case 7:a.height=i,a.width=o,n.rotate(.5*Math.PI),n.translate(i,-o),n.scale(-1,1);break;case 8:a.height=i,a.width=o,n.translate(o/2,i/2),n.rotate(-90*Math.PI/180),n.translate(-i/2,-o/2);break;default:a.width=i,a.height=o}n.drawImage(e,0,0,i,o),n.restore(),a.toBlob(s=>{let u=URL.createObjectURL(s);URL.revokeObjectURL(this.imgs),this.imgs=u},"image/"+this.outputType,1)},checkedImg(){if(this.img===null||this.img===""){this.imgs="",this.clearCrop();return}this.loading=!0,this.scale=1,this.rotate=0,this.imgIsQqualCrop=!1,this.clearCrop();let e=new Image;if(e.onload=()=>{if(this.img==="")return this.$emit("img-load",new Error("图片不能为空")),!1;let i=e.width,o=e.height;ss.getData(e).then(a=>{this.orientation=a.orientation||1;let n=Number(this.maxImgSize);if(!this.orientation&&i<n&o<n){this.imgs=this.img;return}i>n&&(o=o/i*n,i=n),o>n&&(i=i/o*n,o=n),this.checkOrientationImage(e,this.orientation,i,o)}).catch(a=>{this.$emit("img-load","error"),this.$emit("img-load-error",a)})},e.onerror=i=>{this.$emit("img-load","error"),this.$emit("img-load-error",i)},this.img.substr(0,4)!=="data"&&(e.crossOrigin=""),this.isIE){var t=new XMLHttpRequest;t.onload=function(){var i=URL.createObjectURL(this.response);e.src=i},t.open("GET",this.img,!0),t.responseType="blob",t.send()}else e.src=this.img},startMove(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in e?e.clientX:e.touches[0].clientX)-this.x,this.moveY=("clientY"in e?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),e.touches.length==2&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale(e){e.preventDefault();let t=this.scale;var i={x:this.touches[0].clientX,y:this.touches[0].clientY},o={x:e.touches[0].clientX,y:e.touches[0].clientY},a={x:this.touches[1].clientX,y:this.touches[1].clientY},n={x:e.touches[1].clientX,y:e.touches[1].clientY},s=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)),u=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),c=u-s,l=1;l=l/this.trueWidth>l/this.trueHeight?l/this.trueHeight:l/this.trueWidth,l=l>.1?.1:l;var h=l*c;if(!this.touchNow){if(this.touchNow=!0,c>0?t+=Math.abs(h):c<0&&t>Math.abs(h)&&(t-=Math.abs(h)),this.touches=e.touches,setTimeout(()=>{this.touchNow=!1},8),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t}},cancelTouchScale(e){window.removeEventListener("touchmove",this.touchScale)},moveImg(e){if(e.preventDefault(),e.touches&&e.touches.length===2)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;let t="clientX"in e?e.clientX:e.touches[0].clientX,i="clientY"in e?e.clientY:e.touches[0].clientY,o,a;o=t-this.moveX,a=i-this.moveY,this.$nextTick(()=>{if(this.centerBox){let n=this.getImgAxis(o,a,this.scale),s=this.getCropAxis(),u=this.trueHeight*this.scale,c=this.trueWidth*this.scale,l,h,f,p;switch(this.rotate){case 1:case-1:case 3:case-3:l=this.cropOffsertX-this.trueWidth*(1-this.scale)/2+(u-c)/2,h=this.cropOffsertY-this.trueHeight*(1-this.scale)/2+(c-u)/2,f=l-u+this.cropW,p=h-c+this.cropH;break;default:l=this.cropOffsertX-this.trueWidth*(1-this.scale)/2,h=this.cropOffsertY-this.trueHeight*(1-this.scale)/2,f=l-c+this.cropW,p=h-u+this.cropH;break}n.x1>=s.x1&&(o=l),n.y1>=s.y1&&(a=h),n.x2<=s.x2&&(o=f),n.y2<=s.y2&&(a=p)}this.x=o,this.y=a,this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})})},leaveImg(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize(e){e.preventDefault();let t=this.scale;var i=e.deltaY||e.wheelDelta,o=navigator.userAgent.indexOf("Firefox");i=o>0?i*30:i,this.isIE&&(i=-i);var a=this.coe;a=a/this.trueWidth>a/this.trueHeight?a/this.trueHeight:a/this.trueWidth;var n=a*i;n<0?t+=Math.abs(n):t>Math.abs(n)&&(t-=Math.abs(n));let s=n<0?"add":"reduce";if(s!==this.coeStatus&&(this.coeStatus=s,this.coe=.2),this.scaling||(this.scalingSet=setTimeout(()=>{this.scaling=!1,this.coe=this.coe+=.01},50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},changeScale(e){let t=this.scale;e=e||1;var i=20;if(i=i/this.trueWidth>i/this.trueHeight?i/this.trueHeight:i/this.trueWidth,e=e*i,e>0?t+=Math.abs(e):t>Math.abs(e)&&(t-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},createCrop(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,i="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick(()=>{var o=t-this.cropX,a=i-this.cropY;if(o>0?(this.cropW=o+this.cropChangeX>this.w?this.w-this.cropChangeX:o,this.cropOffsertX=this.cropChangeX):(this.cropW=this.w-this.cropChangeX+Math.abs(o)>this.w?this.cropChangeX:Math.abs(o),this.cropOffsertX=this.cropChangeX+o>0?this.cropChangeX+o:0),!this.fixed)a>0?(this.cropH=a+this.cropChangeY>this.h?this.h-this.cropChangeY:a,this.cropOffsertY=this.cropChangeY):(this.cropH=this.h-this.cropChangeY+Math.abs(a)>this.h?this.cropChangeY:Math.abs(a),this.cropOffsertY=this.cropChangeY+a>0?this.cropChangeY+a:0);else{var n=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];n+this.cropOffsertY>this.h?(this.cropH=this.h-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],o>0?this.cropOffsertX=this.cropChangeX:this.cropOffsertX=this.cropChangeX-this.cropW):this.cropH=n,this.cropOffsertY=this.cropOffsertY}})},changeCropSize(e,t,i,o,a){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=t,this.canChangeY=i,this.changeCropTypeX=o,this.changeCropTypeY=a,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,i="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;let o=this.w,a=this.h,n=0,s=0;if(this.centerBox){let l=this.getImgAxis(),h=l.x2,f=l.y2;n=l.x1>0?l.x1:0,s=l.y1>0?l.y1:0,o>h&&(o=h),a>f&&(a=f)}const[u,c]=this.checkCropLimitSize();this.$nextTick(()=>{var l=t-this.cropX,h=i-this.cropY;if(this.canChangeX&&(this.changeCropTypeX===1?this.cropOldW-l<u?(this.cropW=u,this.cropOffsertX=this.cropOldW+this.cropChangeX-n-u):this.cropOldW-l>0?(this.cropW=o-this.cropChangeX-l<=o-n?this.cropOldW-l:this.cropOldW+this.cropChangeX-n,this.cropOffsertX=o-this.cropChangeX-l<=o-n?this.cropChangeX+l:n):(this.cropW=Math.abs(l)+this.cropChangeX<=o?Math.abs(l)-this.cropOldW:o-this.cropOldW-this.cropChangeX,this.cropOffsertX=this.cropChangeX+this.cropOldW):this.changeCropTypeX===2&&(this.cropOldW+l<u?this.cropW=u:this.cropOldW+l>0?(this.cropW=this.cropOldW+l+this.cropOffsertX<=o?this.cropOldW+l:o-this.cropOffsertX,this.cropOffsertX=this.cropChangeX):(this.cropW=o-this.cropChangeX+Math.abs(l+this.cropOldW)<=o-n?Math.abs(l+this.cropOldW):this.cropChangeX-n,this.cropOffsertX=o-this.cropChangeX+Math.abs(l+this.cropOldW)<=o-n?this.cropChangeX-Math.abs(l+this.cropOldW):n))),this.canChangeY&&(this.changeCropTypeY===1?this.cropOldH-h<c?(this.cropH=c,this.cropOffsertY=this.cropOldH+this.cropChangeY-s-c):this.cropOldH-h>0?(this.cropH=a-this.cropChangeY-h<=a-s?this.cropOldH-h:this.cropOldH+this.cropChangeY-s,this.cropOffsertY=a-this.cropChangeY-h<=a-s?this.cropChangeY+h:s):(this.cropH=Math.abs(h)+this.cropChangeY<=a?Math.abs(h)-this.cropOldH:a-this.cropOldH-this.cropChangeY,this.cropOffsertY=this.cropChangeY+this.cropOldH):this.changeCropTypeY===2&&(this.cropOldH+h<c?this.cropH=c:this.cropOldH+h>0?(this.cropH=this.cropOldH+h+this.cropOffsertY<=a?this.cropOldH+h:a-this.cropOffsertY,this.cropOffsertY=this.cropChangeY):(this.cropH=a-this.cropChangeY+Math.abs(h+this.cropOldH)<=a-s?Math.abs(h+this.cropOldH):this.cropChangeY-s,this.cropOffsertY=a-this.cropChangeY+Math.abs(h+this.cropOldH)<=a-s?this.cropChangeY-Math.abs(h+this.cropOldH):s))),this.canChangeX&&this.fixed){var f=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];f<c?(this.cropH=c,this.cropW=this.fixedNumber[0]*c/this.fixedNumber[1],this.changeCropTypeX===1&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):f+this.cropOffsertY>a?(this.cropH=a-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],this.changeCropTypeX===1&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):this.cropH=f}if(this.canChangeY&&this.fixed){var p=this.cropH/this.fixedNumber[1]*this.fixedNumber[0];p<u?(this.cropW=u,this.cropH=this.fixedNumber[1]*u/this.fixedNumber[0],this.cropOffsertY=this.cropOldH+this.cropChangeY-this.cropH):p+this.cropOffsertX>o?(this.cropW=o-this.cropOffsertX,this.cropH=this.cropW/this.fixedNumber[0]*this.fixedNumber[1]):this.cropW=p}})},checkCropLimitSize(){let{cropW:e,cropH:t,limitMinSize:i}=this,o=new Array;return Array.isArray(i)?o=i:o=[i,i],e=parseFloat(o[0]),t=parseFloat(o[1]),[e,t]},changeCropEnd(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},calculateSize(e,t,i,o,a,n){const s=e/t;let u=a,c=n;return u<i&&(u=i,c=Math.ceil(u/s)),c<o&&(c=o,u=Math.ceil(c*s),u<i&&(u=i,c=Math.ceil(u/s))),u<a&&(u=a,c=Math.ceil(u/s)),c<n&&(c=n,u=Math.ceil(c*s)),{width:u,height:c}},endCrop(){this.cropW===0&&this.cropH===0&&(this.cropping=!1);let[e,t]=this.checkCropLimitSize();const{width:i,height:o}=this.fixed?this.calculateSize(this.fixedNumber[0],this.fixedNumber[1],e,t,this.cropW,this.cropH):{width:e,height:t};i>this.cropW&&(this.cropW=i,this.cropOffsertX+i>this.w&&(this.cropOffsertX=this.w-i)),o>this.cropH&&(this.cropH=o,this.cropOffsertY+o>this.h&&(this.cropOffsertY=this.h-o)),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop(){this.crop=!0},stopCrop(){this.crop=!1},clearCrop(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&e.touches.length===2)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);let t="clientX"in e?e.clientX:e.touches[0].clientX,i="clientY"in e?e.clientY:e.touches[0].clientY,o,a;o=t-this.cropOffsertX,a=i-this.cropOffsertY,this.cropX=o,this.cropY=a,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop(e,t){let i=0,o=0;e&&(e.preventDefault(),i="clientX"in e?e.clientX:e.touches[0].clientX,o="clientY"in e?e.clientY:e.touches[0].clientY),this.$nextTick(()=>{let a,n,s=i-this.cropX,u=o-this.cropY;if(t&&(s=this.cropOffsertX,u=this.cropOffsertY),s<=0?a=0:s+this.cropW>this.w?a=this.w-this.cropW:a=s,u<=0?n=0:u+this.cropH>this.h?n=this.h-this.cropH:n=u,this.centerBox){let c=this.getImgAxis();a<=c.x1&&(a=c.x1),a+this.cropW>c.x2&&(a=c.x2-this.cropW),n<=c.y1&&(n=c.y1),n+this.cropH>c.y2&&(n=c.y2-this.cropH)}this.cropOffsertX=a,this.cropOffsertY=n,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})})},getImgAxis(e,t,i){e=e||this.x,t=t||this.y,i=i||this.scale;let o={x1:0,x2:0,y1:0,y2:0},a=this.trueWidth*i,n=this.trueHeight*i;switch(this.rotate){case 0:o.x1=e+this.trueWidth*(1-i)/2,o.x2=o.x1+this.trueWidth*i,o.y1=t+this.trueHeight*(1-i)/2,o.y2=o.y1+this.trueHeight*i;break;case 1:case-1:case 3:case-3:o.x1=e+this.trueWidth*(1-i)/2+(a-n)/2,o.x2=o.x1+this.trueHeight*i,o.y1=t+this.trueHeight*(1-i)/2+(n-a)/2,o.y2=o.y1+this.trueWidth*i;break;default:o.x1=e+this.trueWidth*(1-i)/2,o.x2=o.x1+this.trueWidth*i,o.y1=t+this.trueHeight*(1-i)/2,o.y2=o.y1+this.trueHeight*i;break}return o},getCropAxis(){let e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked(e){let t=document.createElement("canvas"),i=t.getContext("2d"),o=new Image,a=this.rotate,n=this.trueWidth,s=this.trueHeight,u=this.cropOffsertX,c=this.cropOffsertY;o.onload=()=>{if(this.cropW!==0){let p=1;this.high&!this.full&&(p=window.devicePixelRatio),this.enlarge!==1&!this.full&&(p=Math.abs(Number(this.enlarge)));let v=this.cropW*p,y=this.cropH*p,m=n*this.scale*p,_=s*this.scale*p,C=(this.x-u+this.trueWidth*(1-this.scale)/2)*p,O=(this.y-c+this.trueHeight*(1-this.scale)/2)*p;switch(f(v,y),i.save(),a){case 0:this.full?(f(v/this.scale,y/this.scale),i.drawImage(o,C/this.scale,O/this.scale,m/this.scale,_/this.scale)):i.drawImage(o,C,O,m,_);break;case 1:case-3:this.full?(f(v/this.scale,y/this.scale),C=C/this.scale+(m/this.scale-_/this.scale)/2,O=O/this.scale+(_/this.scale-m/this.scale)/2,i.rotate(a*90*Math.PI/180),i.drawImage(o,O,-C-_/this.scale,m/this.scale,_/this.scale)):(C=C+(m-_)/2,O=O+(_-m)/2,i.rotate(a*90*Math.PI/180),i.drawImage(o,O,-C-_,m,_));break;case 2:case-2:this.full?(f(v/this.scale,y/this.scale),i.rotate(a*90*Math.PI/180),C=C/this.scale,O=O/this.scale,i.drawImage(o,-C-m/this.scale,-O-_/this.scale,m/this.scale,_/this.scale)):(i.rotate(a*90*Math.PI/180),i.drawImage(o,-C-m,-O-_,m,_));break;case 3:case-1:this.full?(f(v/this.scale,y/this.scale),C=C/this.scale+(m/this.scale-_/this.scale)/2,O=O/this.scale+(_/this.scale-m/this.scale)/2,i.rotate(a*90*Math.PI/180),i.drawImage(o,-O-m/this.scale,C,m/this.scale,_/this.scale)):(C=C+(m-_)/2,O=O+(_-m)/2,i.rotate(a*90*Math.PI/180),i.drawImage(o,-O-m,C,m,_));break;default:this.full?(f(v/this.scale,y/this.scale),i.drawImage(o,C/this.scale,O/this.scale,m/this.scale,_/this.scale)):i.drawImage(o,C,O,m,_)}i.restore()}else{let p=n*this.scale,v=s*this.scale;switch(i.save(),a){case 0:f(p,v),i.drawImage(o,0,0,p,v);break;case 1:case-3:f(v,p),i.rotate(a*90*Math.PI/180),i.drawImage(o,0,-v,p,v);break;case 2:case-2:f(p,v),i.rotate(a*90*Math.PI/180),i.drawImage(o,-p,-v,p,v);break;case 3:case-1:f(v,p),i.rotate(a*90*Math.PI/180),i.drawImage(o,-p,0,p,v);break;default:f(p,v),i.drawImage(o,0,0,p,v)}i.restore()}e(t)};var l=this.img.substr(0,4);l!=="data"&&(o.crossOrigin="Anonymous"),o.src=this.imgs;const h=this.fillColor;function f(p,v){t.width=Math.round(p),t.height=Math.round(v),h&&(i.fillStyle=h,i.fillRect(0,0,t.width,t.height))}},getCropData(e){this.getCropChecked(t=>{e(t.toDataURL("image/"+this.outputType,this.outputSize))})},getCropBlob(e){this.getCropChecked(t=>{t.toBlob(i=>e(i),"image/"+this.outputType,this.outputSize)})},showPreview(){if(this.isCanShow)this.isCanShow=!1,setTimeout(()=>{this.isCanShow=!0},16);else return!1;let e=this.cropW,t=this.cropH,i=this.scale;var o={};o.div={width:`${e}px`,height:`${t}px`};let a=(this.x-this.cropOffsertX)/i,n=(this.y-this.cropOffsertY)/i,s=0;o.w=e,o.h=t,o.url=this.imgs,o.img={width:`${this.trueWidth}px`,height:`${this.trueHeight}px`,transform:`scale(${i})translate3d(${a}px, ${n}px, ${s}px)rotateZ(${this.rotate*90}deg)`},o.html=`
      <div class="show-preview" style="width: ${o.w}px; height: ${o.h}px,; overflow: hidden">
        <div style="width: ${e}px; height: ${t}px">
          <img src=${o.url} style="width: ${this.trueWidth}px; height: ${this.trueHeight}px; transform:
          scale(${i})translate3d(${a}px, ${n}px, ${s}px)rotateZ(${this.rotate*90}deg)">
        </div>
      </div>`,this.$emit("real-time",o)},reload(){let e=new Image;e.onload=()=>{this.w=parseFloat(window.getComputedStyle(this.$refs.cropper).width),this.h=parseFloat(window.getComputedStyle(this.$refs.cropper).height),this.trueWidth=e.width,this.trueHeight=e.height,this.original?this.scale=1:this.scale=this.checkedMode(),this.$nextTick(()=>{this.x=-(this.trueWidth-this.trueWidth*this.scale)/2+(this.w-this.trueWidth*this.scale)/2,this.y=-(this.trueHeight-this.trueHeight*this.scale)/2+(this.h-this.trueHeight*this.scale)/2,this.loading=!1,this.autoCrop&&this.goAutoCrop(),this.$emit("img-load","success"),setTimeout(()=>{this.showPreview()},20)})},e.onerror=()=>{this.$emit("img-load","error")},e.src=this.imgs},checkedMode(){let e=1,t=this.trueWidth,i=this.trueHeight;const o=this.mode.split(" ");switch(o[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":t=this.w,e=t/this.trueWidth,i=i*e,i<this.h&&(i=this.h,e=i/this.trueHeight);break;default:try{let a=o[0];if(a.search("px")!==-1){a=a.replace("px",""),t=parseFloat(a);const n=t/this.trueWidth;let s=1,u=o[1];u.search("px")!==-1&&(u=u.replace("px",""),i=parseFloat(u),s=i/this.trueHeight),e=Math.min(n,s)}if(a.search("%")!==-1&&(a=a.replace("%",""),t=parseFloat(a)/100*this.w,e=t/this.trueWidth),o.length===2&&a==="auto"){let n=o[1];n.search("px")!==-1&&(n=n.replace("px",""),i=parseFloat(n),e=i/this.trueHeight),n.search("%")!==-1&&(n=n.replace("%",""),i=parseFloat(n)/100*this.h,e=i/this.trueHeight)}}catch{e=1}}return e},goAutoCrop(e,t){if(this.imgs===""||this.imgs===null)return;this.clearCrop(),this.cropping=!0;let i=this.w,o=this.h;if(this.centerBox){const s=Math.abs(this.rotate)%2>0;let u=(s?this.trueHeight:this.trueWidth)*this.scale,c=(s?this.trueWidth:this.trueHeight)*this.scale;i=u<i?u:i,o=c<o?c:o}var a=e||parseFloat(this.autoCropWidth),n=t||parseFloat(this.autoCropHeight);(a===0||n===0)&&(a=i*.8,n=o*.8),a=a>i?i:a,n=n>o?o:n,this.fixed&&(n=a/this.fixedNumber[0]*this.fixedNumber[1]),n>this.h&&(n=this.h,a=n/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(a,n)},changeCrop(e,t){if(this.centerBox){let i=this.getImgAxis();e>i.x2-i.x1&&(e=i.x2-i.x1,t=e/this.fixedNumber[0]*this.fixedNumber[1]),t>i.y2-i.y1&&(t=i.y2-i.y1,e=t/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=t,this.checkCropLimitSize(),this.$nextTick(()=>{this.cropOffsertX=(this.w-this.cropW)/2,this.cropOffsertY=(this.h-this.cropH)/2,this.centerBox&&this.moveCrop(null,!0)})},refresh(){this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.imgIsQqualCrop=!1,this.clearCrop(),this.$nextTick(()=>{this.checkedImg()})},rotateLeft(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear(){this.rotate=0},checkoutImgAxis(e,t,i){e=e||this.x,t=t||this.y,i=i||this.scale;let o=!0;if(this.centerBox){let a=this.getImgAxis(e,t,i),n=this.getCropAxis();a.x1>=n.x1&&(o=!1),a.x2<=n.x2&&(o=!1),a.y1>=n.y1&&(o=!1),a.y2<=n.y2&&(o=!1),o||this.changeImgScale(a,n,i)}return o},changeImgScale(e,t,i){let o=this.trueWidth,a=this.trueHeight,n=o*i,s=a*i;if(n>=this.cropW&&s>=this.cropH)this.scale=i;else{const u=this.cropW/o,c=this.cropH/a,l=this.cropH<=a*u?u:c;this.scale=l,n=o*l,s=a*l}this.imgIsQqualCrop||(e.x1>=t.x1&&(this.isRotateRightOrLeft?this.x=t.x1-(o-n)/2-(n-s)/2:this.x=t.x1-(o-n)/2),e.x2<=t.x2&&(this.isRotateRightOrLeft?this.x=t.x1-(o-n)/2-(n-s)/2-s+this.cropW:this.x=t.x2-(o-n)/2-n),e.y1>=t.y1&&(this.isRotateRightOrLeft?this.y=t.y1-(a-s)/2-(s-n)/2:this.y=t.y1-(a-s)/2),e.y2<=t.y2&&(this.isRotateRightOrLeft?this.y=t.y2-(a-s)/2-(s-n)/2-n:this.y=t.y2-(a-s)/2-s)),(n<this.cropW||s<this.cropH)&&(this.imgIsQqualCrop=!0)}},mounted(){this.support="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";let e=this;var t=navigator.userAgent;this.isIOS=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(i,o,a){for(var n=atob(this.toDataURL(o,a).split(",")[1]),s=n.length,u=new Uint8Array(s),c=0;c<s;c++)u[c]=n.charCodeAt(c);i(new Blob([u],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},unmounted(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}}),xa={key:0,class:"cropper-box"},$a=["src"],Ia={class:"cropper-view-box"},Ea=["src"],Ta={key:1};function Ma(e,t,i,o,a,n){return b(),W("div",{class:"vue-cropper",ref:"cropper",onMouseover:t[28]||(t[28]=(...s)=>e.scaleImg&&e.scaleImg(...s)),onMouseout:t[29]||(t[29]=(...s)=>e.cancelScale&&e.cancelScale(...s))},[e.imgs?(b(),W("div",xa,[q(d("div",{class:"cropper-box-canvas",style:F({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"})},[d("img",{src:e.imgs,alt:"cropper-img",ref:"cropperImg"},null,8,$a)],4),[[$e,!e.loading]])])):V("",!0),d("div",{class:x(["cropper-drag-box",{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping}]),onMousedown:t[0]||(t[0]=(...s)=>e.startMove&&e.startMove(...s)),onTouchstart:t[1]||(t[1]=(...s)=>e.startMove&&e.startMove(...s))},null,34),q(d("div",{class:"cropper-crop-box",style:F({width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"})},[d("span",Ia,[d("img",{style:F({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"}),src:e.imgs,alt:"cropper-img"},null,12,Ea)]),d("span",{class:"cropper-face cropper-move",onMousedown:t[2]||(t[2]=(...s)=>e.cropMove&&e.cropMove(...s)),onTouchstart:t[3]||(t[3]=(...s)=>e.cropMove&&e.cropMove(...s))},null,32),e.info?(b(),W("span",{key:0,class:"crop-info",style:F({top:e.cropInfo.top})},$(e.cropInfo.width)+" × "+$(e.cropInfo.height),5)):V("",!0),e.fixedBox?V("",!0):(b(),W("span",Ta,[d("span",{class:"crop-line line-w",onMousedown:t[4]||(t[4]=s=>e.changeCropSize(s,!1,!0,0,1)),onTouchstart:t[5]||(t[5]=s=>e.changeCropSize(s,!1,!0,0,1))},null,32),d("span",{class:"crop-line line-a",onMousedown:t[6]||(t[6]=s=>e.changeCropSize(s,!0,!1,1,0)),onTouchstart:t[7]||(t[7]=s=>e.changeCropSize(s,!0,!1,1,0))},null,32),d("span",{class:"crop-line line-s",onMousedown:t[8]||(t[8]=s=>e.changeCropSize(s,!1,!0,0,2)),onTouchstart:t[9]||(t[9]=s=>e.changeCropSize(s,!1,!0,0,2))},null,32),d("span",{class:"crop-line line-d",onMousedown:t[10]||(t[10]=s=>e.changeCropSize(s,!0,!1,2,0)),onTouchstart:t[11]||(t[11]=s=>e.changeCropSize(s,!0,!1,2,0))},null,32),d("span",{class:"crop-point point1",onMousedown:t[12]||(t[12]=s=>e.changeCropSize(s,!0,!0,1,1)),onTouchstart:t[13]||(t[13]=s=>e.changeCropSize(s,!0,!0,1,1))},null,32),d("span",{class:"crop-point point2",onMousedown:t[14]||(t[14]=s=>e.changeCropSize(s,!1,!0,0,1)),onTouchstart:t[15]||(t[15]=s=>e.changeCropSize(s,!1,!0,0,1))},null,32),d("span",{class:"crop-point point3",onMousedown:t[16]||(t[16]=s=>e.changeCropSize(s,!0,!0,2,1)),onTouchstart:t[17]||(t[17]=s=>e.changeCropSize(s,!0,!0,2,1))},null,32),d("span",{class:"crop-point point4",onMousedown:t[18]||(t[18]=s=>e.changeCropSize(s,!0,!1,1,0)),onTouchstart:t[19]||(t[19]=s=>e.changeCropSize(s,!0,!1,1,0))},null,32),d("span",{class:"crop-point point5",onMousedown:t[20]||(t[20]=s=>e.changeCropSize(s,!0,!1,2,0)),onTouchstart:t[21]||(t[21]=s=>e.changeCropSize(s,!0,!1,2,0))},null,32),d("span",{class:"crop-point point6",onMousedown:t[22]||(t[22]=s=>e.changeCropSize(s,!0,!0,1,2)),onTouchstart:t[23]||(t[23]=s=>e.changeCropSize(s,!0,!0,1,2))},null,32),d("span",{class:"crop-point point7",onMousedown:t[24]||(t[24]=s=>e.changeCropSize(s,!1,!0,0,2)),onTouchstart:t[25]||(t[25]=s=>e.changeCropSize(s,!1,!0,0,2))},null,32),d("span",{class:"crop-point point8",onMousedown:t[26]||(t[26]=s=>e.changeCropSize(s,!0,!0,2,2)),onTouchstart:t[27]||(t[27]=s=>e.changeCropSize(s,!0,!0,2,2))},null,32)]))],4),[[$e,e.cropping]])],544)}const ka=_a(Oa,[["render",Ma],["__scopeId","data-v-a742df44"]]),Wa={class:"cropper"},La={class:"cropper_left"},Ha={class:"reupload_box"},Aa={class:"cropper_right"},Va={class:"preview_text"},Pa=["src"],Ra={class:"dialog-footer"},Na=Y({__name:"index",props:{type:{default:"systemLogo"},allowTypeList:{default:()=>["jpg","png","jpeg"]},limitSize:{default:10},fixedNumber:{default:()=>[1,1]},fixedNumberAider:{default:()=>[1,1]},previewWidth:{default:160},title:{default:"图片裁剪"},showWidth:{default:300},showHeight:{default:300},action:{default:"ibos"},uploadAvatar:{type:Boolean,default:!1}},emits:["confirm"],setup(e,{expose:t,emit:i}){const o=e,a=i,n=A(!1),s=oe({img:"",autoCrop:!0,autoCropWidth:300,autoCropHeight:300,fixedBox:!1,info:!0,outputSize:1,outputType:"png",canScale:!0,fixed:!0,fixedNumber:[1,1],full:!0,canMove:!1,original:!1,centerBox:!0,infoTrue:!0,accept:"image/jpeg,image/jpg,image/png,image/gif,image/x-icon",fillColor:"transparent"}),u=A({width:"",height:""}),c=A([]),l=A({}),h=A({}),f=A(),p=A(!1),v=L=>{const H=L.name.substring(L.name.lastIndexOf(".")+1);return o.allowTypeList.includes(H)?!0:(Te.error(`仅支持${c.value.join("、")}格式的图片`),!1)},y=L=>{const{limitSize:H}=o,M=L.target.files[0];if(M.size>H*1024*1024)return Te.warning(`图片上传大小不能超过${H}MB`);const B=window.URL||window.webkitURL;v(M)&&(s.img=B.createObjectURL(M),n.value=!0)},m=()=>{h.value.refresh()},_=()=>{h.value.rotateRight()},C=L=>{const H=L||1;h.value.changeScale(H)},O=async L=>{var M;if(p.value)return;if(L==="reupload"){(M=f.value)==null||M.click();return}let H=document.createElement("input");H.type="file",H.accept=s.accept,H.onchange=y,H.click(),await J(),H=null},j=async L=>{try{return(await Xi.upload(L)).data}catch{return{}}},Z=(L,H)=>{const M=L.split(","),B=M[0].match(/:(.*?);/)[1],se=atob(M[1]);let z=se.length;const Me=new Uint8Array(z);for(;z--;)Me[z]=se.charCodeAt(z);return new File([Me],H,{type:B})},S=()=>{p.value=!0,h.value.getCropData(async L=>{const H=Z(L,"images.png"),M=await j(H).finally(()=>{p.value=!1}),B=`${Li}/api/preview/${M.preview_key||""}`;M.url=B,a("confirm",M),n.value=!1})},X=L=>{h.value.getCropData(H=>{l.value.img=H})};return te(()=>o,()=>{u.value={width:`${o.previewWidth}px`,height:`${o.previewWidth/o.fixedNumber[0]}px`,border:"1px solid #e8e8e8","border-radius":"2px"},c.value=[];for(let L=0;L<o.allowTypeList.length;L++)c.value.push(o.allowTypeList[L].toUpperCase())},{deep:!0,immediate:!0}),t({uploadFile:O,open(L){s.img=L,n.value=!0}}),(L,H)=>{const M=ee,B=Fe,se=Kt;return b(),P(se,{"model-value":n.value,title:L.$t("common.image_cropper"),width:"550px","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":"",onClose:H[4]||(H[4]=z=>n.value=!1)},{default:T(()=>[d("div",Wa,[d("div",La,[E(w(ka),{ref_key:"cropperRef",ref:h,style:F({width:`${L.showWidth}px`,height:`${L.showHeight}px`}),img:s.img,info:!0,"info-true":s.infoTrue,"auto-crop":s.autoCrop,"fixed-box":s.fixedBox,"can-move":s.canMove,"can-scale":s.canScale,"fixed-number":L.fixedNumber,fixed:s.fixed,full:s.full,"output-type":s.outputType,"center-box":s.centerBox,"fill-color":s.fillColor,onRealTime:X},null,8,["style","img","info-true","auto-crop","fixed-box","can-move","can-scale","fixed-number","fixed","full","output-type","center-box","fill-color"]),d("div",Ha,[d("div",{class:"reupload_text",onClick:H[0]||(H[0]=z=>O("reload"))},$(L.$t("action.reupload")),1),d("div",null,[E(M,{class:"rotate_right",onClick:H[1]||(H[1]=z=>C(1))},{default:T(()=>[E(w(Mi))]),_:1}),E(M,{class:"rotate_right",onClick:H[2]||(H[2]=z=>C(-1))},{default:T(()=>[E(w(ki))]),_:1}),E(M,{class:"rotate_right",onClick:_},{default:T(()=>[E(w(Wi))]),_:1})])])]),d("div",Aa,[d("div",Va,$(L.$t("action.preview")),1),d("div",{style:F(u.value),class:"previewImg"},[d("img",{style:F(l.value.img),src:l.value.img,alt:""},null,12,Pa)],4)])])]),footer:T(()=>[d("span",Ra,[E(B,{size:"large",onClick:H[3]||(H[3]=z=>n.value=!1)},{default:T(()=>[D($(L.$t("action.cancel")),1)]),_:1}),E(B,{size:"large",type:"",onClick:m},{default:T(()=>[D($(L.$t("action.reset")),1)]),_:1}),E(B,{size:"large",type:"primary",loading:p.value,onClick:S},{default:T(()=>[D($(L.$t("action.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model-value","title"])}}}),Xa=Gt(Na,[["__scopeId","data-v-6104c713"]]),Ya={class:"text-2xl text-primary font-medium"},Ba={class:"flex items-center gap-5 mt-5"},za={class:"flex-1"},Da={class:"text-2xl text-primary font-medium"},Fa={class:"text-sm text-secondary mt-2"},Ua={class:"text-2xl text-primary font-medium mt-10"},Ka={class:"flex flex-col gap-4 mt-5"},Ga={class:"h-9 flex items-center gap-2.5"},qa=["src"],Qa={class:"flex-none w-[100px] text-base text-primary"},ja={class:"flex-1 text-sm text-placeholder"},Za={class:"h-9 flex items-center gap-2.5"},Ja=["src"],en={class:"flex-none w-[100px] text-base text-primary"},tn={class:"flex-1 text-sm text-placeholder"},sn={class:"h-9 flex items-center gap-2.5"},on=["src"],an={class:"flex-none w-[100px] text-base text-primary"},nn={class:"flex-1 text-sm text-placeholder"},ln={class:"h-9 flex items-center gap-2.5"},rn=["src"],cn={class:"flex-none w-[100px] text-base text-primary"},un={class:"flex-1 text-sm text-placeholder"},hn={class:"text-2xl text-primary font-medium mt-10"},dn={class:"flex flex-col gap-4 mt-5"},pn={class:"h-[110px] px-6 rounded-lg flex items-center bg-[#F8F8F9]"},fn={class:"flex-1"},mn={class:"text-base text-primary flex items-center gap-2"},vn={class:"text-sm text-regular"},gn={class:"flex items-center"},bn={class:"w-[73px] text-[#182B50] text-opacity-80"},wn={class:"absolute bottom-0 left-0 right-0 h-5 flex justify-center items-center bg-[#000000] bg-opacity-60 text-white text-opacity-80 text-xs"},yn={class:"flex items-center mt-6"},Cn={class:"w-[73px] text-[#182B50] text-opacity-80"},Sn=Y({__name:"userinfo",setup(e){const t=qt(),i=A(),o=A(!1),a=oe({nickname:"",avatar:""}),n=()=>{a.avatar=t.info.avatar,a.nickname=t.info.nickname,o.value=!0},s=()=>{i.value.uploadFile()},u=l=>{a.avatar=l.url},c=()=>t.update(a).then(()=>{o.value=!1,Te.success($t("status.updated"))});return(l,h)=>{const f=Yi,p=Fe,v=Q("svg-icon"),y=nt,m=Kt,_=Ee("trim"),C=Ee("debounce");return b(),W(de,null,[d("h3",Ya,$(l.$t("profile.profile")),1),d("div",Ba,[E(f,{size:80,src:w(t).info.avatar,style:{"--el-avatar-bg-color":"transparent"}},null,8,["src"]),d("div",za,[d("div",Da,$(w(t).info.nickname),1),d("p",Fa,$(w(t).info.mobile||"- -"),1)]),E(p,{type:"info",plain:"",class:"border-none text-primary",onClick:n},{default:T(()=>[D($(l.$t("action.edit")),1)]),_:1})]),d("h3",Ua,$(l.$t("profile.bind_accounts")),1),d("div",Ka,[d("div",Ga,[d("img",{class:"size-6",src:l.$getPublicPath("/images/profile/mobile.png"),alt:""},null,8,qa),d("div",Qa,$(l.$t("profile.bind_mobile")),1),d("div",ja,$(w(t).info.mobile||l.$t("profile.unbind_account")),1),E(p,{type:"info",class:"border-none text-placeholder-important",plain:"",disabled:""},{default:T(()=>[D($(l.$t("profile.bind")),1)]),_:1})]),d("div",Za,[d("img",{class:"size-6",src:l.$getPublicPath("/images/profile/email.png"),alt:""},null,8,Ja),d("div",en,$(l.$t("profile.bind_email")),1),d("div",tn,$(w(t).info.email||l.$t("profile.unbind_account")),1),E(p,{type:"info",class:"border-none text-placeholder-important",plain:"",disabled:""},{default:T(()=>[D($(l.$t("profile.bind")),1)]),_:1})]),d("div",sn,[d("img",{class:"size-6",src:l.$getPublicPath("/images/profile/wechat.png"),alt:""},null,8,on),d("div",an,$(l.$t("profile.bind_wechat")),1),d("div",nn,$(w(t).info.wechatid||l.$t("profile.unbind_account")),1),E(p,{type:"info",class:"border-none text-placeholder-important",plain:"",disabled:""},{default:T(()=>[D($(l.$t("profile.bind")),1)]),_:1})]),d("div",ln,[d("img",{class:"size-6",src:l.$getPublicPath("/images/profile/google.png"),alt:""},null,8,rn),d("div",cn,$(l.$t("profile.bind_google")),1),d("div",un,$(w(t).info.wechatid||l.$t("profile.unbind")),1),E(p,{type:"info",class:"border-none text-placeholder-important",plain:"",disabled:""},{default:T(()=>[D($(l.$t("profile.unbind")),1)]),_:1})])]),d("h3",hn,$(l.$t("profile.logined_devices")),1),d("div",dn,[d("div",pn,[d("div",fn,[d("div",mn,[E(v,{name:"network"}),h[3]||(h[3]=D(" WindowsChrome 网页版 "))]),h[4]||(h[4]=d("div",{class:"text-sm text-secondary ml-6 mt-1"},"2025年3月22日上午10点51分",-1))]),d("div",vn,$(l.$t("profile.used_devices")),1)])]),E(m,{modelValue:o.value,"onUpdate:modelValue":h[2]||(h[2]=O=>o.value=O),title:l.$t("profile.profile"),width:"550"},{footer:T(()=>[E(p,{size:"large",onClick:h[1]||(h[1]=O=>o.value=!1)},{default:T(()=>[D($(l.$t("action.cancel")),1)]),_:1}),q((b(),P(p,{size:"large",type:"primary",disabled:!a.nickname.trim(),onClick:c},{default:T(()=>[D($(l.$t("action.confirm")),1)]),_:1},8,["disabled"])),[[C]])]),default:T(()=>[d("div",gn,[d("div",bn,$(l.$t("form.avatar")),1),d("div",{class:"relative rounded-full w-[60px] h-[60px] overflow-hidden cursor-pointer",onClick:s},[E(f,{style:{"--el-avatar-size":"60px"},src:a.avatar},null,8,["src"]),d("div",wn,$(l.$t("form.change")),1)])]),d("div",yn,[d("div",Cn,$(l.$t("form.nickname")),1),q(E(y,{modelValue:a.nickname,"onUpdate:modelValue":h[0]||(h[0]=O=>a.nickname=O),size:"large",class:"flex-1",maxlength:"15","show-word-limit":""},null,8,["modelValue"]),[[_]])]),E(Xa,{ref_key:"corpperRef",ref:i,"upload-avatar":!0,"limit-size":2,onConfirm:u},null,512)]),_:1},8,["modelValue","title"])],64)}}}),_n={class:"h-full flex flex-col md:flex-row bg-[#F4F6F9]"},On={class:"md:hidden flex items-center justify-between px-4 py-2 bg-white"},xn={class:"flex items-center gap-2 text-primary"},$n={class:"text-[18px]"},In={class:"h-15 hidden md:flex items-center gap-2 px-6 mb-2 text-primary"},En={class:"text-[22px]"},Tn={class:"py-2 flex flex-col gap-1"},Mn=["onClick"],kn={class:"text-sm"},Wn={class:"flex-1 bg-[#F4F6F9] py-4 md:py-8 px-4 md:max-w-[750px] mx-auto flex flex-col"},Ln={class:"flex-none text-sm text-primary font-semibold"},Hn={class:"flex-1 p-4 md:p-8 bg-[#FFFFFF] rounded-xl mt-4 overflow-y-auto"},An=Y({__name:"index",props:{type:{default:"glider"}},setup(e){const t=qt(),i=Ai(),o=e,a=Hi(),n=A(!1),s=A(!1),u=I(()=>[{label:"划词菜单栏",value:"glider",icon:"mouse",visible:t.is_login&&window.$isElectron},{label:"网页工具栏",value:"toolbar",icon:"web",visible:t.is_login&&window.$isElectron},{label:"通用设置",value:"common",icon:"setting2",visible:window.$isElectron},{label:window.$t("profile.info"),value:"userinfo",icon:"person",visible:t.is_login},{label:window.$t("profile.change_password"),value:"password",icon:"lock",visible:t.is_login},{label:"关于",value:"about",icon:"info",visible:window.$isElectron}]),c=I(()=>u.value.find(v=>v.value===l.value)||{}),l=A(""),h=v=>{l.value=v.value,n.value&&(s.value=!1)},f=()=>{s.value=!s.value},p=()=>{n.value=window.innerWidth<768,n.value||(s.value=!1)};return be(()=>{const v=u.value.filter(m=>m.visible).map(m=>m.value),y=o.type||a.query.type||"userinfo";l.value=v.includes(y)?y:v[0],i.loadInfo(),p(),window.addEventListener("resize",p)}),(v,y)=>{const m=Q("svg-icon"),_=Q("Toolbar"),C=Q("Glider");return b(),W("div",_n,[d("div",On,[d("div",xn,[E(m,{size:"16",name:"setting"}),d("span",$n,$(v.$t("action.setting")),1)]),d("div",{onClick:f,class:"cursor-pointer p-2"},[E(m,{size:"20",name:"menu"})])]),d("div",{class:x(["w-full md:w-[250px] md:flex-none py-5 bg-white border-t md:block md:border-none",[n.value&&!s.value?"hidden":""]])},[d("div",In,[E(m,{size:"16",name:"setting"}),d("span",En,$(v.$t("action.setting")),1)]),d("div",Tn,[(b(!0),W(de,null,Ze(u.value,O=>(b(),W(de,{key:O.value},[O.visible?(b(),W("div",{key:0,class:x(["h-10 flex items-center gap-3 px-6 cursor-pointer hover-bg-primary-light-9 hover-text-theme",[l.value===O.value?"text-theme bg-primary-light-9":"text-regular"]]),onClick:j=>h(O)},[E(m,{size:"16",name:O.icon||"setting"},null,8,["name"]),d("span",kn,$(O.label),1)],10,Mn)):V("",!0)],64))),128))])],2),d("div",Wn,[d("div",Ln,$(c.value.label),1),d("div",Hn,[l.value==="userinfo"?(b(),P(Sn,{key:0})):l.value==="password"?(b(),P(ga,{key:1})):l.value==="toolbar"?(b(),P(_,{key:2})):l.value==="glider"?(b(),P(C,{key:3})):l.value==="about"?(b(),P(da,{key:4})):l.value==="common"?(b(),P(va,{key:5})):V("",!0)])])])}}}),zn=Gt(An,[["__scopeId","data-v-7bde299e"]]);export{zn as default};
