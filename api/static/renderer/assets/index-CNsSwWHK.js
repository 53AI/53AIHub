import{b8 as we,aU as ye,b9 as xe,az as ke,B as te,ba as Ee,bb as Ce,G as L,r as G,aY as $e,b1 as Se,bc as Le,aZ as Fe,h as V,b as c,w as l,f as n,T as ge,u as s,k as H,aC as Be,aD as Me,d as a,b6 as ze,s as Ae,c as v,e as C,p as A,q as ee,t as y,Y as de,bd as ue,m as Ve,be as Re,a_ as De,al as Te,o as ve,a as Pe,E as ae,W as Q,M as he,L as Ne,F as re,K as ce,Z as He,H as Z,a1 as qe,a0 as W,as as Ue,ai as Ie,aj as Oe,bf as _e,bg as fe,bh as je,$ as Je,an as We,_ as Ge,bi as Ke,n as Ye,bj as Ze,a5 as Qe}from"./main-rMrzitnj.js";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang-Dyw1-bcV.js";import{_ as et}from"./header.vue_vue_type_script_setup_true_lang-DPdmbbEj.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{E as tt}from"./el-empty-B6pXs88B.js";import{E as ot,u as st}from"./upload-GPSY5QUJ.js";import{E as nt,a as at}from"./el-tab-pane-CWT3dWDV.js";import{_ as rt}from"./index.vue_vue_type_style_index_0_lang-BHH8ITGU.js";import{b as lt,E as it,a as ct}from"./el-dropdown-item-BnWnA72a.js";import{u as be,c as dt}from"./conversation-DF0D4MXO.js";import{E as ut}from"./index-Bm6Us-tl.js";import"./el-skeleton-item-B0ua8UfR.js";import"./enterprise-KlloCPVp.js";import"./el-image-viewer-DTkaUA3n.js";import"./global-CvDIHAI-.js";import"./index-CKGd0eSL.js";import"./m-footer.vue_vue_type_script_setup_true_lang--GH4gBVN.js";import"./navigation-B33KJ0Ar.js";import"./list.vue_vue_type_script_setup_true_lang-TwFWUo-P.js";const pt=ye({...xe,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),mt=we,_t=te({name:"ElDrawer",inheritAttrs:!1}),ft=te({..._t,props:pt,emits:mt,setup(K,{expose:R}){const F=K,x=Ee();Ce({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},L(()=>!!x.title));const h=G(),S=G(),r=$e("drawer"),{t:p}=Se(),{afterEnter:k,afterLeave:D,beforeLeave:I,visible:_,rendered:t,titleId:m,bodyId:b,zIndex:B,onModalClick:T,onOpenAutoFocus:q,onCloseAutoFocus:P,onFocusoutPrevented:U,onCloseRequested:O,handleClose:N}=Le(F,h),g=L(()=>F.direction==="rtl"||F.direction==="ltr"),j=L(()=>Fe(F.size));return R({handleClose:N,afterEnter:k,afterLeave:D}),(u,E)=>(c(),V(s(Re),{to:u.appendTo,disabled:u.appendTo!=="body"?!1:!u.appendToBody},{default:l(()=>[n(ge,{name:s(r).b("fade"),onAfterEnter:s(k),onAfterLeave:s(D),onBeforeLeave:s(I),persisted:""},{default:l(()=>[H(n(s(Be),{mask:u.modal,"overlay-class":u.modalClass,"z-index":s(B),onClick:s(T)},{default:l(()=>[n(s(Me),{loop:"",trapped:s(_),"focus-trap-el":h.value,"focus-start-el":S.value,onFocusAfterTrapped:s(q),onFocusAfterReleased:s(P),onFocusoutPrevented:s(U),onReleaseRequested:s(O)},{default:l(()=>[a("div",ze({ref_key:"drawerRef",ref:h,"aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:s(m),"aria-describedby":s(b)},u.$attrs,{class:[s(r).b(),u.direction,s(_)&&"open"],style:s(g)?"width: "+s(j):"height: "+s(j),role:"dialog",onClick:Ae(()=>{},["stop"])}),[a("span",{ref_key:"focusStartRef",ref:S,class:A(s(r).e("sr-focus")),tabindex:"-1"},null,2),u.withHeader?(c(),v("header",{key:0,class:A([s(r).e("header"),u.headerClass])},[u.$slots.title?ee(u.$slots,"title",{key:1},()=>[C(" DEPRECATED SLOT ")]):ee(u.$slots,"header",{key:0,close:s(N),titleId:s(m),titleClass:s(r).e("title")},()=>[u.$slots.title?C("v-if",!0):(c(),v("span",{key:0,id:s(m),role:"heading","aria-level":u.headerAriaLevel,class:A(s(r).e("title"))},y(u.title),11,["id","aria-level"]))]),u.showClose?(c(),v("button",{key:2,"aria-label":s(p)("el.drawer.close"),class:A(s(r).e("close-btn")),type:"button",onClick:s(N)},[n(s(de),{class:A(s(r).e("close"))},{default:l(()=>[n(s(ue))]),_:1},8,["class"])],10,["aria-label","onClick"])):C("v-if",!0)],2)):C("v-if",!0),s(t)?(c(),v("div",{key:1,id:s(b),class:A([s(r).e("body"),u.bodyClass])},[ee(u.$slots,"default")],10,["id"])):C("v-if",!0),u.$slots.footer?(c(),v("div",{key:2,class:A([s(r).e("footer"),u.footerClass])},[ee(u.$slots,"footer")],2)):C("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Ve,s(_)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var gt=ke(ft,[["__file","drawer.vue"]]);const vt=De(gt),ht="/images/chat/footer.png",bt={class:"p-5 w-[596px] max-md:w-full"},wt={class:"flex items-center justify-between relative"},yt={class:"absolute right-0"},xt={class:"text-lg text-primary w-full max-md:text-center"},kt={class:"h-[300px] overflow-y-auto mt-5"},Et={class:"grid gap-4 grid-cols-2 max-md:grid-cols-1"},Ct={class:"flex-1 overflow-hidden"},$t={class:"text-base font-medium text-primary mb-1"},St={class:"text-sm text-secondary truncate"},Lt=te({__name:"agent-tooltip",emits:["select"],setup(K,{emit:R}){const F=R,x=Te(),h=G(),S=G(!1),r=()=>{S.value=window.innerWidth<768};ve(()=>{r(),window.addEventListener("resize",r)}),Pe(()=>{window.removeEventListener("resize",r)});const p=ae({keyword:"",group_id:0}),k=L(()=>{if(p.keyword){const _=p.keyword.toLowerCase().trim();return x.agentList.filter(t=>{const m=t.name.toLowerCase().includes(_)||t.description&&t.description.toLowerCase().includes(_);return(p.group_id===0||t.group_id===p.group_id)&&m})}else return p.group_id===0?x.agentList:x.agentList.filter(_=>_.group_id===p.group_id)}),D=()=>{h.value.hide()},I=_=>{F("select",_),D()};return(_,t)=>{const m=de,b=he,B=at,T=nt,q=ot,P=tt,U=He,O=Q("tooltip"),N=Q("permission");return c(),V(U,{ref_key:"tooltipRef",ref:h,effect:"light",trigger:"click","popper-class":["el-popper--plain",{"el-popper--m":S.value}],placement:S.value?"bottom":"top-start"},{content:l(()=>[a("div",bt,[a("div",wt,[a("div",yt,[H((c(),v("div",{class:"size-5 flex-center rounded cursor-pointer hover:bg-[#E1E2E3]",onClick:D},[n(m,null,{default:l(()=>[n(s(ue))]),_:1})])),[[O,{content:_.$t("action.close")}]])]),a("h4",xt,y(_.$t("action.find")),1)]),n(b,{size:"large",modelValue:p.keyword,"onUpdate:modelValue":t[0]||(t[0]=g=>p.keyword=g),placeholder:_.$t("action.search")+_.$t("module.agent"),"prefix-icon":s(Ne),class:"mt-4 el-input--main"},null,8,["modelValue","placeholder","prefix-icon"]),n(T,{class:"index-tabs mt-4",modelValue:p.group_id,"onUpdate:modelValue":t[1]||(t[1]=g=>p.group_id=g)},{default:l(()=>[(c(!0),v(re,null,ce(s(x).categorys,g=>(c(),V(B,{key:g.group_id,label:g.group_name,name:g.group_id},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),a("div",kt,[a("div",Et,[(c(!0),v(re,null,ce(k.value,g=>H((c(),v("div",{key:g.name,class:"flex items-center p-3 bg-[#F8F9FA] rounded-lg cursor-pointer"},[n(q,{size:36,src:g.logo,class:"mr-2"},null,8,["src"]),a("div",Ct,[a("h3",$t,y(g.name),1),a("p",St,y(g.description||"- -"),1)])])),[[N,{group_ids:g.user_group_ids,onclick:()=>{I(g)}}]])),128))]),k.value.length===0?(c(),V(P,{key:0,description:_.$t("common.no_data"),"image-size":100,image:_.$getPublicPath("/images/chat/completion_empty.png")},null,8,["description","image"])):C("",!0)])])]),default:l(()=>[ee(_.$slots,"default")]),_:3},8,["popper-class","placement"])}}}),Ft={class:"flex flex-col gap-2 mt-4"},Bt=["onClick"],Mt={class:"flex items-center gap-2"},zt={class:"flex-1 text-sm text-primary truncate"},At={class:"size-7 flex-center cursor-pointer invisible group-hover:visible"},Vt={class:"text-[#FA5151] flex-center"},Rt={class:"mt-2 text-xs text-secondary"},Dt=te({__name:"history",emits:["new"],setup(K,{expose:R,emit:F}){const x=F,h=be(),S=L(()=>h.currentConversation),r=G(!1),p=ae({editVisible:!1}),k=ae({conversation_id:0,title:""}),D=()=>{x("new"),r.value=!1},I=async()=>{await h.editConversation(k),p.editVisible=!1},_=async m=>{await ut.confirm(window.$t("chat.conversation_confirm_delete"),window.$t("action.del"),{confirmButtonText:window.$t("action.del"),cancelButtonText:window.$t("action.cancel"),type:"warning"}),h.delConversation(m)},t=(m,b)=>{m==="del"?_(b):m==="edit"&&(k.conversation_id=b.conversation_id,k.title=b.title,p.editVisible=!0)};return R({open(){r.value=!0}}),(m,b)=>{const B=qe,T=Z("svg-icon"),q=ct,P=it,U=lt,O=vt,N=he,g=Ue,j=Q("trim"),u=Q("debounce");return c(),v(re,null,[n(O,{modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=E=>r.value=E),title:m.$t("chat.history"),size:"300px"},{default:l(()=>[n(B,{class:"w-full border-none -mt-4",type:"primary",size:"large",plain:"",onClick:D},{default:l(()=>[W(" + "+y(m.$t("chat.new_conversation")),1)]),_:1}),a("div",Ft,[(c(!0),v(re,null,ce(s(h).conversations,E=>(c(),v("div",{key:E.conversation_id,class:A(["group p-3 rounded cursor-pointer hover:bg-[#F5F6FA]",[S.value.conversation_id===E.conversation_id?"bg-[#F5F6FA]":""]]),onClick:oe=>s(h).setCurrentState(E.agent_id,E.conversation_id)},[a("div",Mt,[a("div",zt,y(E.title),1),n(U,{onCommand:oe=>t(oe,E)},{dropdown:l(()=>[n(P,null,{default:l(()=>[n(q,{command:"edit"},{default:l(()=>[n(T,{name:"edit",class:"mr-1"}),W(" "+y(m.$t("action.rename")),1)]),_:1}),n(q,{command:"del"},{default:l(()=>[a("span",Vt,[n(T,{name:"del",class:"mr-1"}),W(" "+y(m.$t("action.del")),1)])]),_:1})]),_:1})]),default:l(()=>[a("div",At,[n(T,{name:"more-h"})])]),_:2},1032,["onCommand"])]),a("div",Rt,y(E.created_at),1)],10,Bt))),128))])]),_:1},8,["modelValue","title"]),n(g,{modelValue:p.editVisible,"onUpdate:modelValue":b[3]||(b[3]=E=>p.editVisible=E),title:m.$t("chat.edit_conversation"),width:"480"},{footer:l(()=>[n(B,{onClick:b[2]||(b[2]=E=>p.editVisible=!1)},{default:l(()=>[W(y(m.$t("action.cancel")),1)]),_:1}),H((c(),V(B,{type:"primary",disabled:!k.title.trim(),onClick:I},{default:l(()=>[W(y(m.$t("action.confirm")),1)]),_:1},8,["disabled"])),[[u]])]),default:l(()=>[H(n(N,{size:"large",modelValue:k.title,"onUpdate:modelValue":b[1]||(b[1]=E=>k.title=E),placeholder:m.$t("form.input_placeholder"),maxlength:20,"show-word-limit":""},null,8,["modelValue","placeholder"]),[[j]])]),_:1},8,["modelValue","title"])],64)}}}),Tt={completions(K,R){return Ie.post("/v1/chat/completions",K,R).catch(Oe)}},Pt={class:"h-full flex gap-12 bg-white relative overflow-hidden"},Nt={class:"flex-1 flex flex-col"},Ht=["title"],qt={class:"size-4"},Ut={class:"w-full mt-2 flex items-center gap-3 box-border p-6 rounded-xl overflow-hidden",style:{background:"linear-gradient(90deg, rgba(243, 249, 254, 1) 0%, rgba(247, 243, 255, 1) 100%)"}},It=["src"],Ot={class:"flex-1 flex flex-col gap-1"},jt={class:"text-xl font-semibold text-primary"},Jt={class:"text-sm text-regular break-words whitespace-pre-wrap"},Wt={class:"mt-2 mb-10"},Gt={class:"h-6 px-1 rounded flex-center cursor-pointer hover:bg-[#E1E2E3]"},Kt={class:"h-6 px-1 rounded flex-center cursor-pointer hover:bg-[#E1E2E3]"},Yt=["onClick"];const Zt={class:"flex gap-2 mb-2.5"},Qt={class:"h-8 px-2 rounded-full flex-center gap-1.5 bg-[#F1F2F3] cursor-pointer hover:bg-[#E1E2E3]"},Xt=["src"],eo={class:"text-sm text-primary"},to={class:"size-4 flex-center"},oo={class:"size-4"},so={class:"size-4"},no={key:0,class:"flex justify-center items-center my-2"},ao={key:0,class:"flex-none w-[420px] box-border relative"},ro={class:"text-xl font-semibold text-primary"},lo={class:"h-[70px] flex-center border-b relative"},io={class:"text-lg text-primary"},Bo=te({__name:"index",props:{hideMenuHeader:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},showRecommend:{type:Boolean,default:!1},useCaseFixed:{type:Boolean,default:!1},showHistory:{type:Boolean,default:!1}},setup(K,{expose:R}){const F=We(()=>Ge(()=>import("./helper-IIly1vK5.js"),__vite__mapDeps([0,1,2,3,4]))),x=be(),h=G(null),S=G(null),r=L(()=>x.currentAgent),p=L(()=>x.currentConversation),k=L(()=>x.currentAgent.custom_config_obj),D=L(()=>{var e,o,i,d;return!!((o=(e=k.value)==null?void 0:e.file_parse)!=null&&o.enable||(d=(i=k.value)==null?void 0:i.image_parse)!=null&&d.enable)}),I=L(()=>{var o,i,d,w;let e="";return(i=(o=k.value)==null?void 0:o.file_parse)!=null&&i.enable&&(e+=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.csv,.txt,.html,.json,.xml,.md"),(w=(d=k.value)==null?void 0:d.image_parse)!=null&&w.enable&&(e+=",image/*"),e}),_=L(()=>{const e=r.value.settings_obj;return!!(e.opening_statement&&e.opening_statement.replace(/\s/g,"")||e.suggested_questions&&e.suggested_questions.length&&e.suggested_questions.some(o=>o.content.replace(/\s/g,"")))}),t=ae({offset:0,limit:10,showHelper:!1,messageList:[],isStreaming:!1,isLoadingMore:!1,hasMore:!0}),m=()=>{t.showHelper=!t.showHelper},b=e=>{x.pushUsualAgent(e),x.setCurrentState(e.agent_id,0)},B=()=>{x.setCurrentState(r.value.agent_id,0)},T=async e=>{try{const o=await st.upload(e);return{id:o.data.id,url:`${Ke}/api/preview/${o.data.preview_key||""}`,size:o.data.size,name:o.data.file_name,mime_type:o.data.mime_type}}catch{return{}}},q=(e,o)=>{var M,J,z,$,f,se,le;const i=t.messageList[t.messageList.length-1];if(!((M=e.event)!=null&&M.target))return o;const d=e.event.target.response||"",w=d.substring(o),Y=d.length;try{const ie=w.split(`
`).filter(X=>X.trim()!==""&&X.trim()!=="data: [DONE]");for(const X of ie)if(X.startsWith("data: "))try{const ne=JSON.parse(X.slice(6)),pe=($=(z=(J=ne.choices)==null?void 0:J[0])==null?void 0:z.delta)==null?void 0:$.content,me=(le=(se=(f=ne.choices)==null?void 0:f[0])==null?void 0:se.delta)==null?void 0:le.reasoning_content;pe&&(i.answer+=pe),me&&(i.reasoning_content+=me)}catch(ne){console.error("解析JSON失败:",ne)}}catch(ie){console.error("处理流数据失败:",ie)}return Y},P={formatMessage:e=>{var d;const o={...e,query:""},i=JSON.parse(e.message)[0].content;try{const w=JSON.parse(i),Y=(d=w.find(M=>M.type==="text"))==null?void 0:d.content;o.query=Y,o.user_files=w.filter(M=>M.type==="image")}catch{o.query=i}return o},formatFiles:e=>(e==null?void 0:e.map(o=>({type:"image",content:`file_id:${o.id}`,filename:o.name,size:o.size,mime_type:o.mime_type,url:o.url})))||[],createNewMessage:(e,o,i,d)=>({id:Date.now(),query:e,answer:"",loading:!0,agent_id:o,conversation_id:i,reasoning_content:"",reasoning_expanded:!0,user_files:d})},U=async(e,o,i)=>{try{const w=(await dt.messasges(e,{offset:o,limit:i})).data.messages.map(P.formatMessage);return{messages:w,hasMore:w.length===i}}catch(d){return console.error("加载消息失败:",d),{messages:[],hasMore:!1}}},O=async e=>{if(t.isLoadingMore||!t.hasMore)return e();const o=p.value.conversation_id;if(o){t.isLoadingMore=!0,t.offset+=t.limit;try{const{messages:i,hasMore:d}=await U(o,t.offset,t.limit);t.hasMore=d,t.messageList.unshift(...i)}catch{t.offset=Math.max(0,t.offset-t.limit)}finally{t.isLoadingMore=!1,Ye(()=>{e()})}}},N=async()=>{const e=p.value.conversation_id;if(e){t.isLoadingMore=!0,t.offset=0,t.hasMore=!0;try{const{messages:o,hasMore:i}=await U(e,t.offset,t.limit);t.hasMore=i,t.messageList=o}finally{t.isLoadingMore=!1}}},g=async(e,o)=>{if(t.isStreaming)return;const i=r.value.agent_id,d=p.value.conversation_id,w=P.createNewMessage(e,i,d,o);t.messageList.push(w);const M=JSON.parse(r.value.configs||"{}").completion_params||{};t.isStreaming=!0,h.value=new AbortController;let J=0,z=e;o.length>0&&(z=JSON.stringify([{type:"text",content:e},...o]));try{await Tt.completions({conversation_id:d,model:"agent-"+i,messages:[{content:z,role:"user"}],frequency_penalty:0,presence_penalty:0,stream:!0,temperature:0,top_p:0,...M},{responseType:"stream",onDownloadProgress:$=>{J=q($,J)},signal:h.value.signal})}catch($){if($.message!=="canceled"){console.log($);const f=t.messageList[t.messageList.length-1];f&&!f.answer&&(f.answer=$.response.data||window.$t("response_code.network_error"))}}finally{const $=t.messageList[t.messageList.length-1];$&&($.loading=!1),t.isStreaming=!1,h.value=null}},j=(e,o)=>{Ze({group_ids:r.value.user_group_ids,onclick:async()=>{const i=r.value.agent_id;if(!i)return Qe.warning(window.$t("chat.no_available_agent"));if(!p.value.conversation_id)try{const d=await x.createConversation(i,e);x.addConversation({...d,virtual_id:p.value.virtual_id}),x.setCurrentState(d.agent_id,d.conversation_id)}catch(d){console.error("创建对话失败:",d);return}await g(e,P.formatFiles(o))}})},u=()=>{h.value&&(h.value.abort(),h.value=null),t.isStreaming=!1},E=async e=>{await g(e.query,e.user_files)},oe=e=>{j(e,[])};return ve(()=>{N()}),R({showUseCase:()=>{t.showHelper=!0},hideUseCase:()=>{t.showHelper=!1}}),(e,o)=>{const i=Z("svg-icon"),d=Z("x-bubble-assistant"),w=de,Y=Z("x-bubble-user"),M=Z("x-bubble-list"),J=Z("x-sender"),z=Q("tooltip"),$=Q("copy");return c(),v("div",Pt,[a("div",Nt,[e.hideMenuHeader?C("",!0):(c(),V(et,{key:0},{before_suffix:l(()=>[a("div",{class:"text-base text-primary line-clamp-1 max-md:flex-1 max-md:text-center",title:p.value.title||r.value.name||""},y(p.value.title||r.value.name||""),9,Ht)]),after_prefix:l(()=>[a("span",{class:"flex items-center gap-1 text-sm cursor-pointer md:hidden",onClick:o[0]||(o[0]=f=>e.$router.back())},[n(i,{name:"return",size:"18",stroke:""})])]),after_suffix:l(()=>[H((c(),v("div",{class:"h-[26px] px-2 rounded-full flex-center gap-1.5 text-sm text-primary cursor-pointer hover:bg-[#E1E2E3]",onClick:m},[a("div",qt,[n(i,{name:"layout-split",size:"18"})])])),[[z,{content:e.$t("chat.usage_guide")}]])]),_:1})),n(M,{class:"flex-1",autoScroll:!0,messages:t.messageList,mainClass:[e.showRecommend?"w-full":"w-11/12 md:w-4/5 max-w-[800px] mx-auto mt-5"],enablePullUp:"",onPullUp:O},_e({item:l(({message:f,index:se})=>[(c(),V(Y,{key:f.id+"_user",content:f.query,files:f.user_files},{menu:l(()=>[H((c(),v("div",Gt,[n(w,{color:"#9B9B9B"},{default:l(()=>[n(s(fe))]),_:1})])),[[z,{content:e.$t("action.copy")}],[$,f.query]])]),_:2},1032,["content","files"])),(c(),V(d,{key:f.id+"_assistant",content:f.answer,reasoning:f.reasoning_content,"reasoning-expanded":f.reasoning_expanded,streaming:f.loading,alwaysShowMenu:se===t.messageList.length-1},_e({_:2},[f.loading?void 0:{name:"menu",fn:l(()=>[H((c(),v("div",Kt,[n(w,{color:"#9B9B9B"},{default:l(()=>[n(s(fe))]),_:1})])),[[z,{content:e.$t("action.copy")}],[$,f.answer]]),H((c(),v("div",{class:"h-6 px-1 rounded flex-center cursor-pointer hover:bg-[#E1E2E3]",onClick:le=>E(f)},[n(w,{color:"#9B9B9B"},{default:l(()=>[n(s(je))]),_:1})],8,Yt)),[[z,{content:e.$t("chat.regenerate")}]]),C("",!0),C("",!0)]),key:"0"}]),1032,["content","reasoning","reasoning-expanded","streaming","alwaysShowMenu"]))]),_:2},[r.value.settings_obj?{name:"header",fn:l(()=>[a("div",Ut,[a("img",{class:"flex-none size-10 rounded-full overflow-hidden",src:r.value.logo},null,8,It),a("div",Ot,[a("div",jt,y(r.value.name),1),a("div",Jt,y(r.value.description),1)])]),a("div",Wt,[n(Xe,{labelPosition:"top",modelValue:r.value.user_group_ids},null,8,["modelValue"])]),_.value?(c(),V(d,{key:0,type:"welcome",content:r.value.settings_obj.opening_statement,suggestions:r.value.settings_obj.suggested_questions,onSuggestion:oe},null,8,["content","suggestions"])):C("",!0)]),key:"0"}:void 0]),1032,["messages","mainClass"]),a("div",{class:A(["py-5",[e.showRecommend?"w-full box-border":"w-11/12 md:w-4/5 max-w-[800px] mx-auto"]])},[a("div",Zt,[n(Lt,{onSelect:b},{default:l(()=>[a("div",Qt,[a("img",{class:"size-4 rounded-full",src:r.value.logo,alt:""},null,8,Xt),a("span",eo,y(r.value.name),1),a("div",to,[n(w,{color:"#333333"},{default:l(()=>[n(s(Je))]),_:1})])])]),_:1}),C("",!0),o[2]||(o[2]=a("div",{class:"flex-1"},null,-1)),e.showHistory?(c(),v("div",{key:1,class:"h-8 px-2 rounded-full flex-center gap-1.5 bg-[#F1F2F3] text-sm text-primary cursor-pointer hover:bg-[#E1E2E3]",onClick:o[1]||(o[1]=(...f)=>S.value.open&&S.value.open(...f))},[a("div",oo,[n(i,{name:"history"})]),W(" "+y(e.$t("chat.history")),1)])):C("",!0),a("div",{class:"h-8 px-2 rounded-full flex-center gap-1.5 bg-[#F1F2F3] text-sm text-primary cursor-pointer hover:bg-[#E1E2E3]",onClick:B},[a("div",so,[n(i,{name:"plus"})]),W(" "+y(e.$t("chat.new_conversation")),1)])]),n(J,{"http-request":T,"enable-upload":D.value,"accept-types":I.value,loading:t.isStreaming,onSend:j,onStop:u},null,8,["enable-upload","accept-types","loading"]),e.hideFooter?C("",!0):(c(),v("div",no,o[3]||(o[3]=[a("img",{src:ht,class:"h-[12px]"},null,-1)])))],2)]),e.showRecommend?(c(),v("div",ao,[a("h2",ro,y(e.$t("common.related_agent")),1),r.value.agent_id?(c(),V(rt,{key:0,class:"!w-full max-w-full !mt-4 !mb-0",hideFilter:"",singleRow:"",hideHeader:"",hideFooter:"",showLimit:6,excludeIds:[r.value.agent_id],transition:!1},null,8,["excludeIds"])):C("",!0)])):C("",!0),n(ge,{name:"slide"},{default:l(()=>[t.showHelper?(c(),v("div",{key:0,class:A(["border-l bg-white left-0 right-0 top-0 bottom-0 z-[10]",[e.useCaseFixed&&t.showHelper?"fixed":"absolute"]])},[a("div",lo,[a("h4",io,y(e.$t("chat.usage_guide")),1),a("div",{class:"flex-center size-6 absolute right-2 top-1/2 -translate-y-1/2 rounded cursor-pointer hover:bg-[#ECEDEE]",onClick:m},[n(w,null,{default:l(()=>[n(s(ue))]),_:1})])]),n(s(F),{agent:r.value},null,8,["agent"])],2)):C("",!0)]),_:1}),n(Dt,{ref_key:"historyRef",ref:S,onNew:B},null,512)])}}});export{Bo as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/helper-IIly1vK5.js","assets/main-rMrzitnj.js","assets/main-DHFufoST.css","assets/el-empty-B6pXs88B.js","assets/el-empty-Bln_guyL.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
