import{ai as e,aj as s,N as p,ak as c}from"./main-DwgTeXrs.js";var o=(t=>(t[t.SYSTEM=1]="SYSTEM",t[t.EXTERNAL=2]="EXTERNAL",t[t.CUSTOM=3]="CUSTOM",t))(o||{}),g=(t=>(t[t.SELF=1]="SELF",t[t.BLANK=2]="BLANK",t))(g||{});const h=[{jump_path:"/index",name:"首页",sort:9999,config:JSON.stringify({target:1,seo_title:"",seo_keywords:"",seo_description:""})},{jump_path:"/agent",name:"智能体",sort:9998,config:JSON.stringify({target:1,seo_title:"",seo_keywords:"",seo_description:""})},{jump_path:"/prompt",name:"提示词",sort:9997,config:JSON.stringify({target:1,seo_title:"",seo_keywords:"",seo_description:""})},{jump_path:"/toolkit",name:"AI工具",sort:9996,config:JSON.stringify({target:1,seo_title:"",seo_keywords:"",seo_description:""})}],r={async list(t={}){t=JSON.parse(JSON.stringify(t));let{data:n=[]}=await e.get("/api/navigations",{params:t}).catch(s);return{total:n.length,list:n}},init(){return e.post("/api/navigations/init",[...h]).catch(s)},async detail({navigation_id:t}){const{data:n={}}=await e.get(`/api/navigations/${t}`).catch(s);return n}},l=(t={})=>{try{t.config=JSON.parse(t.config)}catch{t.config={}}return t.type=+t.type||+t.config.type||o.SYSTEM,t.target=+t.target||+t.config.target||g.SELF,t.url=t.menu_path=t.jump_path=t.jump_path||"",[o.CUSTOM,o.SYSTEM].includes(t.type)&&(t.menu_path!=="/index"&&(t.menu_path=`/index${t.jump_path}`),t.url=`${location.origin}/#${t.menu_path}`),t},a=JSON.parse(localStorage.getItem("navigation_list")||"[]"),u=p("navigation",{state:()=>({navigations:a,agentNavigation:a.find(t=>t.jump_path==="/agent")||{},promptNavigation:a.find(t=>t.jump_path==="/prompt")||{},toolkitNavigation:a.find(t=>t.jump_path==="/toolkit")||{},homeNavigation:a.find(t=>t.jump_path==="/index")||{},loading:!1}),getters:{},actions:{async fetchNavigations(){const t=async()=>{this.loading=!0;const{list:i=[]}=await r.list().catch(()=>{this.loading=!1});return i.length?i:(await r.init(),this.fetchData())},n=await c.getOrFetch("navigation_list",t);return this.loading=!1,this.navigations=n.filter(i=>+i.status).map(i=>l(i)),this.agentNavigation=this.navigations.find(i=>i.jump_path==="/agent")||{},this.promptNavigation=this.navigations.find(i=>i.jump_path==="/prompt")||{},this.toolkitNavigation=this.navigations.find(i=>i.jump_path==="/toolkit")||{},this.homeNavigation=this.navigations.find(i=>i.jump_path==="/index")||{},localStorage.setItem("navigation_list",JSON.stringify(this.navigations)),this.navigations}}});export{g as N,o as a,u};
