import{an as C,av as S,aw as h,ax as b,ay as _,y as E,ak as B,r as N,N as l,a9 as P,ap as A,az as D,b as o,c as f,X as d,O as i,h as m,i as F,aj as j,a2 as q,aq as I,n as L,am as T,ar as V,C as v,F as y}from"./main-B8r1lKmx.js";const $=C({size:{type:[Number,String],values:S,default:"",validator:s=>h(s)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:b},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:_(String),default:"cover"}}),O={error:s=>s instanceof Event},U=E({name:"ElAvatar"}),X=E({...U,props:$,emits:O,setup(s,{emit:t}){const r=s,e=B("avatar"),c=N(!1),z=l(()=>{const{size:a,icon:p,shape:u}=r,n=[e.b()];return P(a)&&n.push(e.m(a)),p&&n.push(e.m("icon")),u&&n.push(e.m(u)),n}),g=l(()=>{const{size:a}=r;return h(a)?e.cssVarBlock({size:A(a)||""}):void 0}),k=l(()=>({objectFit:r.fit}));D(()=>r.src,()=>c.value=!1);function w(a){c.value=!0,t("error",a)}return(a,p)=>(o(),f("span",{class:L(i(z)),style:d(i(g))},[(a.src||a.srcSet)&&!c.value?(o(),f("img",{key:0,src:a.src,alt:a.alt,srcset:a.srcSet,style:d(i(k)),onError:w},null,44,["src","alt","srcset"])):a.icon?(o(),m(i(q),{key:1},{default:F(()=>[(o(),m(j(a.icon)))]),_:1})):I(a.$slots,"default",{key:2})],6))}});var G=T(X,[["__file","avatar.vue"]]);const J=V(G),K=s=>["",...S].includes(s),M={upload(s){const t=new FormData;return t.append("file",s),v.post("/api/upload",t).catch(y)},preview(s){return v.get(`/api/preview/${s}`).catch(y)}};export{J as E,K as i,M as u};
