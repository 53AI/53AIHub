import{d as T,u as B,a as J,r as P,b as j,c as w,o as W,e as F,f as K,g as $,h as Q,i as o,j as c,k as e,l as v,m as t,n as i,w as m,p as z,t as x,q as h,s as f,v as V,x as U,y as S,z as X,F as D,A as Y,B as C,C as Z,T as ee,E as se,D as te,_ as oe,G as ae,H as ne}from"./main-A2Vq01lO.js";import{u as le,E as re}from"./global-7Zqkv-Uz.js";import{u as ie,m as de}from"./conversation-YAZ7vKuX.js";import{u as ce}from"./enterprise-E8x0ss4L.js";const ue={class:"px-3 py-4 flex items-center gap-2"},pe=["src"],_e={class:"flex-1 overflow-y-auto"},me={class:"px-2 pb-2"},fe={class:"size-7 flex-center"},ge={class:"flex-1 text-base"},xe={class:"px-3"},he=["onClick"],ve={class:"flex-1 text-sm truncate"},be=["onClick"],ye={key:0,class:"flex flex-col gap-3 px-2 mt-1.5"},Ce={class:"size-7 flex-center"},we={class:"flex-1 text-base text-[#000000]"},ke={class:"flex flex-col gap-3 px-2 py-1.5"},Ee={class:"size-7 flex-center"},Ae={class:"flex-1 text-base"},Se={class:"size-7 flex-center"},$e={class:"flex-1 text-base text-[#000000]"},N=4,ze=T({__name:"sider",setup(I){const p=B(),b=J(),l=le(),d=ie(),k=ce(),y=P(),a=j({keyword:"",sidebarCollapsed:!1,agentCollapsed:!1,showUsualAgents:!0}),E=w(()=>{const s=a.agentCollapsed?d.usual_agents:d.usual_agents.slice(0,N);return a.keyword?s.filter(n=>n.name.toLowerCase().includes(a.keyword.toLowerCase())):s}),L=w(()=>d.currentAgent),R=w(()=>d.currentConversation);W(y,()=>{!l.siderVisible&&l.siderCollapsed&&(l.siderCollapsed=!1)});const G=()=>{a.agentCollapsed=!a.agentCollapsed},H=()=>{window.$isElectron?window.$chat53ai.$win({type:"new-tab",data:JSON.stringify({title:"AI知识库",closable:!0,ability:!1,urls:["http://ziroom.hub.53ai.com/space"]})}):window.open("http://ziroom.hub.53ai.com/space","_blank")};return de(null),F(async()=>{const s=p.query.agent_id||"",n=p.query.conversation_id||"";b.loadCategorys(),await b.loadAgentList().then(_=>{if(p.name!=="Chat")return;const u=_.find(g=>g.agent_id===+s);if(u)d.pushUsualAgent(u);else{const g=d.usual_agents[0]||_[0];g&&d.pushUsualAgent(g)}d.updateAgents(_),n||d.setCurrentState(+s,0)})}),K(()=>{d.clearCurrentState()}),(s,n)=>{const _=$("router-link"),u=$("svg-icon"),g=se,M=te,q=re,A=Q("tooltip");return o(),c(D,null,[!e(l).siderVisible&&!e(l).siderCollapsed?(o(),c("div",{key:0,class:"w-4 h-full absolute left-0 top-0 z-[2] hover:bg-gray-100/50 transition-colors",onMouseenter:n[0]||(n[0]=r=>e(l).hoverSider(!0))},null,32)):v("",!0),t("div",{ref_key:"siderRef",ref:y,class:C(["w-[280px] border-r flex flex-col bg-white transition-all duration-300 ease-linear",[{"absolute z-10 left-0 top-20 bottom-5 -translate-x-full shadow-xl rounded-r":!e(l).siderVisible,"translate-x-0":!e(l).siderVisible&&e(l).siderCollapsed}]]),onMouseleave:n[4]||(n[4]=r=>e(l).hoverSider(!1))},[t("div",ue,[i(_,{to:{name:"Home"}},{default:m(()=>[t("img",{class:"size-8 rounded",src:e(k).logo,alt:""},null,8,pe)]),_:1}),i(_,{to:{name:"Home"},class:"flex-1 text-base text-primary truncate"},{default:m(()=>[z(x(e(k).display_name),1)]),_:1}),h((o(),c("div",{class:"flex-none size-7 rounded-md flex-center cursor-pointer hover:bg-[#ECEDEE]",onClick:n[1]||(n[1]=(...r)=>e(l).toggleSider&&e(l).toggleSider(...r))},[i(u,{name:"layout-left",size:"20",color:"#9A9A9A"})])),[[A,{content:e(l).siderVisible?s.$t("chat.collapse_side_bar"):s.$t("chat.expand_side_bar")}]])]),t("div",_e,[t("div",me,[t("div",{class:"h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer hover-bg-primary-light-9 text-primary",onClick:n[2]||(n[2]=r=>a.showUsualAgents=!a.showUsualAgents)},[t("div",fe,[i(u,{size:"18",name:"chat"})]),t("p",ge,x(s.$t("module.chat")),1),i(g,null,{default:m(()=>[a.showUsualAgents?(o(),f(e(V),{key:0})):(o(),f(e(U),{key:1}))]),_:1})])]),h(t("div",xe,[i(M,{modelValue:a.keyword,"onUpdate:modelValue":n[3]||(n[3]=r=>a.keyword=r),class:"border-none",placeholder:s.$t("chat.search_placholder"),"prefix-icon":e(X),clearable:""},null,8,["modelValue","placeholder","prefix-icon"]),i(ee,{name:"list",tag:"div",class:"flex flex-col gap-1 mt-2"},{default:m(()=>[(o(!0),c(D,null,Y(E.value,r=>(o(),c("div",{key:r.agent_id,class:C(["h-9 pl-3 pr-2 rounded-md flex items-center gap-2 cursor-pointer hover:bg-[#ECEDEE] group",[L.value.agent_id===r.agent_id&&!R.value.conversation_id?"bg-primary-light-9 text-theme":"text-primary"]]),onClick:O=>e(d).setCurrentState(r.agent_id,0)},[i(q,{class:"flex-none size-6 rounded",src:r.logo},null,8,["src"]),h((o(),c("div",ve,[z(x(r.name),1)])),[[A,!0]]),h((o(),c("div",{class:"size-7 flex-center",onClick:Z(O=>e(d).toggleUsualAgentFixed(r),["stop"])},[r.is_fixed?(o(),f(u,{key:0,name:"top",color:"#2563EB"})):(o(),f(u,{key:1,name:"top",color:"#4F5052",class:"invisible group-hover:visible"}))],8,be)),[[A,{content:r.is_fixed?s.$t("action.unfixed"):s.$t("action.fixed")}],[S,!a.sidebarCollapsed]])],10,he))),128))]),_:1}),e(d).usual_agents.length>N?(o(),c("div",{key:0,class:"flex items-center gap-1 mt-3.5 cursor-pointer text-[#9A9A9A]",onClick:G},[h(t("span",{class:"text-sm"},x(a.agentCollapsed?s.$t("action.collapse"):s.$t("action.expand")),513),[[S,!a.sidebarCollapsed]]),i(g,null,{default:m(()=>[a.agentCollapsed?(o(),f(e(V),{key:0})):(o(),f(e(U),{key:1}))]),_:1})])):v("",!0)],512),[[S,a.showUsualAgents]]),s.$isElectron?(o(),c("div",ye,[i(_,{to:{name:"Discover"},class:C(["h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]",[e(p).name==="Discover"?"bg-[#ECEDEE]":""]])},{default:m(()=>[t("div",Ce,[i(u,{size:"18",name:"compass"})]),t("p",we,x(s.$t("module.find")),1)]),_:1},8,["class"])])):v("",!0),n[5]||(n[5]=t("div",{class:"mx-2 border-t mt-1.5"},null,-1)),t("div",ke,[i(_,{to:{name:"Toolbox"},class:C(["h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer text-primary hover-bg-primary-light-9",[e(p).name==="Toolbox"?"bg-primary-light-9":""]])},{default:m(()=>[t("div",Ee,[i(u,{size:"18",name:"send_plane"})]),t("p",Ae,x(s.$t("module.toolbox")),1)]),_:1},8,["class"]),s.$isElectron?(o(),c("div",{key:0,onClick:H,href:"http://ziroom.hub.53ai.com/space",target:"_blank",class:"h-9 px-2 rounded-md flex items-center gap-0.5 cursor-pointer text-[#4F5052] hover:bg-[#ECEDEE]"},[t("div",Se,[i(u,{size:"18",name:"tips"})]),t("p",$e,x(s.$t("module.library")),1)])):v("",!0)])])],34)],64)}}}),Ve=oe(ze,[["__scopeId","data-v-eb5e3eaa"]]),Ue={class:"h-screen flex"},De={class:"flex-1 overflow-y-auto"},Ie=T({__name:"index",setup(I){const p=B(),b=ae(),l=w(()=>p.name!=="Index"&&p.name!=="Profile");return F(()=>{}),(d,k)=>{const y=$("RouterView");return o(),c("div",Ue,[e(b).is_login&&l.value?(o(),f(Ve,{key:0})):v("",!0),t("main",De,[i(y,null,{default:m(({Component:a,route:E})=>[(o(),f(ne(a),{key:E.path}))]),_:1})])])}}});export{Ie as default};
