import{aU as k,aV as b,aW as _,aX as h,aw as B,az as C,B as S,aY as P,r as A,G as l,aP as D,aZ as I,am as N,c as f,b as n,h as m,q as j,I as d,u as c,w as q,au as F,Y as L,p as T,a_ as U,ai as v,aj as y}from"./main-BBgPs3nN.js";const V=k({size:{type:[Number,String],values:B,default:"",validator:s=>h(s)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:_},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:b(String),default:"cover"}}),Y={error:s=>s instanceof Event},$=S({name:"ElAvatar"}),G=S({...$,props:V,emits:Y,setup(s,{emit:t}){const r=s,e=P("avatar"),i=A(!1),E=l(()=>{const{size:a,icon:p,shape:u}=r,o=[e.b()];return D(a)&&o.push(e.m(a)),p&&o.push(e.m("icon")),u&&o.push(e.m(u)),o}),g=l(()=>{const{size:a}=r;return h(a)?e.cssVarBlock({size:I(a)||""}):void 0}),z=l(()=>({objectFit:r.fit}));N(()=>r.src,()=>i.value=!1);function w(a){i.value=!0,t("error",a)}return(a,p)=>(n(),f("span",{class:T(c(E)),style:d(c(g))},[(a.src||a.srcSet)&&!i.value?(n(),f("img",{key:0,src:a.src,alt:a.alt,srcset:a.srcSet,style:d(c(z)),onError:w},null,44,["src","alt","srcset"])):a.icon?(n(),m(c(L),{key:1},{default:q(()=>[(n(),m(F(a.icon)))]),_:1})):j(a.$slots,"default",{key:2})],6))}});var W=C(G,[["__file","avatar.vue"]]);const Z=U(W),H={upload(s){const t=new FormData;return t.append("file",s),v.post("/api/upload",t).catch(y)},preview(s){return v.get(`/api/preview/${s}`).catch(y)}};export{Z as E,H as u};
