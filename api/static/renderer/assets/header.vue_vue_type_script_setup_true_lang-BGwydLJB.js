import{B as q,Q as G,C as R,r as y,o as O,R as C,U as $,a as H,c,b as l,p as A,d as o,f as n,q as m,k as h,e as u,u as t,V as B,W as z,w as d,X as J,Y as S,F as Q,h as F,Z as W,$ as X,t as r,s as Y,a0 as U,a1 as Z,a2 as K,a3 as ee,a4 as oe,a5 as te,n as se,a6 as ne}from"./main-BkqrklTl.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{E as ae}from"./el-image-viewer-BGyL1NfI.js";import{useEnterpriseStore as ie}from"./enterprise-DwbAl3jb.js";import{u as re}from"./global-DJriCW9S.js";const le={class:"flex-1 flex items-center gap-2 overflow-hidden"},ce={class:"flex items-center gap-2"},de={class:"w-[300px] p-4 flex items-center gap-2"},pe={class:"flex-1 overflow-hidden"},ue={class:"w-full flex items-center gap-1 overflow-hidden"},fe={class:"flex-1 text-sm text-primary font-medium truncate"},me=["title"],_e=["src"],ge={class:"max-w-[5em] truncate"},he=["src"],ve={class:"text-xs text-[#9A9A9A]"},xe={class:"flex flex-col gap-1.5 px-3 py-1.5 border-t"},Ee={class:"flex-center size-6"},be={class:"text-sm"},ke={class:"flex-center size-6"},we={class:"text-sm"},ye={href:"https://docs.53ai.com/%E5%85%A5%E9%97%A8/%E6%AC%A2%E8%BF%8E%E4%BD%BF%E7%94%A8",target:"_blank",class:"h-8 px-3 flex items-center gap-2 rounded cursor-pointer text-primary hover:bg-[#ECEDEE]"},Ce={class:"flex-center size-6"},$e={class:"text-sm"},Ae={href:"https://docs.53ai.com/%E7%A4%BE%E5%8C%BA/%E9%9C%80%E6%B1%82%E6%94%AF%E6%8C%81",target:"_blank",class:"h-8 px-3 flex items-center gap-2 rounded cursor-pointer text-primary hover:bg-[#ECEDEE]"},Be={class:"flex-center size-6"},ze={class:"text-sm"},Se={class:"flex flex-col gap-1.5 px-3 py-1.5 border-t"},Fe={class:"flex-center size-6"},Ue={class:"text-sm"},De={class:"flex items-center gap-1.5 cursor-pointer max-md:hidden"},je=q({__name:"header",props:{needLogin:{type:Boolean,default:!0},mainClass:{default:""},siderButton:{type:Boolean,default:!0},type:{},sticky:{type:Boolean},hideUser:{type:Boolean},back:{type:Boolean,default:!0}},setup(Ie){const{locale:D}=G(),s=R(),_=re(),v=ie(),p=y(null),x=y(!1),E=()=>{ee().open()},I=()=>{const e=window.location.host;e.includes("hub.53ai.com"),e.includes("53ai.com");const a=`${oe}?access_token=${s.info.access_token}&eid=${s.info.eid}&from_origin=${encodeURIComponent(location.origin)}`;console.info("adminUrl: ",a),window.open(a,"_blank")},L=()=>{s.logout(),te.success(window.$t("status.logout_success"))},g=async()=>{if(!s.info.access_token)return Promise.resolve();await se(),p.value&&(x.value=await p.value.validateUpgrade())},b=e=>{D.value=e,ne.setLang(e)};return v.loadFromStorage().then(e=>{b(e.language)}),O(async()=>{await v.loadInfo().then(e=>{b(e.language)}),await g(),C.on($.LOGIN_SUCCESS,g),window.$chat53ai&&window.$chat53ai.$on("agenthub:service",(e,{type:i,data:a}={})=>{console.log(i,a),i==="login"&&E()})}),H(()=>{C.off($.LOGIN_SUCCESS,g)}),(e,i)=>{const a=z("svg-icon"),N=S,k=ae,V=z("router-link"),M=S,P=W,T=Z,w=B("tooltip"),j=B("debounce");return l(),c("header",{class:A(["flex-none h-[70px] border-b",[e.type==="homepage"?"nav-bg":"bg-white",e.sticky?"sticky left-0 top-0 z-[9]":""]])},[o("div",{class:A(["mx-auto px-4 flex items-center justify-between h-full",e.mainClass])},[o("div",le,[m(e.$slots,"before_prefix"),e.siderButton&&!t(_).siderVisible?h((l(),c("div",{key:0,class:"flex-none size-7 rounded-md flex-center cursor-pointer hover:bg-[#ECEDEE]",onClick:i[0]||(i[0]=(...f)=>t(_).toggleSider&&t(_).toggleSider(...f))},[n(a,{name:"layout-left",size:"20",color:"#9A9A9A"})])),[[w,{content:e.$t("chat.expand_side_bar")}]]):u("",!0),e.back?h((l(),c("div",{key:1,class:"flex-none size-7 rounded-md flex-center cursor-pointer max-md:hidden hover:bg-[#ECEDEE]",onClick:i[1]||(i[1]=f=>e.$router.back())},[n(N,{class:"text-regular cursor-pointer",size:"14"},{default:d(()=>[n(t(J))]),_:1})])),[[w,{content:e.$t("common.back")}]]):u("",!0),m(e.$slots,"before_suffix")]),o("div",ce,[m(e.$slots,"after_prefix"),!e.$isElectron&&!e.hideUser?(l(),c(Q,{key:0},[t(s).is_login?(l(),F(P,{key:0,effect:"light","popper-class":"el-popper--plain",placement:"bottom-end"},{content:d(()=>[o("div",de,[n(k,{class:"flex-none size-10 rounded-full",src:t(s).info.avatar},null,8,["src"]),o("div",pe,[o("div",ue,[o("p",fe,r(t(s).info.nickname),1),o("div",{class:"h-6 flex-center gap-1 bg-[#F7F7F7] rounded-full px-2 text-xs text-placeholder whitespace-nowrap",title:t(s).info.group_name},[o("img",{src:/\.png$/.test(t(s).info.group_icon)?t(s).info.group_icon:e.$getPublicPath(`/images/subscription/${t(s).info.group_icon}.png`),class:"w-4 h-4 object-cover"},null,8,_e),o("p",ge,r(t(s).info.group_name),1)],8,me),x.value?(l(),c("div",{key:0,class:"flex items-center gap-1 ml-auto cursor-pointer hover:opacity-70 bg-[#F4F0FF] rounded-2xl h-6 px-2 box-border text-xs text-[#8E5EFF] whitespace-nowrap",onClick:i[2]||(i[2]=Y((...f)=>p.value.open&&p.value.open(...f),["stop"]))},[o("img",{src:e.$getPublicPath("/images/subscription/upgrade.png"),class:"w-4 h-4 object-cover"},null,8,he),U(" "+r(e.$t("subscription.upgrade")),1)])):u("",!0)]),o("div",ve,r(t(s).info.email),1)])]),o("div",xe,[n(V,{to:{name:"Profile"},class:"h-8 px-3 flex items-center gap-2 rounded cursor-pointer hover:bg-[#ECEDEE] text-primary"},{default:d(()=>[o("div",Ee,[n(a,{name:"setting",size:"16"})]),o("span",be,r(e.$t("action.setting")),1)]),_:1}),t(s).info.role>1?(l(),c("div",{key:0,class:"h-8 px-3 flex items-center gap-2 rounded cursor-pointer hover:bg-[#ECEDEE] text-primary",onClick:I},[o("div",ke,[n(a,{name:"jump",size:"16"})]),o("span",we,r(e.$t("common.go_admin")),1)])):u("",!0),o("a",ye,[o("div",Ce,[n(a,{name:"toolkit",size:"16",stroke:""})]),o("span",$e,r(e.$t("common.new_friend")),1)]),o("a",Ae,[o("div",Be,[n(a,{name:"help",size:"16"})]),o("span",ze,r(e.$t("common.help_feedback")),1)])]),o("div",Se,[h((l(),c("div",{class:"h-8 px-3 flex items-center gap-2 rounded cursor-pointer hover:bg-[#ECEDEE] text-primary",onClick:L},[o("div",Fe,[n(a,{name:"quit",size:"14"})]),o("span",Ue,r(e.$t("login.quit")),1)])),[[j]])])]),default:d(()=>[o("div",De,[n(k,{class:"size-[26px] rounded-full",src:t(s).info.avatar},null,8,["src"]),n(M,{color:"#A4A4AD"},{default:d(()=>[n(t(X))]),_:1})])]),_:1})):(l(),F(T,{key:1,type:"primary",onClick:E},{default:d(()=>[U(r(e.$t("action.login")),1)]),_:1}))],64)):u("",!0),m(e.$slots,"after_suffix")])],2),n(K,{ref_key:"upgrade_ref",ref:p},null,512)],2)}}});export{je as _};
