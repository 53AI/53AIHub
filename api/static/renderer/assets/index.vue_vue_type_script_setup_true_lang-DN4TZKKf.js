import{B as L,C as I,E as N,G as g,r as y,o as z,c as _,b as a,h,e as H,k as A,f as r,w as v,d as s,H as O,t as U,u as x,I as M,J as b,p as j,F as q,K as D,L as F,M as G,N as J}from"./main-rMrzitnj.js";import{E as K,a as P}from"./el-tab-pane-CWT3dWDV.js";import{_ as X}from"./el-empty-B6pXs88B.js";import{_ as Q}from"./header.vue_vue_type_script_setup_true_lang-DPdmbbEj.js";import{_ as W}from"./m-footer.vue_vue_type_script_setup_true_lang--GH4gBVN.js";import{T as Y}from"./list-DyLv7FDr.js";import{u as Z}from"./links-DmIn7l7V.js";import{u as ee}from"./navigation-B33KJ0Ar.js";const oe={class:"text-base text-primary font-bold line-clamp-1 max-md:flex-1 max-md:text-center"},te={class:"w-11/12 lg:w-4/5 mx-auto"},ue=L({__name:"index",props:{hideHeader:{type:Boolean,default:!1},onlyAll:{type:Boolean,default:!1},stickyOffset:{default:70}},setup(w){const c=w,C=I(),n=Z(),S=ee(),t=N({group_id:0,keyword:""}),i=g(()=>c.hideHeader||C.is_login?c.stickyOffset:0),u=y(!1),V=g(()=>n.categorys.filter(e=>(e.group_id===0,!0))),R=g(()=>n.links.filter(o=>t.group_id===0?!0:o.group_id===t.group_id)),$=y(),k=J("mainScrollRef"),B=()=>{const o=`#group_${t.group_id}`,e=k?k.value:document.querySelector("main"),d=e.querySelector(o);if(d){const p=e.getBoundingClientRect(),m=d.getBoundingClientRect(),f=e.scrollTop+m.top-p.top-(i.value+150);e.scrollTo({top:Math.max(0,f),behavior:"smooth"})}},T=y();return z(()=>{u.value=!0,n.loadCategorys(),n.loadLinks().finally(()=>{u.value=!1})}),(o,e)=>{const d=O("svg-icon"),p=P,m=K,f=G,E=M;return a(),_("div",null,[o.hideHeader?H("",!0):(a(),h(Q,{key:0,sticky:""},{before_suffix:v(()=>[s("div",oe,U(x(S).toolkitNavigation.name||o.$t("module.toolbox")),1)]),after_prefix:v(()=>[s("span",{class:"flex items-center gap-1 text-sm cursor-pointer md:hidden",onClick:e[0]||(e[0]=l=>o.$router.back())},[r(d,{name:"return",size:"18",stroke:""})])]),_:1})),A((a(),_("div",{ref_key:"scrollRef",ref:$,class:"pb-6 box-border",style:b({height:(o.hideHeader,"100%")})},[s("div",te,[s("div",{ref_key:"headerRef",ref:T,class:j(["left-0 z-[2] sticky top-0 bg-white flex md:flex-row flex-col-reverse gap-5 items-stretch md:items-center justify-between py-6 md:py-8 px-[16px] box-border rounded-[4px] overflow-hidden",[i.value?"":"lg:py-10"]]),style:b([{top:i.value?i.value+"px":"0"},{width:"calc(100% + 32px)",transform:"translateX(-16px)"}])},[r(m,{modelValue:t.group_id,"onUpdate:modelValue":e[1]||(e[1]=l=>t.group_id=l),class:"index-tabs flex-1 overflow-hidden",style:{"--el-tabs-header-height":"36px"},onTabClick:B},{default:v(()=>[(a(!0),_(q,null,D(V.value,l=>(a(),h(p,{key:l.group_name,label:l.group_name,name:l.group_id},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),s("div",null,[r(X,{class:"hidden md:flex",modelValue:t.keyword,"onUpdate:modelValue":e[2]||(e[2]=l=>t.keyword=l),placeholder:o.$t("action.search")+o.$t("module.prompt")},null,8,["modelValue","placeholder"]),r(f,{modelValue:t.keyword,"onUpdate:modelValue":e[3]||(e[3]=l=>t.keyword=l),size:"large",class:"w-full md:hidden el-input--main",placeholder:o.$t("toolbox.search_placeholder"),"prefix-icon":x(F)},null,8,["modelValue","placeholder","prefix-icon"])])],6),r(Y,{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-5",keyword:t.keyword,list:R.value,groupId:t.group_id,onlyAll:o.onlyAll},null,8,["keyword","list","groupId","onlyAll"])])],4)),[[E,u.value]]),r(W)])}}});export{ue as _};
