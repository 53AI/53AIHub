import{an as b,av as C,aw as B,ax as S,ay as h,ak as P,B as E,al as _,r as D,P as l,a9 as j,ap as A,az as I,c as f,b as o,i as d,aq as N,D as m,R as i,j as q,aj as F,a3 as L,n as T,ar as V,G as v,I as y}from"./main-aAIm056l.js";const $=b({size:{type:[Number,String],values:h,default:"",validator:s=>S(s)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:B},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:C(String),default:"cover"}}),G={error:s=>s instanceof Event},R=E({name:"ElAvatar"}),U=E({...R,props:$,emits:G,setup(s,{emit:t}){const r=s,e=_("avatar"),c=D(!1),z=l(()=>{const{size:a,icon:p,shape:u}=r,n=[e.b()];return j(a)&&n.push(e.m(a)),p&&n.push(e.m("icon")),u&&n.push(e.m(u)),n}),g=l(()=>{const{size:a}=r;return S(a)?e.cssVarBlock({size:A(a)||""}):void 0}),k=l(()=>({objectFit:r.fit}));I(()=>r.src,()=>c.value=!1);function w(a){c.value=!0,t("error",a)}return(a,p)=>(o(),f("span",{class:T(i(z)),style:m(i(g))},[(a.src||a.srcSet)&&!c.value?(o(),f("img",{key:0,src:a.src,alt:a.alt,srcset:a.srcSet,style:m(i(k)),onError:w},null,44,["src","alt","srcset"])):a.icon?(o(),d(i(L),{key:1},{default:q(()=>[(o(),d(F(a.icon)))]),_:1})):N(a.$slots,"default",{key:2})],6))}});var H=P(U,[["__file","avatar.vue"]]);const K=V(H),M=s=>["",...h].includes(s),O={upload(s){const t=new FormData;return t.append("file",s),v.post("/api/upload",t).catch(y)},preview(s){return v.get(`/api/preview/${s}`).catch(y)}};export{K as E,M as i,O as u};
