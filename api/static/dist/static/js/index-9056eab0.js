import { E as X, b as Z, S as ee, e as oe, f as ne, v as le, a as te, K as ae, L as se, M as ie, c as re, d as ue, F as de, G as ce, D as pe, A as _e, y as me } from "./element-plus-c72880c6.js";
import { _ as fe } from "./index-62cbccec.js";
import { e as B, d as he, l as ge, _ as be, f as ye } from "./index-76ebd052.js";
import { _ as ve } from "./index.vue_vue_type_script_setup_true_lang-9a63c23d.js";
import { F as xe, y as we } from "./@element-plus-0cfad8bb.js";
import { s as M } from "./subscription-f79ebaa0.js";
import { d as Ee, e as m, i as $e, D as Ve, o as r, J as v, K as a, M as n, a as i, P as c, S as Ce, c as d, ac as f, H as _, u as I, G as A, a2 as H, I as x } from "./@vue-3b855f7b.js";
import "./dayjs-b67ba5b3.js";
import "./cssfilter-476ae7ee.js";
import "./lodash-es-fadd064a.js";
import "./@vueuse-7fa053fd.js";
import "./@popperjs-c45de710.js";
import "./async-validator-7f96df71.js";
import "./@ctrl-f8748455.js";
import "./normalize-wheel-es-ed76fb12.js";
import "./pinia-6f4b1ece.js";
import "./vue-demi-71ba0ef2.js";
import "./axios-8e4517c3.js";
import "./vue-i18n-b5fa020c.js";
import "./@intlify-bab9fd84.js";
import "./vue-router-2f60a71a.js";
const Fe = { class: "flex-1 h-0 flex flex-col bg-white p-6 mt-3 box-border" }, ke = { class: "h-full max-h-[calc(100vh-230px)] flex flex-col overflow-auto pr-1 box-border" }, Ie = { class: "flex-none text-sm text-[#4F5052]" }, De = { class: "flex-1 h-0 mt-6 pb-1 pr-1 overflow-auto" }, Ue = { class: "w-full flex items-center gap-2.5" }, ze = ["src"], Se = ["src"], Ke = { class: "w-full flex items-center gap-2" }, Ne = { class: "flex-none text-sm text-[#1D1E1F]" }, Be = { class: "mt-3 w-full flex items-center gap-2" }, Me = { class: "flex-none text-sm text-[#1D1E1F]" }, Ae = { class: "w-full flex items-center gap-2" }, He = { class: "flex-none text-sm text-[#1D1E1F]" }, je = ["src"], Le = { class: "flex-1 truncate text-sm text-[#4F5052]" }, Oe = { class: "flex items-center gap-1" }, Re = { class: "flex flex-wrap items-center gap-2" }, Ye = Ee({ __name: "index", setup(Ge) {
  const D = m(), w = m(false), u = m([]), U = m([{ value: "CNY", label: "CNY" }, { value: "USD", label: "USD" }]);
  m([{ icon: "advanced-bot", label: "\u9500\u552E\u4FC3\u5355\u5B9E\u6218\u6F14\u7EC3", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u5C0F\u7EA2\u4E66\u7206\u6B3E\u6587\u6848\u751F\u6210", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u5C3D\u8C03\u52A9\u624B", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u4E16\u754C500\u5F3A\u4F01\u4E1A\u5206\u6790", includes: ["flagship"] }, { icon: "advanced-bot", label: "\u5BA2\u6237\u6316\u6398\u52A9\u7406", includes: ["flagship"] }]), $e(async () => {
    h(), B.on("user-login-success", h);
  }), Ve(() => {
    B.off("user-login-success", h);
  });
  let E = [];
  const h = async () => {
    w.value = true, E = await M.list().finally(() => {
      w.value = false;
    }), u.value = [...E];
  }, j = () => {
    const e = he(E[0]);
    e.delete = false, e.group_id = 0, e.setting_id = 0, e.sort = 0, e.group_name = "", e.logo_url = `vip-${u.value.length + 1}`, e.ai_enabled = false, e.relations = [], e.year_info.amount = "0.00", e.year_info.currency = "CNY", e.year_info.relation_id = 0, e.year_info.time_unit = "year", e.year_info.type = 1, e.month_info.amount = "0.00", e.month_info.currency = "CNY", e.month_info.relation_id = 0, e.month_info.time_unit = "month", e.month_info.type = 1, e.point_month_info.amount = "0", e.point_month_info.currency = "", e.point_month_info.relation_id = 0, e.point_month_info.time_unit = "month", e.point_month_info.type = 2, e.agents = [], u.value.push(e);
  };
  let g = [];
  const L = async ({ data: e = {}, index: s = 0 } = {}) => {
    e.group_id && await te.confirm(window.$t("module.subscription_delete_confirm")), e.delete = true, e.group_id && g.push(e), u.value.splice(s, 1);
  }, O = (e = "", s) => {
    s.logo_url = `vip-${e}`;
  }, $ = ({ type: e = "" } = {}) => {
  }, R = () => {
    D.value.validate(async (e) => {
      if (!e)
        return;
      const s = u.value.map((t = {}, V) => ({ delete: false, group_id: t.group_id || 0, setting_id: t.setting_id || 0, ai_enabled: !!+t.ai_enabled, sort: u.value.length - V, group_name: t.group_name || "", logo_url: t.logo_url || "", relations: [{ amount: Math.round(t.year_info.amount * 1e4) / 100, currency: t.year_info.currency, relation_id: t.year_info.relation_id || 0, time_unit: t.year_info.time_unit, type: t.year_info.type }, { amount: Math.round(t.month_info.amount * 1e4) / 100, currency: t.month_info.currency, relation_id: t.month_info.relation_id || 0, time_unit: t.month_info.time_unit, type: t.month_info.type }, { amount: Number(t.point_month_info.amount || 0), currency: t.point_month_info.currency, relation_id: t.point_month_info.relation_id || 0, time_unit: t.point_month_info.time_unit, type: t.point_month_info.type }] }));
      g.length && (s.push(...g), g = []), await M.save({ data: { items: s } }), X.success(window.$t("action_save_success")), h();
    });
  };
  return (e, s) => {
    const t = ve, V = ae, z = se, Y = ie, G = re, p = ue, S = Z, K = de, N = ce, C = pe, F = ee, b = be, P = _e, T = me, y = oe, q = ne, J = fe, W = le;
    return r(), v(J, { class: "px-[60px] py-8" }, { default: a(() => [n(t, { title: e.$t("module.subscription") }, null, 8, ["title"]), i("div", Fe, [i("div", ke, [i("h1", Ie, c(e.$t("module.subscription_header_title")), 1), i("div", De, [Ce((r(), v(q, { ref_key: "form_ref", ref: D, class: "flex gap-4", model: u.value, "label-position": "top" }, { default: a(() => [(r(true), d(_, null, f(u.value, (l, k) => (r(), d("div", { key: k, class: "flex-none w-[334px] bg-[#F9F9FC] p-4 box-border" }, [n(p, null, { default: a(() => [i("div", Ue, [n(Y, { placement: "bottom", trigger: "click", onCommand: (o) => O(o, l) }, { dropdown: a(() => [n(z, null, { default: a(() => [(r(), d(_, null, f([1, 2, 3, 4, 5], (o) => n(V, { key: o, command: o }, { default: a(() => [i("img", { src: e.$getRealPath({ url: `/images/subscription/vip-${o}.png` }), class: "w-[36px] h-[36px] object-cover" }, null, 8, Se)]), _: 2 }, 1032, ["command"])), 64))]), _: 1 })]), default: a(() => [i("img", { src: /\.png$/.test(l.logo_url) ? l.logo_url : e.$getRealPath({ url: `/images/subscription/${l.logo_url}.png` }), class: "flex-none w-[36px] h-[36px] object-cover" }, null, 8, ze)]), _: 2 }, 1032, ["onCommand"]), n(p, { class: "flex-1", prop: `${k}.group_name`, rules: I(ge)({ message: "form_input_placeholder" }) }, { default: a(() => [n(G, { modelValue: l.group_name, "onUpdate:modelValue": (o) => l.group_name = o, size: "large", placeholder: e.$t("form_input_placeholder"), "show-word-limit": "", maxlength: "10" }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder"])]), _: 2 }, 1032, ["prop", "rules"]), n(S, { class: x(["flex-none cursor-pointer", [u.value.length < 2 ? "invisible" : ""]]), size: "16", color: "#F04F4D", onClick: (o) => L({ data: l, index: k }) }, { default: a(() => [n(I(xe))]), _: 2 }, 1032, ["class", "onClick"])])]), _: 2 }, 1024), n(p, { label: e.$t("module.subscription_charge") }, { default: a(() => [i("div", Ke, [n(N, { class: "flex-none !w-[86px]", size: "large", modelValue: l.year_info.currency, "onUpdate:modelValue": (o) => l.year_info.currency = o }, { default: a(() => [(r(true), d(_, null, f(U.value, (o) => (r(), v(K, { key: o.value, label: o.label, value: o.value }, null, 8, ["label", "value"]))), 128))]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue"]), n(C, { class: "charge-price-input flex-1", modelValue: l.year_info.amount, "onUpdate:modelValue": (o) => l.year_info.amount = o, size: "large", controls: false, precision: 2, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), i("div", Ne, "/" + c(e.$t("yearly")), 1)]), i("div", Be, [n(N, { class: "flex-none !w-[86px]", size: "large", modelValue: l.month_info.currency, "onUpdate:modelValue": (o) => l.month_info.currency = o }, { default: a(() => [(r(true), d(_, null, f(U.value, (o) => (r(), v(K, { key: o.value, label: o.label, value: o.value }, null, 8, ["label", "value"]))), 128))]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue"]), n(C, { class: "charge-price-input flex-1", modelValue: l.month_info.amount, "onUpdate:modelValue": (o) => l.month_info.amount = o, size: "large", controls: false, precision: 2, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), i("div", Me, "/" + c(e.$t("monthly")), 1)])]), _: 2 }, 1032, ["label"]), n(p, { label: e.$t("module.subscription_points") }, { default: a(() => [i("div", Ae, [n(C, { class: "charge-point-input flex-1", modelValue: l.point_month_info.amount, "onUpdate:modelValue": (o) => l.point_month_info.amount = o, size: "large", controls: false, precision: 0, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), i("div", He, "/" + c(e.$t("monthly")), 1)])]), _: 2 }, 1032, ["label"]), n(F), l.agents && l.agents.length ? (r(), d(_, { key: 0 }, [n(p, { class: "!mb-0", label: e.$t("module.subscription_agent_bots") }, { default: a(() => [(r(true), d(_, null, f(l.agents, (o, Q) => (r(), d("div", { key: Q, class: "w-full flex items-center gap-2 mb-3" }, [i("img", { src: o.logo, class: "flex-none w-[18px] h-[18px] object-contain rounded-full overflow-hidden" }, null, 8, je), i("div", Le, c(o.name), 1)]))), 128))]), _: 2 }, 1032, ["label"]), n(F)], 64)) : A("", true), n(p, { class: "!mb-0" }, { label: a(() => [i("div", Oe, [H(c(e.$t("module.subscription_ai_assistant")) + " ", 1), n(P, { content: e.$t("module.subscription_ai_assistant_tip"), placement: "bottom" }, { default: a(() => [n(b, { class: "flex-none", name: "question", color: "#A0A7B8", width: "14", height: "14" })]), _: 1 }, 8, ["content"]), s[3] || (s[3] = i("div", { class: "flex-1" }, null, -1)), n(T, { class: "ml-2", modelValue: l.ai_enabled, "onUpdate:modelValue": (o) => l.ai_enabled = o, size: "small" }, null, 8, ["modelValue", "onUpdate:modelValue"])])]), default: a(() => [i("div", Re, [n(y, { class: "!p-2", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: s[0] || (s[0] = (o) => $({ type: "windows" })) }, { default: a(() => [n(b, { class: x(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "windows", width: "14", height: "14" }, null, 8, ["class"]), s[4] || (s[4] = i("span", { class: "text-xs" }, "Windows", -1))]), _: 2 }, 1032, ["disabled"]), n(y, { class: "!p-2 !ml-0", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: s[1] || (s[1] = (o) => $({ type: "ios" })) }, { default: a(() => [n(b, { class: x(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "ios", width: "14", height: "14" }, null, 8, ["class"]), s[5] || (s[5] = i("span", { class: "text-xs" }, "macOS", -1))]), _: 2 }, 1032, ["disabled"]), n(y, { class: "!p-2 !ml-0", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: s[2] || (s[2] = (o) => $({ type: "chrome" })) }, { default: a(() => [n(b, { class: x(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "chrome", width: "14", height: "14" }, null, 8, ["class"]), s[6] || (s[6] = i("span", { class: "text-xs" }, "Google", -1))]), _: 2 }, 1032, ["disabled"])])]), _: 2 }, 1024)]))), 128)), u.value.length < 5 ? (r(), d("div", { key: 0, class: "flex-none w-[334px] bg-[#F9F9FC] flex items-center justify-center p-4 box-border cursor-pointer hover:opacity-70", onClick: j }, [n(S, { size: "16", color: "#4F5052" }, { default: a(() => [n(I(we))]), _: 1 })])) : A("", true)]), _: 1 }, 8, ["model"])), [[W, w.value]])])]), n(F), n(y, { class: "h-[36px] w-[96px]", type: "primary", size: "large", onClick: R }, { default: a(() => [H(c(e.$t("action_save")), 1)]), _: 1 })])]), _: 1 });
  };
} });
const mo = ye(Ye, [["__scopeId", "data-v-ed24e312"]]);
export {
  mo as default
};
