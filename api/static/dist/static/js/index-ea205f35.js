import { y as Z, r as m, o as ee, N as A, a as oe, j as v, w as a, b as r, f as n, d as s, t as c, m as ne, c as d, K as f, F as _, u as w, aA as z, al as le, q as x, a8 as te, e as M, L as j, aB as ae, ai as se, ab as ie, a9 as re, a5 as ue, ag as de, G as ce, R as pe, az as _e, a4 as me, ah as fe, I as he } from "./index-8579fe4a.js";
import { v as ge } from "./el-loading-8747b309.js";
import { _ as be } from "./index-ad57f5b2.js";
import { E as ye } from "./el-switch-1a77f9ca.js";
import { E as ve } from "./el-divider-7d014453.js";
import { E as we } from "./el-input-number-310bd679.js";
import "./el-tag-0b6baecb.js";
import { E as xe, a as Ee } from "./el-select-8a770a23.js";
import "./el-scrollbar-4065fe54.js";
import { E as Ve, a as $e, b as Fe } from "./el-dropdown-menu-ce96a192.js";
import "./el-dropdown-item-4ed993c7.js";
import { _ as ke } from "./index.vue_vue_type_script_setup_true_lang-e4a54f30.js";
import { s as H } from "./subscription-ce932ddf.js";
import "./index-ede470e7.js";
import "./isEqual-8c73ec38.js";
import "./debounce-484109dd.js";
import "./dropdown-85221e0a.js";
const Ce = { class: "flex flex-col bg-white px-6 pt-6 box-border" }, Ie = { class: "flex-none text-sm text-[#4F5052]" }, ze = { class: "overflow-x-auto" }, Ue = { class: "w-full flex items-center gap-2.5" }, De = ["src"], Ne = ["src"], Be = { class: "w-full flex items-center gap-2" }, Ke = { class: "flex-none text-sm text-[#1D1E1F]" }, Se = { class: "mt-3 w-full flex items-center gap-2" }, Ae = { class: "flex-none text-sm text-[#1D1E1F]" }, Me = { class: "w-full flex items-center gap-2" }, je = { class: "flex-none text-sm text-[#1D1E1F]" }, He = ["src"], Le = { class: "flex-1 truncate text-sm text-[#4F5052]" }, Oe = { class: "flex items-center gap-1" }, Re = { class: "flex flex-wrap items-center gap-2" }, Ye = { class: "sticky bottom-0 left-0 right-0 z-10 bg-[#F6F7F8] pb-8 box-border" }, Te = { class: "bg-white px-6 pt-2 pb-6" }, qe = Z({ __name: "index", setup(Ge) {
  const U = m(), E = m(false), u = m([]), D = m([{ value: "CNY", label: "CNY" }, { value: "USD", label: "USD" }]);
  m([{ icon: "advanced-bot", label: "\u9500\u552E\u4FC3\u5355\u5B9E\u6218\u6F14\u7EC3", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u5C0F\u7EA2\u4E66\u7206\u6B3E\u6587\u6848\u751F\u6210", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u5C3D\u8C03\u52A9\u624B", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u4E16\u754C500\u5F3A\u4F01\u4E1A\u5206\u6790", includes: ["flagship"] }, { icon: "advanced-bot", label: "\u5BA2\u6237\u6316\u6398\u52A9\u7406", includes: ["flagship"] }]), ee(async () => {
    h(), A.on("user-login-success", h);
  }), oe(() => {
    A.off("user-login-success", h);
  });
  let V = [];
  const h = async () => {
    E.value = true, V = await H.list().finally(() => {
      E.value = false;
    }), u.value = [...V];
  }, L = () => {
    const e = se(V[0]);
    e.delete = false, e.group_id = 0, e.setting_id = 0, e.sort = 0, e.group_name = "", e.logo_url = z + `/subscription/vip-${u.value.length + 1}.png`, e.ai_enabled = false, e.relations = [], e.year_info.amount = "0.00", e.year_info.currency = "CNY", e.year_info.relation_id = 0, e.year_info.time_unit = "year", e.year_info.type = 1, e.month_info.amount = "0.00", e.month_info.currency = "CNY", e.month_info.relation_id = 0, e.month_info.time_unit = "month", e.month_info.type = 1, e.point_month_info.amount = "0", e.point_month_info.currency = "", e.point_month_info.relation_id = 0, e.point_month_info.time_unit = "month", e.point_month_info.type = 2, e.agents = [], u.value.push(e);
  };
  let g = [];
  const O = async ({ data: e = {}, index: i = 0 } = {}) => {
    e.group_id && await ie.confirm(window.$t("module.subscription_delete_confirm")), e.delete = true, e.group_id && g.push(e), u.value.splice(i, 1);
  }, R = (e = "", i) => {
    i.logo_url = z + `/subscription/vip-${e}.png`;
  }, $ = ({ type: e = "" } = {}) => {
  }, Y = () => {
    U.value.validate(async (e) => {
      if (!e)
        return;
      const i = u.value.map((t = {}, F) => ({ delete: false, group_id: t.group_id || 0, setting_id: t.setting_id || 0, ai_enabled: !!+t.ai_enabled, sort: u.value.length - F, group_name: t.group_name || "", logo_url: t.logo_url || "", relations: [{ amount: Math.round(t.year_info.amount * 1e4) / 100, currency: t.year_info.currency, relation_id: t.year_info.relation_id || 0, time_unit: t.year_info.time_unit, type: t.year_info.type }, { amount: Math.round(t.month_info.amount * 1e4) / 100, currency: t.month_info.currency, relation_id: t.month_info.relation_id || 0, time_unit: t.month_info.time_unit, type: t.month_info.type }, { amount: Number(t.point_month_info.amount || 0), currency: t.point_month_info.currency, relation_id: t.point_month_info.relation_id || 0, time_unit: t.point_month_info.time_unit, type: t.point_month_info.type }] }));
      g.length && (i.push(...g), g = []), await H.save({ data: { items: i } }), re.success(window.$t("action_save_success")), h();
    });
  };
  return (e, i) => {
    const t = ke, F = Ve, N = $e, T = Fe, q = ue, p = de, B = ce, K = xe, S = Ee, k = we, C = ve, b = pe, G = _e, P = ye, y = me, W = fe, J = be, Q = ge;
    return r(), v(J, { class: "px-[60px] !overflow-y-auto relative" }, { default: a(() => [n(t, { class: "sticky top-0 left-0 right-0 z-10 pt-8 pb-4 bg-[#F6F7F8]", title: e.$t("module.subscription") }, null, 8, ["title"]), s("div", Ce, [s("h1", Ie, c(e.$t("module.subscription_header_title")), 1), s("div", ze, [ne((r(), v(W, { ref_key: "form_ref", ref: U, class: "mt-6 pb-1 pr-1 overflow-hidden flex gap-4 w-max", model: u.value, "label-position": "top" }, { default: a(() => [(r(true), d(_, null, f(u.value, (l, I) => (r(), d("div", { key: I, class: "flex-none w-[334px] bg-[#F9F9FC] p-4 box-border" }, [n(p, null, { default: a(() => [s("div", Ue, [n(T, { placement: "bottom", trigger: "click", onCommand: (o) => R(o, l) }, { dropdown: a(() => [n(N, null, { default: a(() => [(r(), d(_, null, f([1, 2, 3, 4, 5], (o) => n(F, { key: o, command: o }, { default: a(() => [s("img", { src: w(z) + `/subscription/vip-${o}.png`, class: "w-[36px] h-[36px] object-cover" }, null, 8, Ne)]), _: 2 }, 1032, ["command"])), 64))]), _: 1 })]), default: a(() => [s("img", { src: /\.png$/.test(l.logo_url) ? l.logo_url : e.$getRealPath({ url: `/images/subscription/${l.logo_url}.png` }), class: "flex-none w-[36px] h-[36px] object-cover" }, null, 8, De)]), _: 2 }, 1032, ["onCommand"]), n(p, { class: "flex-1", prop: `${I}.group_name`, rules: w(le)({ message: "form_input_placeholder" }) }, { default: a(() => [n(q, { modelValue: l.group_name, "onUpdate:modelValue": (o) => l.group_name = o, size: "large", placeholder: e.$t("form_input_placeholder"), "show-word-limit": "", maxlength: "10" }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder"])]), _: 2 }, 1032, ["prop", "rules"]), n(B, { class: x(["flex-none cursor-pointer", [u.value.length < 2 ? "invisible" : ""]]), size: "16", color: "#F04F4D", onClick: (o) => O({ data: l, index: I }) }, { default: a(() => [n(w(te))]), _: 2 }, 1032, ["class", "onClick"])])]), _: 2 }, 1024), n(p, { label: e.$t("module.subscription_charge") }, { default: a(() => [s("div", Be, [n(S, { class: "flex-none !w-[86px]", size: "large", modelValue: l.year_info.currency, "onUpdate:modelValue": (o) => l.year_info.currency = o }, { default: a(() => [(r(true), d(_, null, f(D.value, (o) => (r(), v(K, { key: o.value, label: o.label, value: o.value }, null, 8, ["label", "value"]))), 128))]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue"]), n(k, { class: "charge-price-input flex-1", modelValue: l.year_info.amount, "onUpdate:modelValue": (o) => l.year_info.amount = o, size: "large", controls: false, precision: 2, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), s("div", Ke, "/" + c(e.$t("yearly")), 1)]), s("div", Se, [n(S, { class: "flex-none !w-[86px]", size: "large", modelValue: l.month_info.currency, "onUpdate:modelValue": (o) => l.month_info.currency = o }, { default: a(() => [(r(true), d(_, null, f(D.value, (o) => (r(), v(K, { key: o.value, label: o.label, value: o.value }, null, 8, ["label", "value"]))), 128))]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue"]), n(k, { class: "charge-price-input flex-1", modelValue: l.month_info.amount, "onUpdate:modelValue": (o) => l.month_info.amount = o, size: "large", controls: false, precision: 2, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), s("div", Ae, "/" + c(e.$t("monthly")), 1)])]), _: 2 }, 1032, ["label"]), n(p, { label: e.$t("module.subscription_points") }, { default: a(() => [s("div", Me, [n(k, { class: "charge-point-input flex-1", modelValue: l.point_month_info.amount, "onUpdate:modelValue": (o) => l.point_month_info.amount = o, size: "large", controls: false, precision: 0, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), s("div", je, "/" + c(e.$t("monthly")), 1)])]), _: 2 }, 1032, ["label"]), n(C), l.agents && l.agents.length ? (r(), d(_, { key: 0 }, [n(p, { class: "!mb-0", label: e.$t("module.subscription_agent_bots") }, { default: a(() => [(r(true), d(_, null, f(l.agents, (o, X) => (r(), d("div", { key: X, class: "w-full flex items-center gap-2 mb-3" }, [s("img", { src: o.logo, class: "flex-none w-[18px] h-[18px] object-contain rounded-full overflow-hidden" }, null, 8, He), s("div", Le, c(o.name), 1)]))), 128))]), _: 2 }, 1032, ["label"]), n(C)], 64)) : M("", true), n(p, { class: "!mb-0" }, { label: a(() => [s("div", Oe, [j(c(e.$t("module.subscription_ai_assistant")) + " ", 1), n(G, { content: e.$t("module.subscription_ai_assistant_tip"), placement: "bottom" }, { default: a(() => [n(b, { class: "flex-none", name: "question", color: "#A0A7B8", width: "14", height: "14" })]), _: 1 }, 8, ["content"]), i[3] || (i[3] = s("div", { class: "flex-1" }, null, -1)), n(P, { class: "ml-2", modelValue: l.ai_enabled, "onUpdate:modelValue": (o) => l.ai_enabled = o, size: "small" }, null, 8, ["modelValue", "onUpdate:modelValue"])])]), default: a(() => [s("div", Re, [n(y, { class: "!p-2", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: i[0] || (i[0] = (o) => $({ type: "windows" })) }, { default: a(() => [n(b, { class: x(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "windows", width: "14", height: "14" }, null, 8, ["class"]), i[4] || (i[4] = s("span", { class: "text-xs" }, "Windows", -1))]), _: 2, __: [4] }, 1032, ["disabled"]), n(y, { class: "!p-2 !ml-0", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: i[1] || (i[1] = (o) => $({ type: "ios" })) }, { default: a(() => [n(b, { class: x(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "ios", width: "14", height: "14" }, null, 8, ["class"]), i[5] || (i[5] = s("span", { class: "text-xs" }, "macOS", -1))]), _: 2, __: [5] }, 1032, ["disabled"]), n(y, { class: "!p-2 !ml-0", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: i[2] || (i[2] = (o) => $({ type: "chrome" })) }, { default: a(() => [n(b, { class: x(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "chrome", width: "14", height: "14" }, null, 8, ["class"]), i[6] || (i[6] = s("span", { class: "text-xs" }, "Google", -1))]), _: 2, __: [6] }, 1032, ["disabled"])])]), _: 2 }, 1024)]))), 128)), u.value.length < 5 ? (r(), d("div", { key: 0, class: "flex-none w-[200px] bg-[#F9F9FC] flex items-center justify-center p-4 box-border cursor-pointer hover:opacity-70", onClick: L }, [n(B, { size: "16", color: "#4F5052" }, { default: a(() => [n(w(ae))]), _: 1 })])) : M("", true)]), _: 1 }, 8, ["model"])), [[Q, E.value]])])]), s("div", Ye, [s("div", Te, [n(C), n(y, { class: "h-[36px] w-[96px]", type: "primary", size: "large", onClick: Y }, { default: a(() => [j(c(e.$t("action_save")), 1)]), _: 1 })])])]), _: 1 });
  };
} });
const po = he(qe, [["__scopeId", "data-v-4de6e7c8"]]);
export {
  po as default
};
