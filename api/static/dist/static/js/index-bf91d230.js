import { u as Z, r as m, o as ee, J as M, a as oe, h as v, i as a, b as r, f as n, d as s, t as c, g as ne, c as d, G as f, F as _, z as x, P as z, a4 as le, n as w, a5 as te, e as A, H, a6 as ae, a7 as se, a8 as ie, a9 as re, X as ue, aa as de, y as ce, L as pe, ab as _e, $ as me, ac as fe, p as he } from "./index-6feda8be.js";
import { v as ge } from "./el-loading-7d1392af.js";
import { _ as be } from "./index-35dfd48d.js";
import { E as ye } from "./el-switch-d1b774bc.js";
import { E as ve } from "./el-divider-c2f6b942.js";
import { E as xe } from "./el-input-number-a4222484.js";
import "./el-tag-41766c4c.js";
import { E as we, a as Ee } from "./el-select-15a52e42.js";
import "./el-scrollbar-1c0147c5.js";
import { E as $e, a as Ve, b as Fe } from "./el-dropdown-item-61acbf47.js";
import { _ as ke } from "./index.vue_vue_type_script_setup_true_lang-bf5c9b93.js";
import { s as j } from "./subscription-7ceb7995.js";
import "./index-17af2188.js";
import "./isEqual-8788d17b.js";
import "./debounce-bf10b7f9.js";
import "./dropdown-4cbb8c7d.js";
const Ce = { class: "flex flex-col bg-white px-6 pt-6 box-border" }, Ie = { class: "flex-none text-sm text-[#4F5052]" }, ze = { class: "overflow-x-auto" }, Ue = { class: "w-full flex items-center gap-2.5" }, De = ["src"], Ne = ["src"], Se = { class: "w-full flex items-center gap-2" }, Be = { class: "flex-none text-sm text-[#1D1E1F]" }, Ke = { class: "mt-3 w-full flex items-center gap-2" }, Me = { class: "flex-none text-sm text-[#1D1E1F]" }, Ae = { class: "w-full flex items-center gap-2" }, He = { class: "flex-none text-sm text-[#1D1E1F]" }, je = ["src"], Le = { class: "flex-1 truncate text-sm text-[#4F5052]" }, Oe = { class: "flex items-center gap-1" }, Ye = { class: "flex flex-wrap items-center gap-2" }, Re = { class: "sticky bottom-0 left-0 right-0 z-10 bg-[#F6F7F8] pb-8 box-border" }, Te = { class: "bg-white px-6 pt-2 pb-6" }, Ge = Z({ __name: "index", setup(Pe) {
  const U = m(), E = m(false), u = m([]), D = m([{ value: "CNY", label: "CNY" }, { value: "USD", label: "USD" }]);
  m([{ icon: "advanced-bot", label: "\u9500\u552E\u4FC3\u5355\u5B9E\u6218\u6F14\u7EC3", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u5C0F\u7EA2\u4E66\u7206\u6B3E\u6587\u6848\u751F\u6210", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u5C3D\u8C03\u52A9\u624B", includes: ["pro", "flagship"] }, { icon: "advanced-bot", label: "\u4E16\u754C500\u5F3A\u4F01\u4E1A\u5206\u6790", includes: ["flagship"] }, { icon: "advanced-bot", label: "\u5BA2\u6237\u6316\u6398\u52A9\u7406", includes: ["flagship"] }]), ee(async () => {
    h(), M.on("user-login-success", h);
  }), oe(() => {
    M.off("user-login-success", h);
  });
  let $ = [];
  const h = async () => {
    E.value = true, $ = await j.list().finally(() => {
      E.value = false;
    }), u.value = [...$];
  }, L = () => {
    const e = se($[0]);
    e.delete = false, e.group_id = 0, e.setting_id = 0, e.sort = 0, e.group_name = "", e.logo_url = z + `/subscription/vip-${u.value.length + 1}.png`, e.ai_enabled = false, e.relations = [], e.year_info.amount = "0.00", e.year_info.currency = "CNY", e.year_info.relation_id = 0, e.year_info.time_unit = "year", e.year_info.type = 1, e.month_info.amount = "0.00", e.month_info.currency = "CNY", e.month_info.relation_id = 0, e.month_info.time_unit = "month", e.month_info.type = 1, e.point_month_info.amount = "0", e.point_month_info.currency = "", e.point_month_info.relation_id = 0, e.point_month_info.time_unit = "month", e.point_month_info.type = 2, e.agents = [], u.value.push(e);
  };
  let g = [];
  const O = async ({ data: e = {}, index: i = 0 } = {}) => {
    e.group_id && await ie.confirm(window.$t("module.subscription_delete_confirm")), e.delete = true, e.group_id && g.push(e), u.value.splice(i, 1);
  }, Y = (e = "", i) => {
    i.logo_url = z + `/subscription/vip-${e}.png`;
  }, V = ({ type: e = "" } = {}) => {
  }, R = () => {
    U.value.validate(async (e) => {
      if (!e)
        return;
      const i = u.value.map((t = {}, F) => ({ delete: false, group_id: t.group_id || 0, setting_id: t.setting_id || 0, ai_enabled: !!+t.ai_enabled, sort: u.value.length - F, group_name: t.group_name || "", logo_url: t.logo_url || "", relations: [{ amount: Math.round(t.year_info.amount * 1e4) / 100, currency: t.year_info.currency, relation_id: t.year_info.relation_id || 0, time_unit: t.year_info.time_unit, type: t.year_info.type }, { amount: Math.round(t.month_info.amount * 1e4) / 100, currency: t.month_info.currency, relation_id: t.month_info.relation_id || 0, time_unit: t.month_info.time_unit, type: t.month_info.type }, { amount: Number(t.point_month_info.amount || 0), currency: t.point_month_info.currency, relation_id: t.point_month_info.relation_id || 0, time_unit: t.point_month_info.time_unit, type: t.point_month_info.type }] }));
      g.length && (i.push(...g), g = []), await j.save({ data: { items: i } }), re.success(window.$t("action_save_success")), h();
    });
  };
  return (e, i) => {
    const t = ke, F = $e, N = Ve, T = Fe, G = ue, p = de, S = ce, B = we, K = Ee, k = xe, C = ve, b = pe, P = _e, q = ye, y = me, J = fe, W = be, X = ge;
    return r(), v(W, { class: "px-[60px] !overflow-y-auto relative" }, { default: a(() => [n(t, { class: "sticky top-0 left-0 right-0 z-10 pt-8 pb-4 bg-[#F6F7F8]", title: e.$t("module.subscription") }, null, 8, ["title"]), s("div", Ce, [s("h1", Ie, c(e.$t("module.subscription_header_title")), 1), s("div", ze, [ne((r(), v(J, { ref_key: "form_ref", ref: U, class: "mt-6 pb-1 pr-1 overflow-hidden flex gap-4 w-max", model: u.value, "label-position": "top" }, { default: a(() => [(r(true), d(_, null, f(u.value, (l, I) => (r(), d("div", { key: I, class: "flex-none w-[334px] bg-[#F9F9FC] p-4 box-border" }, [n(p, null, { default: a(() => [s("div", Ue, [n(T, { placement: "bottom", trigger: "click", onCommand: (o) => Y(o, l) }, { dropdown: a(() => [n(N, null, { default: a(() => [(r(), d(_, null, f([1, 2, 3, 4, 5], (o) => n(F, { key: o, command: o }, { default: a(() => [s("img", { src: x(z) + `/subscription/vip-${o}.png`, class: "w-[36px] h-[36px] object-cover" }, null, 8, Ne)]), _: 2 }, 1032, ["command"])), 64))]), _: 1 })]), default: a(() => [s("img", { src: /\.png$/.test(l.logo_url) ? l.logo_url : e.$getRealPath({ url: `/images/subscription/${l.logo_url}.png` }), class: "flex-none w-[36px] h-[36px] object-cover" }, null, 8, De)]), _: 2 }, 1032, ["onCommand"]), n(p, { class: "flex-1", prop: `${I}.group_name`, rules: x(le)({ message: "form_input_placeholder" }) }, { default: a(() => [n(G, { modelValue: l.group_name, "onUpdate:modelValue": (o) => l.group_name = o, size: "large", placeholder: e.$t("form_input_placeholder"), "show-word-limit": "", maxlength: "10" }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder"])]), _: 2 }, 1032, ["prop", "rules"]), n(S, { class: w(["flex-none cursor-pointer", [u.value.length < 2 ? "invisible" : ""]]), size: "16", color: "#F04F4D", onClick: (o) => O({ data: l, index: I }) }, { default: a(() => [n(x(te))]), _: 2 }, 1032, ["class", "onClick"])])]), _: 2 }, 1024), n(p, { label: e.$t("module.subscription_charge") }, { default: a(() => [s("div", Se, [n(K, { class: "flex-none !w-[86px]", size: "large", modelValue: l.year_info.currency, "onUpdate:modelValue": (o) => l.year_info.currency = o }, { default: a(() => [(r(true), d(_, null, f(D.value, (o) => (r(), v(B, { key: o.value, label: o.label, value: o.value }, null, 8, ["label", "value"]))), 128))]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue"]), n(k, { class: "charge-price-input flex-1", modelValue: l.year_info.amount, "onUpdate:modelValue": (o) => l.year_info.amount = o, size: "large", controls: false, precision: 2, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), s("div", Be, "/" + c(e.$t("yearly")), 1)]), s("div", Ke, [n(K, { class: "flex-none !w-[86px]", size: "large", modelValue: l.month_info.currency, "onUpdate:modelValue": (o) => l.month_info.currency = o }, { default: a(() => [(r(true), d(_, null, f(D.value, (o) => (r(), v(B, { key: o.value, label: o.label, value: o.value }, null, 8, ["label", "value"]))), 128))]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue"]), n(k, { class: "charge-price-input flex-1", modelValue: l.month_info.amount, "onUpdate:modelValue": (o) => l.month_info.amount = o, size: "large", controls: false, precision: 2, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), s("div", Me, "/" + c(e.$t("monthly")), 1)])]), _: 2 }, 1032, ["label"]), n(p, { label: e.$t("module.subscription_points") }, { default: a(() => [s("div", Ae, [n(k, { class: "charge-point-input flex-1", modelValue: l.point_month_info.amount, "onUpdate:modelValue": (o) => l.point_month_info.amount = o, size: "large", controls: false, precision: 0, min: 0, max: 999999999999, placeholder: e.$t("form_input_placeholder"), onKeydown: e.$numberInputKeydownHandler }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder", "onKeydown"]), s("div", He, "/" + c(e.$t("monthly")), 1)])]), _: 2 }, 1032, ["label"]), n(C), l.agents && l.agents.length ? (r(), d(_, { key: 0 }, [n(p, { class: "!mb-0", label: e.$t("module.subscription_agent_bots") }, { default: a(() => [(r(true), d(_, null, f(l.agents, (o, Q) => (r(), d("div", { key: Q, class: "w-full flex items-center gap-2 mb-3" }, [s("img", { src: o.logo, class: "flex-none w-[18px] h-[18px] object-contain rounded-full overflow-hidden" }, null, 8, je), s("div", Le, c(o.name), 1)]))), 128))]), _: 2 }, 1032, ["label"]), n(C)], 64)) : A("", true), n(p, { class: "!mb-0" }, { label: a(() => [s("div", Oe, [H(c(e.$t("module.subscription_ai_assistant")) + " ", 1), n(P, { content: e.$t("module.subscription_ai_assistant_tip"), placement: "bottom" }, { default: a(() => [n(b, { class: "flex-none", name: "question", color: "#A0A7B8", width: "14", height: "14" })]), _: 1 }, 8, ["content"]), i[3] || (i[3] = s("div", { class: "flex-1" }, null, -1)), n(q, { class: "ml-2", modelValue: l.ai_enabled, "onUpdate:modelValue": (o) => l.ai_enabled = o, size: "small" }, null, 8, ["modelValue", "onUpdate:modelValue"])])]), default: a(() => [s("div", Ye, [n(y, { class: "!p-2", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: i[0] || (i[0] = (o) => V({ type: "windows" })) }, { default: a(() => [n(b, { class: w(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "windows", width: "14", height: "14" }, null, 8, ["class"]), i[4] || (i[4] = s("span", { class: "text-xs" }, "Windows", -1))]), _: 2 }, 1032, ["disabled"]), n(y, { class: "!p-2 !ml-0", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: i[1] || (i[1] = (o) => V({ type: "ios" })) }, { default: a(() => [n(b, { class: w(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "ios", width: "14", height: "14" }, null, 8, ["class"]), i[5] || (i[5] = s("span", { class: "text-xs" }, "macOS", -1))]), _: 2 }, 1032, ["disabled"]), n(y, { class: "!p-2 !ml-0", type: "default", plain: "", size: "default", disabled: !l.ai_enabled, onClick: i[2] || (i[2] = (o) => V({ type: "chrome" })) }, { default: a(() => [n(b, { class: w(["mr-1.5", { "opacity-50": !l.ai_enabled }]), name: "chrome", width: "14", height: "14" }, null, 8, ["class"]), i[6] || (i[6] = s("span", { class: "text-xs" }, "Google", -1))]), _: 2 }, 1032, ["disabled"])])]), _: 2 }, 1024)]))), 128)), u.value.length < 5 ? (r(), d("div", { key: 0, class: "flex-none w-[200px] bg-[#F9F9FC] flex items-center justify-center p-4 box-border cursor-pointer hover:opacity-70", onClick: L }, [n(S, { size: "16", color: "#4F5052" }, { default: a(() => [n(x(ae))]), _: 1 })])) : A("", true)]), _: 1 }, 8, ["model"])), [[X, E.value]])])]), s("div", Re, [s("div", Te, [n(C), n(y, { class: "h-[36px] w-[96px]", type: "primary", size: "large", onClick: R }, { default: a(() => [H(c(e.$t("action_save")), 1)]), _: 1 })])])]), _: 1 });
  };
} });
const co = he(Ge, [["__scopeId", "data-v-4de6e7c8"]]);
export {
  co as default
};
